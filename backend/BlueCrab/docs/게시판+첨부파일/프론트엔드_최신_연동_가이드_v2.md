# Blue Crab LMS - 게시글 및 첨부파일 API 최신 연동 가이드 v2.0

## 📋 개요

Blue Crab LMS의 게시글 및 첨부파일 시스템의 **완전히 구현된** API를 프론트엔드에서 연동하기 위한 최신 가이드입니다.

**최종 업데이트**: 2025년 10월 3일  
**버전**: 2.0 (완전 구현 버전)

---

## 📑 목차

1. [구현 완료된 기능 요약](#구현-완료된-기능-요약)
2. [API 플로우 차트](#api-플로우-차트)
3. [인증 및 보안](#인증-및-보안)
4. [게시글 API](#게시글-api)
5. [첨부파일 API](#첨부파일-api)
6. [통합 시나리오](#통합-시나리오)
7. [프론트엔드 구현 예제](#프론트엔드-구현-예제)
8. [에러 처리 가이드](#에러-처리-가이드)

---

## ✅ 구현 완료된 기능 요약

### 게시글 기능
- ✅ 게시글 목록 조회 (전체/코드별, 페이징)
- ✅ 게시글 상세 조회 (첨부파일 정보 포함, 조회수 증가)
- ✅ 게시글 작성 (JWT 인증 필요)
- ✅ 첨부파일 연결 (게시글 작성 후)

### 첨부파일 기능
- ✅ 파일 업로드 (다중 파일, 최대 5개, JWT 인증 필요)
- ✅ 파일 다운로드 (**브라우저 다운로더 사용**, 인증 불필요)
- ✅ 파일 정보 조회 (다운로드 전 메타데이터 확인)
- ✅ 파일 삭제 (단일/다중 통합, 논리적 삭제, JWT 인증 필요)
- ✅ 게시글별 전체 파일 삭제 (JWT 인증 필요)

---

## 🔄 API 플로우 차트

### 📝 게시글 작성 플로우 (첨부파일 포함)

```
┌─────────────────────────────────────────────────────────────┐
│                    1단계: 게시글 생성                         │
│  POST /api/boards/create                                    │
│  Content-Type: application/json                             │
│  Authorization: Bearer {JWT_TOKEN}                          │
│                                                              │
│  요청: { boardCode, boardTitle, boardContent, ... }         │
│  응답: { success: true, boardIdx: 123 }                     │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│              2단계: 첨부파일 업로드 (선택사항)                 │
│  POST /api/board-attachments/upload/{boardIdx}             │
│  Content-Type: multipart/form-data                          │
│  Authorization: Bearer {JWT_TOKEN}                          │
│                                                              │
│  요청: FormData { files: [File1, File2, ...] }              │
│  응답: { success: true, attachments: [                      │
│           { attachmentIdx: 45, originalFileName: "파일.pdf" }│
│         ]}                                                   │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│            3단계: 첨부파일 연결 (2단계 실행 시만)              │
│  POST /api/boards/link-attachments/{boardIdx}              │
│  Content-Type: application/json                             │
│  Authorization: Bearer {JWT_TOKEN}                          │
│                                                              │
│  요청: { attachmentIdx: [45, 46, 47] }                      │
│  응답: { success: true, message: "연결 완료" }              │
└─────────────────────────────────────────────────────────────┘
                            ↓
                        ✅ 완료
```

### 📖 게시글 조회 플로우

```
┌─────────────────────────────────────────────────────────────┐
│                  게시글 상세 조회                             │
│  POST /api/boards/detail                                    │
│  Content-Type: application/json                             │
│  인증: 불필요                                                 │
│                                                              │
│  요청: { boardIdx: 123 }                                     │
│  응답: {                                                     │
│    boardIdx: 123,                                            │
│    boardTitle: "제목",                                       │
│    boardContent: "내용",                                     │
│    attachmentDetails: [                                     │
│      {                                                       │
│        attachmentIdx: 45,                                    │
│        originalFileName: "문서.pdf",                         │
│        fileSize: 1024000,                                    │
│        mimeType: "application/pdf"                          │
│      }                                                       │
│    ]                                                         │
│  }                                                           │
└─────────────────────────────────────────────────────────────┘
```

### 💾 파일 다운로드 플로우 (브라우저 다운로더 사용)

```
┌─────────────────────────────────────────────────────────────┐
│              첨부파일 다운로드 (브라우저 자동 처리)             │
│  POST /api/board-attachments/download                       │
│  Content-Type: application/json                             │
│  인증: 불필요                                                 │
│                                                              │
│  요청: { attachmentIdx: 45 }                                 │
│  응답: File Stream (브라우저가 자동으로 다운로드 시작)         │
│                                                              │
│  ※ Content-Disposition 헤더 포함:                            │
│     attachment; filename="원본파일명.pdf"                    │
│  ※ 브라우저가 자동으로 다운로드 대화상자 표시                  │
└─────────────────────────────────────────────────────────────┘
```

---

## 🔐 인증 및 보안

### JWT 토큰이 필요한 API
| API | 엔드포인트 | 인증 필요 |
|-----|-----------|---------|
| 게시글 작성 | `POST /api/boards/create` | ✅ 필수 |
| 파일 업로드 | `POST /api/board-attachments/upload/{boardIdx}` | ✅ 필수 |
| 파일 연결 | `POST /api/boards/link-attachments/{boardIdx}` | ✅ 필수 |
| 파일 삭제 | `POST /api/board-attachments/delete/*` | ✅ 필수 |

### JWT 토큰이 불필요한 API
| API | 엔드포인트 | 인증 필요 |
|-----|-----------|---------|
| 게시글 목록 | `POST /api/boards/list` | ❌ 불필요 |
| 게시글 상세 | `POST /api/boards/detail` | ❌ 불필요 |
| 파일 다운로드 | `POST /api/board-attachments/download` | ❌ 불필요 |
| 파일 정보 조회 | `POST /api/board-attachments/info` | ❌ 불필요 |

### JWT 토큰 형식
```
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

---

## 📝 게시글 API

### 1. 게시글 목록 조회

**엔드포인트**: `POST /api/boards/list`  
**인증**: 불필요  
**설명**: 전체 게시글 목록을 페이징하여 조회 (본문 제외)

**요청**:
```json
{
  "page": 0,
  "size": 10
}
```

**응답**:
```json
{
  "content": [
    {
      "boardIdx": 1,
      "boardCode": 0,
      "boardTitle": "학교 공지사항",
      "boardWriter": "관리자",
      "boardView": 150,
      "boardReg": "2024-01-15 09:00:00",
      "boardWriterType": 1
    }
  ],
  "pageable": {
    "pageNumber": 0,
    "pageSize": 10
  },
  "totalElements": 25,
  "totalPages": 3,
  "first": true,
  "last": false
}
```

---

### 2. 코드별 게시글 목록 조회

**엔드포인트**: `POST /api/boards/bycode`  
**인증**: 불필요  
**설명**: 특정 boardCode의 게시글만 필터링하여 조회

**요청**:
```json
{
  "boardCode": 0,
  "page": 0,
  "size": 10
}
```

**boardCode 값**:
- `0`: 학교공지
- `1`: 학사공지
- `2`: 학과공지
- `3`: 교수공지

**응답**: 게시글 목록 조회와 동일

---

### 3. 게시글 상세 조회 (첨부파일 포함)

**엔드포인트**: `POST /api/boards/detail`  
**인증**: 불필요  
**설명**: 게시글 상세 정보 + 첨부파일 목록 조회, 조회수 자동 증가

**요청**:
```json
{
  "boardIdx": 123
}
```

**응답**:
```json
{
  "boardIdx": 123,
  "boardCode": 0,
  "boardTitle": "2024학년도 1학기 학사일정 안내",
  "boardContent": "학사일정을 다음과 같이 안내합니다...",
  "boardWriter": "학사관리팀",
  "boardWriterIdx": 5,
  "boardWriterType": 1,
  "boardView": 156,
  "boardReg": "2024-01-15 09:00:00",
  "boardFile": "45,46,47",
  "attachmentDetails": [
    {
      "attachmentIdx": 45,
      "boardIdx": 123,
      "originalFileName": "학사일정표.pdf",
      "filePath": "20240115/20240115-090530-001.pdf",
      "fileSize": 1024000,
      "mimeType": "application/pdf",
      "uploadDate": "2024-01-15 09:05:30",
      "isActive": 1
    },
    {
      "attachmentIdx": 46,
      "boardIdx": 123,
      "originalFileName": "안내사항.docx",
      "filePath": "20240115/20240115-090535-002.docx",
      "fileSize": 512000,
      "mimeType": "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
      "uploadDate": "2024-01-15 09:05:35",
      "isActive": 1
    }
  ]
}
```

---

### 4. 게시글 작성

**엔드포인트**: `POST /api/boards/create`  
**인증**: 필수 (JWT)  
**설명**: 새 게시글 생성

**요청**:
```json
{
  "boardCode": 0,
  "boardTitle": "제목",
  "boardContent": "내용",
  "boardWriterIdx": 5,
  "boardWriterType": 1
}
```

**응답**:
```json
{
  "success": true,
  "message": "게시글이 성공적으로 작성되었습니다.",
  "boardIdx": 123
}
```

---

### 5. 첨부파일 연결

**엔드포인트**: `POST /api/boards/link-attachments/{boardIdx}`  
**인증**: 필수 (JWT)  
**설명**: 업로드된 첨부파일을 게시글에 연결

**요청**:
```json
{
  "attachmentIdx": [45, 46, 47]
}
```

**응답**:
```json
{
  "success": true,
  "message": "첨부파일이 성공적으로 연결되었습니다.",
  "boardIdx": 123,
  "attachmentCount": 3,
  "attachmentIdx": [45, 46, 47]
}
```

---

## 📎 첨부파일 API

### 1. 파일 업로드

**엔드포인트**: `POST /api/board-attachments/upload/{boardIdx}`  
**인증**: 필수 (JWT)  
**Content-Type**: `multipart/form-data`  
**설명**: 파일을 MinIO에 업로드하고 DB에 메타데이터 저장

**요청** (FormData):
```javascript
const formData = new FormData();
formData.append('files', file1);
formData.append('files', file2);
formData.append('files', file3);
```

**응답**:
```json
{
  "success": true,
  "message": "첨부파일 업로드가 완료되었습니다.",
  "boardIdx": 123,
  "fileCount": 3,
  "attachments": [
    {
      "attachmentIdx": 45,
      "boardIdx": 123,
      "originalFileName": "문서1.pdf",
      "filePath": "20240115/20240115-090530-001.pdf",
      "fileSize": 1024000,
      "mimeType": "application/pdf",
      "uploadDate": "2024-01-15 09:05:30",
      "isActive": 1
    },
    {
      "attachmentIdx": 46,
      "boardIdx": 123,
      "originalFileName": "이미지.jpg",
      "filePath": "20240115/20240115-090535-002.jpg",
      "fileSize": 512000,
      "mimeType": "image/jpeg",
      "uploadDate": "2024-01-15 09:05:35",
      "isActive": 1
    }
  ]
}
```

**제한사항**:
- 최대 파일 개수: 5개
- 최대 파일 크기: 10MB (개별)
- 지원 형식: PDF, DOC, DOCX, XLS, XLSX, PPT, PPTX, TXT, JPG, JPEG, PNG, GIF

---

### 2. 파일 다운로드 (브라우저 다운로더 사용)

**엔드포인트**: `POST /api/board-attachments/download`  
**인증**: 불필요  
**설명**: MinIO에서 파일을 스트리밍하여 다운로드 (브라우저가 자동 처리)

**요청**:
```json
{
  "attachmentIdx": 45
}
```

**응답**: 
- **File Stream** (바이너리 데이터)
- **Content-Type**: 파일의 실제 MIME 타입 (예: `application/pdf`)
- **Content-Disposition**: `attachment; filename="원본파일명.pdf"`
- **Content-Length**: 파일 크기 (bytes)

**브라우저 동작**:
- 브라우저가 `Content-Disposition: attachment` 헤더를 감지
- 자동으로 다운로드 대화상자 표시
- 원본 파일명으로 저장 (한글 파일명 지원)

**프론트엔드 구현**:
```javascript
// 방법 1: fetch API 사용
async function downloadFile(attachmentIdx) {
  const response = await fetch('/api/board-attachments/download', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ attachmentIdx })
  });
  
  const blob = await response.blob();
  const url = window.URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = ''; // 서버에서 제공한 파일명 사용
  a.click();
  window.URL.revokeObjectURL(url);
}

// 방법 2: 간단한 링크 방식 (POST를 form으로 변환)
function downloadFileSimple(attachmentIdx) {
  const form = document.createElement('form');
  form.method = 'POST';
  form.action = '/api/board-attachments/download';
  
  const input = document.createElement('input');
  input.type = 'hidden';
  input.name = 'attachmentIdx';
  input.value = attachmentIdx;
  
  form.appendChild(input);
  document.body.appendChild(form);
  form.submit();
  document.body.removeChild(form);
}
```

---

### 3. 파일 정보 조회

**엔드포인트**: `POST /api/board-attachments/info`  
**인증**: 불필요  
**설명**: 다운로드 전 파일 메타데이터 확인

**요청**:
```json
{
  "attachmentIdx": 45
}
```

**응답**:
```json
{
  "attachmentIdx": 45,
  "originalFileName": "문서.pdf",
  "fileSize": 1024000,
  "mimeType": "application/pdf",
  "uploadDate": "2024-01-15 09:05:30"
}
```

---

### 4. 파일 삭제 (단일/다중 통합)

**엔드포인트**: `POST /api/board-attachments/delete`  
**인증**: 필수 (JWT)  
**설명**: 첨부파일을 논리적으로 삭제 (IS_ACTIVE = 0). 1개든 여러 개든 동일한 API 사용

**요청** (단일 삭제):
```json
{
  "attachmentIds": [45]
}
```

**요청** (다중 삭제):
```json
{
  "attachmentIds": [45, 46, 47]
}
```

**응답**:
```json
{
  "success": true,
  "message": "첨부파일 삭제가 완료되었습니다.",
  "successCount": 3,
  "failureCount": 0,
  "successIds": [45, 46, 47],
  "failureIds": []
}
```

**특징**:
- 단일 파일 삭제: `attachmentIds` 배열에 1개만 포함
- 다중 파일 삭제: `attachmentIds` 배열에 여러 개 포함
- 동일한 API로 처리되어 구현이 간단함

---

### 5. 게시글별 전체 파일 삭제

**엔드포인트**: `POST /api/board-attachments/delete-all/{boardIdx}`  
**인증**: 필수 (JWT)  
**설명**: 특정 게시글의 모든 첨부파일 삭제

**요청**: 없음 (Path Parameter만 사용)

**응답**:
```json
{
  "success": true,
  "message": "게시글의 모든 첨부파일이 삭제되었습니다.",
  "boardIdx": 123,
  "deletedCount": 3
}
```

---

## 🔗 통합 시나리오

### 시나리오 1: 첨부파일 포함 게시글 작성

```javascript
async function createBoardWithAttachments(boardData, files) {
  try {
    // 1단계: 게시글 생성
    const boardResponse = await fetch('/api/boards/create', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${getJwtToken()}`
      },
      body: JSON.stringify(boardData)
    });
    
    const boardResult = await boardResponse.json();
    if (!boardResult.success) throw new Error(boardResult.message);
    
    const boardIdx = boardResult.boardIdx;
    console.log(`게시글 생성 완료: ${boardIdx}`);
    
    // 첨부파일이 있는 경우에만 2~3단계 실행
    if (files && files.length > 0) {
      
      // 2단계: 파일 업로드
      const formData = new FormData();
      files.forEach(file => formData.append('files', file));
      
      const uploadResponse = await fetch(`/api/board-attachments/upload/${boardIdx}`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${getJwtToken()}`
        },
        body: formData
      });
      
      const uploadResult = await uploadResponse.json();
      if (!uploadResult.success) throw new Error(uploadResult.message);
      
      const attachmentIds = uploadResult.attachments.map(att => att.attachmentIdx);
      console.log(`파일 업로드 완료: ${attachmentIds}`);
      
      // 3단계: 첨부파일 연결
      const linkResponse = await fetch(`/api/boards/link-attachments/${boardIdx}`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${getJwtToken()}`
        },
        body: JSON.stringify({ attachmentIdx: attachmentIds })
      });
      
      const linkResult = await linkResponse.json();
      if (!linkResult.success) throw new Error(linkResult.message);
      
      console.log('첨부파일 연결 완료');
    }
    
    return { success: true, boardIdx };
    
  } catch (error) {
    console.error('게시글 작성 실패:', error);
    return { success: false, error: error.message };
  }
}

// JWT 토큰 가져오기
function getJwtToken() {
  return localStorage.getItem('jwtToken') || sessionStorage.getItem('jwtToken');
}
```

---

### 시나리오 2: 게시글 상세 보기 + 첨부파일 다운로드

```javascript
// 게시글 상세 조회
async function fetchBoardDetail(boardIdx) {
  const response = await fetch('/api/boards/detail', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ boardIdx })
  });
  
  return await response.json();
}

// 첨부파일 다운로드 (브라우저 다운로더 사용)
async function downloadAttachment(attachmentIdx, fileName) {
  try {
    const response = await fetch('/api/board-attachments/download', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ attachmentIdx })
    });
    
    if (!response.ok) throw new Error('다운로드 실패');
    
    // Blob으로 변환
    const blob = await response.blob();
    
    // 다운로드 링크 생성
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = fileName || '다운로드'; // 파일명 지정
    document.body.appendChild(a);
    a.click();
    
    // 정리
    document.body.removeChild(a);
    window.URL.revokeObjectURL(url);
    
    console.log('다운로드 완료:', fileName);
    
  } catch (error) {
    console.error('다운로드 실패:', error);
    alert('파일 다운로드에 실패했습니다.');
  }
}

// React 컴포넌트 예제
function BoardDetailComponent({ boardIdx }) {
  const [board, setBoard] = useState(null);
  
  useEffect(() => {
    fetchBoardDetail(boardIdx).then(setBoard);
  }, [boardIdx]);
  
  if (!board) return <div>로딩 중...</div>;
  
  return (
    <div className="board-detail">
      <h1>{board.boardTitle}</h1>
      <div className="content">{board.boardContent}</div>
      
      {/* 첨부파일 목록 */}
      {board.attachmentDetails && board.attachmentDetails.length > 0 && (
        <div className="attachments">
          <h3>첨부파일 ({board.attachmentDetails.length})</h3>
          <ul>
            {board.attachmentDetails.map(file => (
              <li key={file.attachmentIdx}>
                <span className="file-icon">📎</span>
                <span className="file-name">{file.originalFileName}</span>
                <span className="file-size">
                  ({(file.fileSize / 1024 / 1024).toFixed(2)} MB)
                </span>
                <button 
                  onClick={() => downloadAttachment(
                    file.attachmentIdx, 
                    file.originalFileName
                  )}
                  className="download-btn"
                >
                  다운로드
                </button>
              </li>
            ))}
          </ul>
        </div>
      )}
    </div>
  );
}
```

---

### 시나리오 3: 파일 업로드 UI 컴포넌트

```javascript
function FileUploadComponent({ boardIdx, onUploadComplete }) {
  const [selectedFiles, setSelectedFiles] = useState([]);
  const [uploading, setUploading] = useState(false);
  
  const handleFileSelect = (e) => {
    const files = Array.from(e.target.files);
    
    // 파일 개수 검증
    if (files.length > 5) {
      alert('최대 5개 파일까지만 업로드 가능합니다.');
      return;
    }
    
    // 파일 크기 검증
    const maxSize = 10 * 1024 * 1024; // 10MB
    const oversized = files.filter(f => f.size > maxSize);
    if (oversized.length > 0) {
      alert('10MB 이하의 파일만 업로드 가능합니다.');
      return;
    }
    
    setSelectedFiles(files);
  };
  
  const handleUpload = async () => {
    if (selectedFiles.length === 0) {
      alert('파일을 선택해주세요.');
      return;
    }
    
    setUploading(true);
    
    try {
      // 파일 업로드
      const formData = new FormData();
      selectedFiles.forEach(file => formData.append('files', file));
      
      const response = await fetch(`/api/board-attachments/upload/${boardIdx}`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${getJwtToken()}`
        },
        body: formData
      });
      
      const result = await response.json();
      
      if (result.success) {
        alert('파일 업로드 완료!');
        onUploadComplete && onUploadComplete(result.attachments);
        setSelectedFiles([]);
      } else {
        alert('업로드 실패: ' + result.message);
      }
      
    } catch (error) {
      alert('업로드 중 오류 발생: ' + error.message);
    } finally {
      setUploading(false);
    }
  };
  
  return (
    <div className="file-upload">
      <input 
        type="file" 
        multiple 
        onChange={handleFileSelect}
        accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.jpg,.jpeg,.png,.gif"
        disabled={uploading}
      />
      
      {selectedFiles.length > 0 && (
        <div className="file-list">
          <h4>선택된 파일 ({selectedFiles.length}/5)</h4>
          <ul>
            {selectedFiles.map((file, index) => (
              <li key={index}>
                {file.name} ({(file.size / 1024).toFixed(1)} KB)
              </li>
            ))}
          </ul>
        </div>
      )}
      
      <button 
        onClick={handleUpload}
        disabled={uploading || selectedFiles.length === 0}
      >
        {uploading ? '업로드 중...' : '업로드'}
      </button>
    </div>
  );
}
```

---

## ⚠️ 에러 처리 가이드

### 일반 에러 응답 형식

```json
{
  "success": false,
  "message": "에러 메시지",
  "errorCode": "ERROR_CODE"
}
```

### HTTP 상태 코드

| 상태 코드 | 의미 | 발생 상황 |
|----------|------|----------|
| 200 | OK | 정상 처리 |
| 400 | Bad Request | 잘못된 요청 (파라미터 누락, 형식 오류) |
| 401 | Unauthorized | 인증 실패 (토큰 없음, 만료, 유효하지 않음) |
| 404 | Not Found | 리소스 없음 (게시글, 첨부파일 미존재) |
| 410 | Gone | 삭제된 리소스 (비활성화된 첨부파일) |
| 500 | Internal Server Error | 서버 내부 오류 |

### 에러 처리 예제

```javascript
async function apiCallWithErrorHandling(url, options) {
  try {
    const response = await fetch(url, options);
    
    // HTTP 상태 코드 체크
    if (!response.ok) {
      const errorData = await response.json();
      
      switch (response.status) {
        case 401:
          alert('로그인이 필요합니다.');
          // 로그인 페이지로 리다이렉트
          window.location.href = '/login';
          break;
          
        case 404:
          alert('요청한 데이터를 찾을 수 없습니다.');
          break;
          
        case 410:
          alert('삭제된 파일입니다.');
          break;
          
        default:
          alert(`오류 발생: ${errorData.message || '알 수 없는 오류'}`);
      }
      
      throw new Error(errorData.message || 'API 호출 실패');
    }
    
    return await response.json();
    
  } catch (error) {
    console.error('API 호출 오류:', error);
    throw error;
  }
}
```

---

## 📊 제한사항 및 주의사항

### 파일 업로드 제한
- **최대 파일 개수**: 게시글당 5개
- **최대 파일 크기**: 개별 파일당 10MB
- **허용 확장자**: pdf, doc, docx, xls, xlsx, ppt, pptx, txt, jpg, jpeg, png, gif

### 파일 저장 방식
- **저장소**: MinIO (board-attached 버킷)
- **경로 구조**: `YYYYMMDD/YYYYMMDD-HHMMSS-XXX.확장자`
- **파일명**: 보안을 위해 원본 파일명이 변경되어 저장됨
- **원본 파일명**: DB에 별도 저장되어 다운로드 시 복원

### 삭제 방식
- **논리적 삭제**: IS_ACTIVE 필드를 0으로 설정 (기본)
- **물리적 삭제**: MinIO에서 실제 파일 삭제 (관리자 전용)

### 보안 고려사항
- 첨부파일 다운로드는 인증 없이 가능 (공개 파일)
- 민감한 파일은 별도 권한 체크 추가 권장
- 파일 업로드 시 파일 형식 검증 수행

---

## 🎯 API 요약표

| 기능 | 메서드 | 엔드포인트 | 인증 | Content-Type |
|-----|--------|-----------|------|--------------|
| 게시글 목록 | POST | `/api/boards/list` | ❌ | application/json |
| 코드별 목록 | POST | `/api/boards/bycode` | ❌ | application/json |
| 게시글 상세 | POST | `/api/boards/detail` | ❌ | application/json |
| 게시글 작성 | POST | `/api/boards/create` | ✅ | application/json |
| 첨부파일 연결 | POST | `/api/boards/link-attachments/{boardIdx}` | ✅ | application/json |
| 파일 업로드 | POST | `/api/board-attachments/upload/{boardIdx}` | ✅ | multipart/form-data |
| 파일 다운로드 | POST | `/api/board-attachments/download` | ❌ | application/json |
| 파일 정보 조회 | POST | `/api/board-attachments/info` | ❌ | application/json |
| 파일 삭제 | POST | `/api/board-attachments/delete` | ✅ | application/json |
| 게시글별 파일 전체 삭제 | POST | `/api/board-attachments/delete-all/{boardIdx}` | ✅ | - |

---

## 📞 문의 및 지원

백엔드 API 관련 문의사항이나 추가 요구사항이 있으시면 백엔드 팀에 연락주세요.

**특히 다음 사항들을 협의하면 더 효율적으로 진행할 수 있습니다**:
- 다운로드 진행 상태 표시 필요 여부
- 파일 미리보기 기능 필요 여부
- 추가 파일 형식 지원 필요 여부
- 파일 크기/개수 제한 조정 필요 여부

---

**문서 버전**: v2.0  
**최종 업데이트**: 2025년 10월 3일  
**작성자**: 백엔드 개발팀  
**검토자**: 성태준

---

## 📝 변경 이력

| 버전 | 날짜 | 변경 내용 |
|-----|------|----------|
| v2.0 | 2025-10-03 | 완전 구현 버전 (모든 API 완료) |
| v1.0 | 2025-10-02 | 초기 버전 (기본 API) |
