# 📝 프론트팀 요청 종합 답변

**대상**: 신아름 (프론트엔드)  
**작성**: 2025-10-22

---

## 🎯 핵심 요약

| 기능 | 상태 | 비고 |
|-----|------|------|
| **기본 필터링** | ✅ Phase 9 완료 | 즉시 사용 |
| **취소 API** | ✅ 완료 | 즉시 사용 |
| **학부/학과명 출력** | ✅ 완료 | 즉시 사용 |
| **추가 검색 옵션** | ⏳ 구현 중 | 오늘(10/22) 중 |
| **안내문** | ⏳ 구현 중 | 오늘(10/22) 중 |

---

## ✅ 즉시 사용 가능

### 1. 기본 필터링 (Phase 9 완료)

```javascript
const response = await fetch('/api/lectures/eligible', {
  method: 'POST',
  body: JSON.stringify({
    studentId: 15,  // ← 이것만으로 필터링 완료
    page: 0,
    size: 10
  })
});
// → 학부/학과 기반 자동 필터링됨
```

### 2. 수강신청 취소

```javascript
const response = await fetch(`/api/enrollments/${enrollmentIdx}`, {
  method: 'DELETE',
  headers: { 'Authorization': `Bearer ${token}` }
});
```

**상세**: [02-취소API사용법.md](./02-취소API사용법.md)

---

## ⏳ 추가 검색 옵션 (오늘 중 구현 예정)

### 📌 필터링 방식

**파라미터를 추가할수록 AND 조건으로 필터링됩니다**

```javascript
// 예시 1: 학년만 필터링
{ studentId: 15, lecYear: 2 }
// → 2학년 대상 강의만

// 예시 2: 학년 + 학기 필터링
{ studentId: 15, lecYear: 2, lecSemester: 1 }
// → 2학년 대상 + 1학기 강의만

// 예시 3: 학년 + 학기 + 전공 필터링
{ studentId: 15, lecYear: 2, lecSemester: 1, lecMajor: 1 }
// → 2학년 대상 + 1학기 + 전공 강의만
```

### Request

```json
{
  "studentId": 15,
  "lecYear": 2,        // 선택: 대상 학년 (1~4)
  "lecSemester": 2,    // 선택: 학기 (1,2)
  "lecMajor": 1,       // 선택: 전공(1)/교양(0)
  "page": 0,
  "size": 10
}
```

**⚠️ 주의**: 강의명(`name`) 검색은 로직이 복잡하여 **지원하지 않습니다**

### Response (학부/학과명 이미 포함 ✅)

```json
{
  "lecSerial": "CS101",
  "lecTit": "자료구조",
  "lecMcodeName": "공학부",           // ✅ 이미 구현됨
  "lecMcodeDepName": "컴퓨터공학과"   // ✅ 이미 구현됨
}
```

**상세**: [01-필터링파라미터명세.md](./01-필터링파라미터명세.md)

---

## ⏳ 안내문 시스템 (오늘 중 구현 예정)

### 조회 (공개)

```javascript
const response = await fetch('/notice/course-apply/view', {
  method: 'POST',
  body: JSON.stringify({})
});
// → { message: "수강신청 기간...", updatedAt, updatedBy }
```

### 저장 (관리자/교수)

```javascript
const response = await fetch('/notice/course-apply/save', {
  method: 'POST',
  headers: { 'Authorization': `Bearer ${token}` },
  body: JSON.stringify({
    message: "수강신청 기간: 2025-03-01 ~ 2025-03-15"
  })
});
```

**상세**: [03-안내문API명세.md](./03-안내문API명세.md)

---

## 🎨 프론트엔드 준비사항

### Phase 1: 즉시 적용

```jsx
// 1. 취소 기능
const handleCancel = async (enrollmentIdx) => {
  await fetch(`/api/enrollments/${enrollmentIdx}`, {
    method: 'DELETE',
    headers: { 'Authorization': `Bearer ${token}` }
  });
};

// 2. 기본 필터링
const loadLectures = async () => {
  const response = await fetch('/api/lectures/eligible', {
    method: 'POST',
    body: JSON.stringify({ studentId, page: 0, size: 10 })
  });
};
```

### Phase 2: 추가 검색 UI (오늘 중 구현 예정)

**💡 선택한 항목만 필터링에 추가됩니다** (AND 조건)

```jsx
function CourseFilter() {
  const [filters, setFilters] = useState({
    lecYear: null,
    lecSemester: null,
    lecMajor: null
  });

  const handleSearch = async () => {
    // null 값 제거 (선택된 항목만 전송)
    const params = Object.entries(filters)
      .filter(([_, value]) => value !== null)
      .reduce((acc, [key, value]) => ({ ...acc, [key]: value }), {});
    
    const response = await fetch('/api/lectures/eligible', {
      method: 'POST',
      body: JSON.stringify({
        studentId,
        ...params,  // ← 선택된 필터만 추가
        page: 0,
        size: 10
      })
    });
  };

  return (
    <div>
      <select onChange={e => setFilters({...filters, lecYear: e.target.value || null})}>
        <option value="">전체 학년</option>
        <option value="1">1학년</option>
        <option value="2">2학년</option>
        <option value="3">3학년</option>
        <option value="4">4학년</option>
      </select>
      
      <select onChange={e => setFilters({...filters, lecSemester: e.target.value || null})}>
        <option value="">전체 학기</option>
        <option value="1">1학기</option>
        <option value="2">2학기</option>
      </select>
      
      <select onChange={e => setFilters({...filters, lecMajor: e.target.value || null})}>
        <option value="">전체</option>
        <option value="1">전공</option>
        <option value="0">교양</option>
      </select>
      
      {/* ❌ 강의명 검색은 지원하지 않음 */}
      
      <button onClick={handleSearch}>검색</button>
    </div>
  );
}
```

### Phase 3: 안내문 컴포넌트 (오늘 중 구현 예정)

```jsx
// 학생용: 안내문 표시
function CourseApplyNotice() {
  const [notice, setNotice] = useState('');

  useEffect(() => {
    fetch('/notice/course-apply/view', {
      method: 'POST',
      body: JSON.stringify({})
    })
    .then(res => res.json())
    .then(data => setNotice(data.message));
  }, []);

  return (
    <div className="notice-box">
      <h2>📢 수강신청 안내</h2>
      <pre>{notice}</pre>
    </div>
  );
}

// 관리자용: 안내문 편집
function NoticeEditor() {
  const [message, setMessage] = useState('');

  const handleSave = async () => {
    await fetch('/notice/course-apply/save', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ message })
    });
    alert('저장되었습니다.');
  };

  return (
    <div>
      <h2>안내문 편집</h2>
      <textarea
        value={message}
        onChange={e => setMessage(e.target.value)}
        rows={10}
        cols={60}
      />
      <button onClick={handleSave}>저장</button>
    </div>
  );
}
```

---

## ⚠️ 주의사항

### 1. DB 컬럼명 사용

| 요청 파라미터 | DB 컬럼 | 설명 |
|-------------|---------|------|
| `lecYear` | `LEC_YEAR` | 대상 학년 (1~4) |
| `lecSemester` | `LEC_SEMESTER` | 학기 (1,2) |
| `lecMajor` | `LEC_MAJOR` | 전공(1)/교양(0) |
| ~~`name`~~ | ~~`LEC_TIT`~~ | ❌ **강의명 검색 미지원** |

### 2. 모두 선택 파라미터 (AND 조건)

```json
// 최소 요청 (필수만)
{
  "studentId": 15,
  "page": 0,
  "size": 10
}

// 선택 파라미터 추가 시 AND 조건으로 필터링
{
  "studentId": 15,
  "lecYear": 2,       // AND 2학년 대상
  "lecSemester": 1,   // AND 1학기
  "page": 0,
  "size": 10
}
```

### 3. 강의명 검색 미지원

**강의명(`name`) 검색은 로직이 복잡하여 지원하지 않습니다**

### 4. 강의 등록일 미사용

`LEC_REG` 컬럼 존재하지만 **프론트/백엔드 모두 사용 안 함**

---

## 📅 일정

**오늘(10/22) 중 완료 예정**

```
추가 검색 옵션 (1.5~2시간)
└─ lecYear, lecSemester, lecMajor 필터링
└─ AND 조건 적용
└─ ❌ 강의명 검색 제외

안내문 시스템 (3시간)
└─ COURSE_APPLY_NOTICE 테이블
└─ 조회/저장 API

총 소요: 4.5~5시간
```

---

## 📚 문서

- [00-요청검토결과.md](./00-요청검토결과.md) - 전체 검토
- [01-필터링파라미터명세.md](./01-필터링파라미터명세.md) - 필터 상세
- [02-취소API사용법.md](./02-취소API사용법.md) - 취소 가이드
- [03-안내문API명세.md](./03-안내문API명세.md) - 안내문 설계
- [04-통합요약.md](./04-통합요약.md) - 프론트팀 종합
- [05-자동필터링원리.md](./05-자동필터링원리.md) - ⭐ **백엔드 자동 처리** ← 필독

---

> **작성**: 2025-10-22
