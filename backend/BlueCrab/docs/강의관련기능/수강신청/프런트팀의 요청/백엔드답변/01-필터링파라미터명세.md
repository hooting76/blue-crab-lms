# 📋 필터링 파라미터 명세

Phase 9 백엔드 필터링 완료 + 추가 검색 옵션

---

## 🎯 현재 상황

**✅ 이미 구현됨**:
```json
{
  "studentId": 15,
  "page": 0,
  "size": 10
}
// → studentId로 학부/학과 기반 자동 필터링 완료
```

**🔧 추가 구현 예정** (선택 파라미터):
```json
{
  "studentId": 15,
  "page": 0,
  "size": 10,
  "lecYear": 2,           // ← 대상 학년 (1~4)
  "lecSemester": 2,       // ← 학기 (1=1학기, 2=2학기)
  "lecMajor": 1,          // ← 전공/교양 (1=전공, 0=교양, null=전체)
  "name": "자료구조"       // ← 강의명 검색
}
```

---

## 📝 추가 파라미터 (DB 실제 컬럼 기준)

### 1️⃣ lecYear (대상 학년)

**DB 컬럼**: `LEC_YEAR`  
**타입**: `Integer` (선택)  
**값**: `1`, `2`, `3`, `4` (학년)  
**용도**: "2학년 대상 강의만 보기"

```json
{
  "studentId": 15,
  "lecYear": 2,    // 2학년 대상 강의
  "page": 0,
  "size": 10
}
```

**SQL**:
```sql
WHERE LEC_YEAR = ?
```

---

### 2️⃣ lecSemester (학기)

**DB 컬럼**: `LEC_SEMESTER`  
**타입**: `Integer` (선택)  
**값**: `1` (1학기), `2` (2학기)  
**용도**: "이번 학기 강의만 보기"

```json
{
  "studentId": 15,
  "lecSemester": 2,    // 2학기 강의
  "page": 0,
  "size": 10
}
```

**SQL**:
```sql
WHERE LEC_SEMESTER = ?
```

---

### 3️⃣ lecMajor (전공/교양)

**DB 컬럼**: `LEC_MAJOR`  
**타입**: `Integer` (선택)  
**값**: `1` (전공), `0` (교양), `null` (전체)  
**용도**: "전공 과목만" 또는 "교양 과목만"

```json
{
  "studentId": 15,
  "lecMajor": 1,    // 전공 과목만
  "page": 0,
  "size": 10
}
```

**SQL**:
```sql
WHERE LEC_MAJOR = ?
```

---

### ~~4️⃣ name (강의명 검색)~~ ❌ 미지원

**강의명 검색은 로직이 복잡하여 지원하지 않습니다**

~~**DB 컬럼**: `LEC_TIT`~~  
~~**타입**: `String` (선택)~~  
~~**용도**: "특정 과목 검색"~~

```json
// ❌ 지원하지 않음
{
  "studentId": 15,
  "name": "자료구조",  // ❌ 이 파라미터는 사용 불가
  "page": 0,
  "size": 10
}
```

---

## 📊 응답 필드 (학부/학과명)

### lecMcodeName, lecMcodeDepName (✅ 이미 구현됨)

**SERIAL_CODE_TABLE 조인으로 추가**:

```json
{
  "lecSerial": "CS101",
  "lecTit": "자료구조",
  "lecMcode": "01",
  "lecMcodeDep": "001",
  "lecMcodeName": "공학부",           // ← 추가
  "lecMcodeDepName": "컴퓨터공학과"   // ← 추가
}
```

---

## 🔄 요청/응답 예시

### 예시 1: 학년 + 학기 필터

**Request**:
```json
{
  "studentId": 15,
  "lecYear": 2,
  "lecSemester": 2,
  "page": 0,
  "size": 10
}
```

**Response**:
```json
{
  "eligibleLectures": [
    {
      "lecSerial": "CS201",
      "lecTit": "알고리즘",
      "lecProfName": "김교수",
      "lecPoint": 3,
      "lecYear": 2,
      "lecSemester": 2,
      "lecMcodeName": "공학부",
      "lecMcodeDepName": "컴퓨터공학과",
      "isEligible": true
    }
  ],
  "pagination": {
    "currentPage": 0,
    "pageSize": 10,
    "totalElements": 12,
    "totalPages": 2
  }
}
```

---

### 예시 2: 전공 과목만

**Request**:
```json
{
  "studentId": 15,
  "lecMajor": 1,
  "page": 0,
  "size": 10
}
```

**Response**: (전공 과목만 필터링된 결과)

---

### 예시 3: 강의명 검색

**Request**:
```json
{
  "studentId": 15,
  "name": "자료구조",
  "page": 0,
  "size": 10
}
```

**Response**: ("자료구조"가 포함된 강의만)

---

### 예시 4: 복합 검색

**Request**:
```json
{
  "studentId": 15,
  "lecYear": 2,
  "lecSemester": 2,
  "lecMajor": 1,
  "name": "알고리즘",
  "page": 0,
  "size": 10
}
```

**Response**: (모든 조건을 만족하는 강의)

---

## ⚠️ 중요 사항

### 1. 모두 선택 파라미터

```json
// 최소 요청 (기본 필터링만)
{
  "studentId": 15,
  "page": 0,
  "size": 10
}
```

### 2. 강의 등록일은 사용 안 함

- `LEC_REG` 컬럼은 존재하지만 **프론트/백엔드 모두 사용 안 함**
- 필터링 파라미터에서 제외

### 3. 파라미터명 = DB 컬럼명

| 프론트 요청 | DB 컬럼 | 설명 |
|------------|---------|------|
| `lecYear` | `LEC_YEAR` | 대상 학년 (1~4) |
| `lecSemester` | `LEC_SEMESTER` | 학기 (1,2) |
| `lecMajor` | `LEC_MAJOR` | 전공/교양 (1,0) |
| `name` | `LEC_TIT` | 강의명 |

---

## 📅 구현 일정

| 작업 | 시간 |
|------|------|
| Request DTO 수정 | 10분 |
| WHERE 조건 추가 | 30분 |
| SERIAL_CODE_TABLE 조인 | 30분 |
| 테스트 | 30분 |
| **총 예상** | **1.5~2시간** |

**완료 예정**: 10/23(수) 오전

---

> **참고**: [02-취소API사용법.md](./02-취소API사용법.md), [03-안내문API명세.md](./03-안내문API명세.md)
