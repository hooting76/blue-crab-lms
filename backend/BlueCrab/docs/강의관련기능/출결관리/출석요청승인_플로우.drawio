<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36" version="28.2.7">
  <diagram name="전체 플로우" id="flow-page">
    <mxGraphModel dx="1426" dy="777" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" background="light-dark(#FFFFFF,#FFFFFF)" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="출석 요청/승인 시스템 플로우" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=light-dark(#33FF33,#4C0099);strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="600" y="20" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="student-section" value="학생 플로우" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0288D1;fontSize=16;fontStyle=1;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="40" y="80" width="480" height="520" as="geometry" />
        </mxCell>
        <mxCell id="s1" value="학생 로그인" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#0288D1;strokeWidth=2;" parent="student-section" vertex="1">
          <mxGeometry x="160" y="40" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="s2" value="내 수강 강의 목록 조회" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#0288D1;strokeWidth=2;" parent="student-section" vertex="1">
          <mxGeometry x="160" y="100" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="s3" value="출석 요청할 회차 선택&lt;br&gt;(1~80회 중)" style="rhombus;whiteSpace=wrap;html=1;fillColor=#81D4FA;strokeColor=#0288D1;strokeWidth=2;" parent="student-section" vertex="1">
          <mxGeometry x="140" y="160" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="s4" value="POST /api/student/attendance/request&lt;br&gt;{lecSerial, sessionNumber}" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#4FC3F7;strokeColor=#0288D1;fontFamily=Courier New;strokeWidth=2;" parent="student-section" vertex="1">
          <mxGeometry x="120" y="260" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s5" value="요청 성공?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#81D4FA;strokeColor=#0288D1;strokeWidth=2;" parent="student-section" vertex="1">
          <mxGeometry x="170" y="330" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="s6" value="임시 승인 상태&lt;br&gt;출석으로 기록&lt;br&gt;유효기간: 7일" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#90EE90;strokeColor=#4CAF50;strokeWidth=2;" parent="student-section" vertex="1">
          <mxGeometry x="40" y="410" width="140" height="70" as="geometry" />
        </mxCell>
        <mxCell id="s7" value="에러 메시지&lt;br&gt;(중복/잘못된 회차)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFB6C1;strokeColor=#F44336;strokeWidth=2;" parent="student-section" vertex="1">
          <mxGeometry x="300" y="410" width="140" height="70" as="geometry" />
        </mxCell>
        <mxCell id="e-s1-s2" style="strokeWidth=2;strokeColor=light-dark(#000000,#FF0000);" parent="student-section" source="s1" target="s2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e-s2-s3" style="strokeWidth=2;strokeColor=light-dark(#000000,#FF0000);" parent="student-section" source="s2" target="s3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e-s3-s4" style="strokeWidth=2;strokeColor=light-dark(#000000,#FF0000);" parent="student-section" source="s3" target="s4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e-s4-s5" style="strokeWidth=2;strokeColor=light-dark(#000000,#FF0000);" parent="student-section" source="s4" target="s5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e-s5-s6" value="성공" style="strokeWidth=2;strokeColor=light-dark(#000000,#FF0000);rounded=0;edgeStyle=orthogonalEdgeStyle;exitX=0;exitY=1;exitDx=0;exitDy=0;" parent="student-section" source="s5" target="s6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="110" y="375" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e-s5-s7" value="실패" style="strokeWidth=2;strokeColor=light-dark(#000000,#FF0000);rounded=0;edgeStyle=orthogonalEdgeStyle;exitX=1;exitY=1;exitDx=0;exitDy=0;" parent="student-section" source="s5" target="s7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="370" y="375" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="prof-section" value="교수 플로우" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FFF4E1;strokeColor=#FF9800;fontSize=16;fontStyle=1;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="560" y="80" width="480" height="520" as="geometry" />
        </mxCell>
        <mxCell id="p1" value="교수 로그인" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#FF9800;strokeWidth=2;" parent="prof-section" vertex="1">
          <mxGeometry x="160" y="30" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="p2" value="담당 강의 목록 조회" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#FF9800;strokeWidth=2;" parent="prof-section" vertex="1">
          <mxGeometry x="160" y="90" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="p3" value="POST /api/professor/attendance/requests&lt;br&gt;{lecSerial, sessionNumber, status}" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFCC80;strokeColor=#FF9800;fontFamily=Courier New;strokeWidth=2;" parent="prof-section" vertex="1">
          <mxGeometry x="90" y="150" width="300" height="40" as="geometry" />
        </mxCell>
        <mxCell id="p4" value="학생별 출석 상태 결정&lt;br&gt;(출/지/결 선택)" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFB74D;strokeColor=#FF9800;strokeWidth=2;" parent="prof-section" vertex="1">
          <mxGeometry x="140" y="210" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="p5" value="POST /api/professor/attendance/approve&lt;br&gt;{lecSerial, approvalList: [{enrollmentIdx, sessionNumber, status}]}" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFCC80;strokeColor=#FF9800;fontFamily=Courier New;fontSize=10;strokeWidth=2;" parent="prof-section" vertex="1">
          <mxGeometry x="80" y="310" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="p6" value="승인 성공?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFB74D;strokeColor=#FF9800;strokeWidth=2;" parent="prof-section" vertex="1">
          <mxGeometry x="170" y="390" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="p7" value="exp = null 설정&lt;br&gt;승인 완료 상태" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#90EE90;strokeColor=#4CAF50;strokeWidth=2;" parent="prof-section" vertex="1">
          <mxGeometry x="40" y="460" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="p8" value="에러 처리" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFB6C1;strokeColor=#F44336;strokeWidth=2;" parent="prof-section" vertex="1">
          <mxGeometry x="300" y="460" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="e-p1-p2" style="strokeWidth=2;strokeColor=light-dark(#E1D5E7,#3333FF);" parent="prof-section" source="p1" target="p2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e-p2-p3" style="strokeWidth=2;strokeColor=light-dark(#E1D5E7,#3333FF);" parent="prof-section" source="p2" target="p3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e-p3-p4" style="strokeWidth=2;strokeColor=light-dark(#E1D5E7,#3333FF);" parent="prof-section" source="p3" target="p4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e-p4-p5" style="strokeWidth=2;strokeColor=light-dark(#E1D5E7,#3333FF);" parent="prof-section" source="p4" target="p5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e-p5-p6" style="strokeWidth=2;strokeColor=light-dark(#E1D5E7,#3333FF);" parent="prof-section" source="p5" target="p6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e-p6-p7" value="성공" style="strokeWidth=2;strokeColor=light-dark(#E1D5E7,#3333FF);rounded=0;edgeStyle=orthogonalEdgeStyle;exitX=0;exitY=1;exitDx=0;exitDy=0;" parent="prof-section" source="p6" target="p7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="110" y="435" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e-p6-p8" value="실패" style="strokeWidth=2;strokeColor=light-dark(#E1D5E7,#3333FF);rounded=0;edgeStyle=orthogonalEdgeStyle;exitX=1;exitY=1;exitDx=0;exitDy=0;" parent="prof-section" source="p6" target="p8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="370" y="435" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="scheduler-section" value="자동 처리 (스케줄러)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#F0F0F0;strokeColor=#757575;fontSize=16;fontStyle=1;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1080" y="80" width="480" height="520" as="geometry" />
        </mxCell>
        <mxCell id="sch1" value="매일 오전 3시&lt;br&gt;@Scheduled 실행" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0E0E0;strokeColor=#757575;strokeWidth=2;" parent="scheduler-section" vertex="1">
          <mxGeometry x="160" y="30" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sch2" value="모든 ENROLLMENT_EXTENDED_TBL 조회" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0E0E0;strokeColor=#757575;strokeWidth=2;" parent="scheduler-section" vertex="1">
          <mxGeometry x="120" y="100" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sch3" value="exp 필드 확인" style="rhombus;whiteSpace=wrap;html=1;fillColor=#BDBDBD;strokeColor=#757575;strokeWidth=2;" parent="scheduler-section" vertex="1">
          <mxGeometry x="160" y="170" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="sch4" value="exp != null &amp;&amp;&lt;br&gt;exp &lt; today?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#BDBDBD;strokeColor=#757575;strokeWidth=2;" parent="scheduler-section" vertex="1">
          <mxGeometry x="160" y="270" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="sch5" value="자동 승인 처리&lt;br&gt;exp = null&lt;br&gt;st = &#39;출&#39; 유지" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#90EE90;strokeColor=#4CAF50;strokeWidth=2;" parent="scheduler-section" vertex="1">
          <mxGeometry x="40" y="360" width="140" height="70" as="geometry" />
        </mxCell>
        <mxCell id="sch6" value="처리 안함&lt;br&gt;대기 유지" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0E0E0;strokeColor=#757575;strokeWidth=2;" parent="scheduler-section" vertex="1">
          <mxGeometry x="300" y="360" width="140" height="70" as="geometry" />
        </mxCell>
        <mxCell id="sch7" value="DB 저장" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0E0E0;strokeColor=#757575;strokeWidth=2;" parent="scheduler-section" vertex="1">
          <mxGeometry x="160" y="470" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="e-sch1-sch2" style="strokeWidth=2;strokeColor=light-dark(#33FF33,#4C0099);" parent="scheduler-section" source="sch1" target="sch2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e-sch2-sch3" style="strokeWidth=2;strokeColor=light-dark(#33FF33,#4C0099);" parent="scheduler-section" source="sch2" target="sch3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e-sch3-sch4" style="strokeWidth=2;strokeColor=light-dark(#33FF33,#4C0099);" parent="scheduler-section" source="sch3" target="sch4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e-sch4-sch5" value="만료됨" style="strokeWidth=2;strokeColor=light-dark(#33FF33,#4C0099);edgeStyle=orthogonalEdgeStyle;rounded=0;curved=0;exitX=0;exitY=1;exitDx=0;exitDy=0;" parent="scheduler-section" source="sch4" target="sch5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="110" y="330" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e-sch4-sch6" value="유효함" style="strokeWidth=2;strokeColor=light-dark(#33FF33,#4C0099);edgeStyle=orthogonalEdgeStyle;rounded=0;curved=0;exitX=1;exitY=1;exitDx=0;exitDy=0;" parent="scheduler-section" source="sch4" target="sch6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="370" y="330" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e-sch5-sch7" style="strokeWidth=2;strokeColor=light-dark(#D5E8D4,#6600CC);rounded=0;edgeStyle=orthogonalEdgeStyle;" parent="scheduler-section" source="sch5" target="sch7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="db-section" value="데이터베이스 (JSON 구조)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FFE1E1;strokeColor=#D32F2F;fontSize=16;fontStyle=1;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="40" y="740" width="1520" height="280" as="geometry" />
        </mxCell>
        <mxCell id="db1" value="ENROLLMENT_EXTENDED_TBL&lt;br&gt;ENROLLMENT_DATA (LONGTEXT)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#D32F2F;fontStyle=1;strokeWidth=2;" parent="db-section" vertex="1">
          <mxGeometry x="40" y="40" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="db2" value="JSON 구조:&lt;br&gt;{&lt;br&gt;  &quot;attendance&quot;: [&lt;br&gt;    {&quot;s&quot;: 1, &quot;st&quot;: &quot;출&quot;, &quot;req&quot;: &quot;2025-03-10&quot;, &quot;exp&quot;: null},&lt;br&gt;    {&quot;s&quot;: 2, &quot;st&quot;: &quot;지&quot;, &quot;req&quot;: &quot;2025-03-12&quot;, &quot;exp&quot;: null},&lt;br&gt;    {&quot;s&quot;: 3, &quot;st&quot;: &quot;출&quot;, &quot;req&quot;: &quot;2025-03-15&quot;, &quot;exp&quot;: &quot;2025-03-22&quot;}&lt;br&gt;  ]&lt;br&gt;}" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#D32F2F;align=left;fontFamily=Courier New;fontSize=11;strokeWidth=2;" parent="db-section" vertex="1">
          <mxGeometry x="360" y="40" width="480" height="200" as="geometry" />
        </mxCell>
        <mxCell id="db3" value="필드 설명:&lt;br&gt;• s: 회차 (1~80)&lt;br&gt;• st: 상태 (&quot;출&quot;/&quot;지&quot;/&quot;결&quot;)&lt;br&gt;• req: 요청일 (YYYY-MM-DD)&lt;br&gt;• exp: 만료일 (YYYY-MM-DD, null=승인완료)&lt;br&gt;&lt;br&gt;상태 규칙:&lt;br&gt;• exp != null → 승인 대기중&lt;br&gt;• exp == null → 승인 완료&lt;br&gt;• exp &lt; today → 자동 승인 대상" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#D32F2F;align=left;fontSize=12;strokeWidth=2;" parent="db-section" vertex="1">
          <mxGeometry x="880" y="40" width="600" height="200" as="geometry" />
        </mxCell>
        <mxCell id="e-db1-db2" style="strokeWidth=2;" parent="db-section" source="db1" target="db2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e-db2-db3" style="strokeWidth=2;" parent="db-section" source="db2" target="db3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e-s6-db" value="저장" style="dashed=1;strokeColor=#4CAF50;strokeWidth=2;edgeStyle=orthogonalEdgeStyle;rounded=0;curved=0;" parent="1" source="s6" target="db1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e-p7-db" value="업데이트" style="dashed=1;strokeColor=#4CAF50;strokeWidth=2;rounded=0;edgeStyle=orthogonalEdgeStyle;" parent="1" source="p7" target="db1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="670" y="640" />
              <mxPoint x="270" y="640" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e-sch7-db" value="업데이트" style="dashed=1;strokeColor=#4CAF50;strokeWidth=2;rounded=0;edgeStyle=orthogonalEdgeStyle;" parent="1" source="sch7" target="db1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1320" y="680" />
              <mxPoint x="340" y="680" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="api-summary" value="API 엔드포인트 요약" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3F51B5;fontSize=16;fontStyle=1;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="40" y="1040" width="1520" height="200" as="geometry" />
        </mxCell>
        <mxCell id="api1" value="POST /api/student/attendance/request&lt;br&gt;학생 출석 요청&lt;br&gt;Body: {lecSerial, sessionNumber}" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#C5CAE9;strokeColor=#3F51B5;fontFamily=Courier New;strokeWidth=2;" parent="api-summary" vertex="1">
          <mxGeometry x="40" y="40" width="340" height="70" as="geometry" />
        </mxCell>
        <mxCell id="api2" value="POST /api/student/attendance/status&lt;br&gt;학생 출석 현황 조회&lt;br&gt;Body: {lecSerial}" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#C5CAE9;strokeColor=#3F51B5;fontFamily=Courier New;strokeWidth=2;" parent="api-summary" vertex="1">
          <mxGeometry x="40" y="120" width="340" height="70" as="geometry" />
        </mxCell>
        <mxCell id="api3" value="POST /api/professor/attendance/requests&lt;br&gt;교수 출석 요청 목록 조회&lt;br&gt;Body: {lecSerial, sessionNumber?, status?}" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#C5CAE9;strokeColor=#3F51B5;fontFamily=Courier New;strokeWidth=2;" parent="api-summary" vertex="1">
          <mxGeometry x="420" y="40" width="380" height="70" as="geometry" />
        </mxCell>
        <mxCell id="api4" value="POST /api/professor/attendance/approve&lt;br&gt;교수 출석 승인&lt;br&gt;Body: {lecSerial, approvalList: [{...}]}" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#C5CAE9;strokeColor=#3F51B5;fontFamily=Courier New;strokeWidth=2;" parent="api-summary" vertex="1">
          <mxGeometry x="420" y="120" width="380" height="70" as="geometry" />
        </mxCell>
        <mxCell id="api5" value="자동 승인 스케줄러&lt;br&gt;@Scheduled(cron=&quot;0 0 3 * * *&quot;)&lt;br&gt;매일 오전 3시 실행&lt;br&gt;만료된 출석 요청 자동 승인" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E0E0E0;strokeColor=#757575;fontFamily=Courier New;strokeWidth=2;" parent="api-summary" vertex="1">
          <mxGeometry x="840" y="40" width="640" height="150" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
