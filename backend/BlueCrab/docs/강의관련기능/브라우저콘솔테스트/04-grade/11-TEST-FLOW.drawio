<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36" version="28.2.7">
  <diagram name="테스트플로우" id="test-flow">
    <mxGraphModel dx="679" dy="370" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="1100" background="light-dark(#FFFFFF,#FFFFFF)" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="🎓 성적 관리 시스템 - 브라우저 콘솔 테스트 플로우" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=light-dark(#000000,#000000);" parent="1" vertex="1">
          <mxGeometry x="300" y="20" width="800" height="40" as="geometry" />
        </mxCell>
        <mxCell id="subtitle" value="📊 7개 API 테스트 (Phase 1: 5개 + Phase 3: 2개)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontColor=light-dark(#000000,#000000);labelBackgroundColor=none;" parent="1" vertex="1">
          <mxGeometry x="450" y="60" width="500" height="20" as="geometry" />
        </mxCell>
        <mxCell id="module-title" value="📦 테스트 모듈 구조 (4개)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=light-dark(#000000,#000000);" parent="1" vertex="1">
          <mxGeometry x="40" y="100" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="module1" value="📦 01-grade-test-utils.js&#xa;&#xa;✨ 공통 유틸리티 (235줄)&#xa;&#xa;▪ apiCall() - API 호출&#xa;▪ apiGet() - GET 전용&#xa;▪ apiPut() - PUT 전용&#xa;▪ 로그 포맷팅&#xa;▪ 에러 처리" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#008a00;strokeColor=#005700;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;fontColor=#ffffff;spacingLeft=8;spacingTop=8;" parent="1" vertex="1">
          <mxGeometry x="40" y="140" width="200" height="140" as="geometry" />
        </mxCell>
        <mxCell id="module2" value="📦 02-grade-phase1-tests.js&#xa;&#xa;🎯 Phase 1 테스트 (343줄)&#xa;&#xa;▪ testGradeConfig()&#xa;▪ testStudentGradeInfo()&#xa;▪ testProfessorGradeView()&#xa;▪ testGradeList()&#xa;▪ testGradeFinalize()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#0050ef;strokeColor=#001DBC;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;fontColor=#ffffff;spacingLeft=8;spacingTop=8;" parent="1" vertex="1">
          <mxGeometry x="320" y="140" width="200" height="140" as="geometry" />
        </mxCell>
        <mxCell id="module3" value="📦 03-grade-phase3-tests.js&#xa;&#xa;⚡ Phase 3 테스트 (149줄)&#xa;&#xa;▪ testAttendanceUpdate()&#xa;▪ testAssignmentGrade()&#xa;▪ 비동기 이벤트 검증&#xa;▪ 서버 로그 확인" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a20025;strokeColor=#6F0000;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;fontColor=#ffffff;spacingLeft=8;spacingTop=8;" parent="1" vertex="1">
          <mxGeometry x="610" y="140" width="200" height="140" as="geometry" />
        </mxCell>
        <mxCell id="module4" value="📦 04-grade-test-runner.js&#xa;&#xa;🚀 통합 러너 (212줄)&#xa;&#xa;▪ runAll() - 전체 실행&#xa;▪ scenario() - 시나리오&#xa;▪ 결과 집계&#xa;▪ 성공률 계산" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fa6800;strokeColor=#C73500;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;fontColor=#ffffff;spacingLeft=8;spacingTop=8;" parent="1" vertex="1">
          <mxGeometry x="890" y="140" width="200" height="140" as="geometry" />
        </mxCell>
        <mxCell id="arrow1" value="의존" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;strokeColor=#9673A6;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;fontColor=light-dark(#FFFFFF,#FFFFFF);fontStyle=1;" parent="1" source="module1" target="module2" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="240" y="210" as="sourcePoint" />
            <mxPoint x="280" y="210" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow2" value="의존" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;strokeColor=#82B366;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;fontColor=light-dark(#FFFFFF,#FFFFFF);fontStyle=1;" parent="1" source="module2" target="module3" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="480" y="210" as="sourcePoint" />
            <mxPoint x="520" y="210" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow3" value="의존" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;strokeColor=#D6B656;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;fontColor=light-dark(#FFFFFF,#FFFFFF);fontStyle=1;" parent="1" source="module3" target="module4" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="720" y="210" as="sourcePoint" />
            <mxPoint x="760" y="210" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="phase1-title" value="🎯 Phase 1: 핵심 기능 테스트 (5개)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=light-dark(#000000,#000000);" parent="1" vertex="1">
          <mxGeometry x="40" y="320" width="400" height="30" as="geometry" />
        </mxCell>
        <mxCell id="test1" value="1️⃣ 성적 구성 설정&#xa;&#xa;📡 POST /api/enrollments/grade-config&#xa;&#xa;✓ 출석/과제/시험 배점&#xa;✓ 등급 분포 (A+~D)&#xa;✓ 지각 페널티 설정&#xa;&#xa;▶ gradeTests.config()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#008a00;strokeColor=#005700;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;fontColor=#ffffff;spacingLeft=8;spacingTop=8;" parent="1" vertex="1">
          <mxGeometry x="40" y="370" width="180" height="150" as="geometry" />
        </mxCell>
        <mxCell id="test2" value="2️⃣ 학생 성적 조회&#xa;&#xa;📡 GET /enrollments/{lec}/{stu}/grade&#xa;&#xa;✓ 출석 점수 (출석율, 지각)&#xa;✓ 과제 점수 (개별, 총점)&#xa;✓ 총점, 백분율&#xa;&#xa;▶ gradeTests.studentInfo()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#0050ef;strokeColor=#001DBC;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;fontColor=#ffffff;spacingLeft=8;spacingTop=8;" parent="1" vertex="1">
          <mxGeometry x="250" y="370" width="180" height="160" as="geometry" />
        </mxCell>
        <mxCell id="test3" value="3️⃣ 교수용 성적 조회&#xa;&#xa;📡 GET /enrollments/professor/grade&#xa;&#xa;✓ 학생 정보 + 통계&#xa;✓ 반 평균, 최고점&#xa;✓ 순위 정보&#xa;&#xa;▶ gradeTests.professorView()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a20025;strokeColor=#6F0000;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;fontColor=#ffffff;spacingLeft=8;spacingTop=8;" parent="1" vertex="1">
          <mxGeometry x="460" y="370" width="180" height="150" as="geometry" />
        </mxCell>
        <mxCell id="test4" value="4️⃣ 성적 목록 조회&#xa;&#xa;📡 GET /enrollments/grade-list&#xa;&#xa;✓ 전체 수강생 목록&#xa;✓ 정렬 (점수, 이름)&#xa;✓ 페이징 처리&#xa;&#xa;▶ gradeTests.gradeList()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fa6800;strokeColor=#C73500;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;fontColor=#ffffff;spacingLeft=8;spacingTop=8;" parent="1" vertex="1">
          <mxGeometry x="670" y="370" width="180" height="150" as="geometry" />
        </mxCell>
        <mxCell id="test5" value="5️⃣ 최종 등급 배정&#xa;&#xa;📡 POST /enrollments/finalize-grades&#xa;&#xa;✓ 60% 기준 F등급 분류&#xa;✓ 상대평가 (A+~D)&#xa;✓ 하위 침범 알고리즘&#xa;✓ 동점자 상위등급 배정&#xa;&#xa;▶ gradeTests.finalize()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a20025;strokeColor=#6F0000;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;fontColor=#ffffff;spacingLeft=8;spacingTop=8;" parent="1" vertex="1">
          <mxGeometry x="880" y="370" width="180" height="170" as="geometry" />
        </mxCell>
        <mxCell id="phase3-title" value="⚡ Phase 3: 이벤트 시스템 테스트 (2개)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=light-dark(#000000,#000000);" parent="1" vertex="1">
          <mxGeometry x="40" y="570" width="450" height="30" as="geometry" />
        </mxCell>
        <mxCell id="test6" value="6️⃣ 출석 업데이트 + 이벤트&#xa;&#xa;📡 PUT /enrollments/{idx}/attendance&#xa;&#xa;✓ 출석/지각/결석 기록&#xa;✓ GradeUpdateEvent 발행&#xa;✓ 비동기 성적 재계산&#xa;✓ 서버 로그 확인&#xa;&#xa;▶ gradeTests.attendance()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;fontColor=#ffffff;spacingLeft=8;spacingTop=8;" parent="1" vertex="1">
          <mxGeometry x="40" y="620" width="220" height="160" as="geometry" />
        </mxCell>
        <mxCell id="test7" value="7️⃣ 과제 채점 + 이벤트&#xa;&#xa;📡 PUT /assignments/{idx}/grade&#xa;&#xa;✓ 과제 점수 입력&#xa;✓ GradeUpdateEvent 발행&#xa;✓ 비동기 성적 재계산&#xa;✓ 총점 자동 업데이트&#xa;&#xa;▶ gradeTests.assignment()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#0050ef;strokeColor=#001DBC;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;fontColor=#ffffff;spacingLeft=8;spacingTop=8;" parent="1" vertex="1">
          <mxGeometry x="300" y="620" width="220" height="160" as="geometry" />
        </mxCell>
        <mxCell id="event-box" value="⚙️ 이벤트 기반 자동 재계산 시스템&#xa;&#xa;① 출석/과제 변경 감지&#xa;   → AttendanceController&#xa;   → AssignmentController&#xa;&#xa;② GradeUpdateEvent 발행&#xa;   → ApplicationEventPublisher&#xa;&#xa;③ EventListener 비동기 처리&#xa;   → @EventListener @Async&#xa;   → GradeUpdateEventListener&#xa;&#xa;④ 해당 학생 성적만 재계산&#xa;   → GradeCalculationService&#xa;&#xa;⑤ ENROLLMENT_DATA 업데이트&#xa;   → JSON 선택적 업데이트" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a20025;strokeColor=#6F0000;strokeWidth=3;fontSize=11;align=left;verticalAlign=top;fontColor=#ffffff;dashed=1;dashPattern=8 8;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="560" y="620" width="280" height="280" as="geometry" />
        </mxCell>
        <mxCell id="execution-title" value="🚀 실행 방법" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=light-dark(#000000,#000000);" parent="1" vertex="1">
          <mxGeometry x="40" y="810" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="exec1" value="🎯 전체 테스트&#xa;&#xa;gradeTests.runAll()&#xa;&#xa;➜ 7개 순차 실행" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#008a00;strokeColor=#005700;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#ffffff;spacingLeft=8;spacingTop=8;" parent="1" vertex="1">
          <mxGeometry x="40" y="850" width="150" height="90" as="geometry" />
        </mxCell>
        <mxCell id="exec2" value="📋 시나리오 테스트&#xa;&#xa;gradeTests.scenario()&#xa;&#xa;➜ 실제 플로우" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;strokeColor=#001DBC;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#ffffff;spacingLeft=8;spacingTop=8;" parent="1" vertex="1">
          <mxGeometry x="210" y="850" width="150" height="90" as="geometry" />
        </mxCell>
        <mxCell id="exec3" value="🔍 개별 테스트&#xa;&#xa;gradeTests.config()&#xa;gradeTests.studentInfo()&#xa;..." style="rounded=1;whiteSpace=wrap;html=1;fillColor=#a20025;strokeColor=#6F0000;strokeWidth=2;fontSize=11;align=left;fontColor=#ffffff;spacingLeft=8;spacingTop=8;" parent="1" vertex="1">
          <mxGeometry x="380" y="850" width="150" height="90" as="geometry" />
        </mxCell>
        <mxCell id="result-box" value="✅ 예상 결과&#xa;&#xa;━━━━━━━━━━━━━━━━━&#xa;총 테스트: 7개&#xa;✓ 성공: 7개&#xa;✗ 실패: 0개&#xa;📊 성공률: 100.0%&#xa;━━━━━━━━━━━━━━━━━&#xa;&#xa;📝 상세 결과:&#xa;   1. 성적 구성 설정&#xa;   2. 학생 성적 조회&#xa;   3. 교수용 성적 조회&#xa;   4. 성적 목록 조회&#xa;   5. 최종 등급 배정&#xa;   6. 출석 업데이트&#xa;   7. 과제 채점&#xa;&#xa;━━━━━━━━━━━━━━━━━&#xa;🔔 서버 로그에서&#xa;   이벤트 처리 확인" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fa6800;strokeColor=#C73500;strokeWidth=3;fontSize=11;align=left;verticalAlign=top;fontColor=#ffffff;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="880" y="620" width="220" height="320" as="geometry" />
        </mxCell>
        <mxCell id="flow-arrow1" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#9673A6;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;fontColor=#000000;" parent="1" source="test1" target="test2" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="220" y="440" as="sourcePoint" />
            <mxPoint x="250" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="flow-arrow2" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#82B366;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;fontColor=#000000;" parent="1" source="test2" target="test3" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="430" y="440" as="sourcePoint" />
            <mxPoint x="460" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="flow-arrow3" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#D6B656;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;fontColor=#000000;" parent="1" source="test3" target="test4" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="640" y="440" as="sourcePoint" />
            <mxPoint x="670" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="flow-arrow4" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#D79B00;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;fontColor=#000000;" parent="1" source="test4" target="test5" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="850" y="440" as="sourcePoint" />
            <mxPoint x="880" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="event-arrow1" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#6C8EBF;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;fontColor=#000000;" parent="1" source="test6" target="test7" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="260" y="695" as="sourcePoint" />
            <mxPoint x="300" y="695" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="data-flow" value="💾 테스트 데이터 흐름" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=light-dark(#000000,#000000);" parent="1" vertex="1">
          <mxGeometry x="40" y="970" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="data-box" value="&lt;font style=&quot;font-size: 12px;&quot;&gt;📋 testData = {&#xa;  lecIdx: 1,&#xa;  studentIdx: 100,&#xa;  professorIdx: 22,&#xa;  enrollmentIdx: 1,&#xa;  assignmentIdx: 1,&#xa;  &#xa;  passingThreshold: 60.0,&#xa;  attendanceMaxScore: 80,&#xa;  assignmentTotalMaxScore: 100,&#xa;  latePenaltyPerSession: 0.5,&#xa;  &#xa;  gradeDistribution: {&#xa;    A+: 10, A: 15,&#xa;    B+: 20, B: 25,&#xa;    C: 20, D: 10&#xa;  }&#xa;}&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;strokeWidth=2;fontSize=10;align=left;verticalAlign=top;fontFamily=Courier New;fontColor=#ffffff;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="40" y="1010" width="300" height="290" as="geometry" />
        </mxCell>
        <mxCell id="modify-box" value="&lt;font style=&quot;font-size: 12px;&quot;&gt;🔧 데이터 변경&#xa;&#xa;━━━━━━━━━━━━━━━━&#xa;gradeTests.setData(&#xa;  lecIdx,&#xa;  studentIdx,&#xa;  professorIdx,&#xa;  enrollmentIdx&#xa;)&#xa;━━━━━━━━━━━━━━━━&#xa;&#xa;또는&#xa;━━━━━━━━━━━━━━━━&#xa;gradeTests.customTest({&#xa;  lecIdx: 2,&#xa;  studentIdx: 200,&#xa;  ...&#xa;})&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;strokeWidth=2;fontSize=10;align=left;fontColor=#ffffff;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="360" y="1010" width="230" height="290" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
