<mxfile host="app.diagrams.net" agent="Mozilla/5.0" version="24.0.0">
  <diagram name="성적관리-테스트-플로우" id="test-flow-diagram">
    <mxGraphModel dx="1400" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" background="#FFFFFF" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- 제목 -->
        <mxCell id="title" value="성적 관리 시스템 테스트 플로우" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="600" height="40" as="geometry" />
        </mxCell>
        
        <!-- 모듈 구조 섹션 -->
        <mxCell id="module-title" value="📦 테스트 모듈 구조" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="250" height="30" as="geometry" />
        </mxCell>
        
        <!-- 모듈 1 -->
        <mxCell id="module1" value="01-grade-test-utils.js&#xa;&#xa;🔧 공통 유틸리티&#xa;&#xa;• apiCall() - API 호출&#xa;• apiGet() - GET 전용&#xa;• apiPut() - PUT 전용&#xa;• 로그 포맷팅&#xa;• 에러 처리" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1D5E7;strokeColor=#9673A6;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="40" y="130" width="200" height="140" as="geometry" />
        </mxCell>
        
        <!-- 모듈 2 -->
        <mxCell id="module2" value="02-grade-phase1-tests.js&#xa;&#xa;📊 Phase 1 테스트 (5개)&#xa;&#xa;• 성적 구성 설정&#xa;• 학생 성적 조회&#xa;• 교수용 성적 조회&#xa;• 성적 목록 조회&#xa;• 최종 등급 배정" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="130" width="200" height="140" as="geometry" />
        </mxCell>
        
        <!-- 모듈 3 -->
        <mxCell id="module3" value="03-grade-phase3-tests.js&#xa;&#xa;🔄 Phase 3 테스트 (2개)&#xa;&#xa;• 출석 업데이트 + 이벤트&#xa;• 과제 채점 + 이벤트&#xa;• 비동기 재계산 검증" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF2CC;strokeColor=#D6B656;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="520" y="130" width="200" height="140" as="geometry" />
        </mxCell>
        
        <!-- 모듈 4 -->
        <mxCell id="module4" value="04-grade-test-runner.js&#xa;&#xa;🚀 통합 러너&#xa;&#xa;• runAll() - 전체 실행&#xa;• scenario() - 시나리오&#xa;• 결과 집계&#xa;• 성공률 계산" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE6CC;strokeColor=#D79B00;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="760" y="130" width="200" height="140" as="geometry" />
        </mxCell>
        
        <!-- 의존성 화살표 -->
        <mxCell id="arrow1" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;strokeColor=#9673A6;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="module1" target="module2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="240" y="200" as="sourcePoint" />
            <mxPoint x="280" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow2" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;strokeColor=#82B366;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="module2" target="module3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="480" y="200" as="sourcePoint" />
            <mxPoint x="520" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow3" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;strokeColor=#D6B656;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="module3" target="module4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="720" y="200" as="sourcePoint" />
            <mxPoint x="760" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Phase 1 테스트 플로우 -->
        <mxCell id="phase1-title" value="📊 Phase 1: 핵심 기능 테스트" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="40" y="310" width="350" height="30" as="geometry" />
        </mxCell>
        
        <!-- 테스트 1 -->
        <mxCell id="test1" value="1️⃣ 성적 구성 설정&#xa;&#xa;POST /api/enrollments/grade-config&#xa;&#xa;✅ 출석/과제/시험 배점&#xa;✅ 등급 분포 (A+~D)&#xa;✅ 지각 페널티 설정" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1D5E7;strokeColor=#9673A6;strokeWidth=2;fontSize=10;align=left;verticalAlign=top;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="40" y="360" width="180" height="120" as="geometry" />
        </mxCell>
        
        <!-- 테스트 2 -->
        <mxCell id="test2" value="2️⃣ 학생 성적 조회&#xa;&#xa;GET /enrollments/{lec}/{student}/grade&#xa;&#xa;✅ 출석 점수 (출석율, 지각)&#xa;✅ 과제 점수 (개별, 총점)&#xa;✅ 총점, 백분율" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;strokeWidth=2;fontSize=10;align=left;verticalAlign=top;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="240" y="360" width="180" height="120" as="geometry" />
        </mxCell>
        
        <!-- 테스트 3 -->
        <mxCell id="test3" value="3️⃣ 교수용 성적 조회&#xa;&#xa;GET /enrollments/professor/grade&#xa;&#xa;✅ 학생 정보 + 통계&#xa;✅ 반 평균, 최고점&#xa;✅ 순위 정보" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF2CC;strokeColor=#D6B656;strokeWidth=2;fontSize=10;align=left;verticalAlign=top;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="440" y="360" width="180" height="120" as="geometry" />
        </mxCell>
        
        <!-- 테스트 4 -->
        <mxCell id="test4" value="4️⃣ 성적 목록 조회&#xa;&#xa;GET /enrollments/grade-list&#xa;&#xa;✅ 전체 수강생 목록&#xa;✅ 정렬 (점수, 이름)&#xa;✅ 페이징 처리" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE6CC;strokeColor=#D79B00;strokeWidth=2;fontSize=10;align=left;verticalAlign=top;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="640" y="360" width="180" height="120" as="geometry" />
        </mxCell>
        
        <!-- 테스트 5 -->
        <mxCell id="test5" value="5️⃣ 최종 등급 배정&#xa;&#xa;POST /enrollments/finalize-grades&#xa;&#xa;✅ 60% 기준 F등급 분류&#xa;✅ 상대평가 (A+~D)&#xa;✅ 하위 침범 알고리즘&#xa;✅ 동점자 상위등급 배정" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8CECC;strokeColor=#B85450;strokeWidth=2;fontSize=10;align=left;verticalAlign=top;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="840" y="360" width="180" height="120" as="geometry" />
        </mxCell>
        
        <!-- Phase 3 테스트 플로우 -->
        <mxCell id="phase3-title" value="🔄 Phase 3: 이벤트 시스템 테스트" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="40" y="520" width="400" height="30" as="geometry" />
        </mxCell>
        
        <!-- 테스트 6 -->
        <mxCell id="test6" value="6️⃣ 출석 업데이트 + 이벤트&#xa;&#xa;PUT /enrollments/{idx}/attendance&#xa;&#xa;✅ 출석/지각/결석 기록&#xa;✅ GradeUpdateEvent 발행&#xa;✅ 비동기 성적 재계산&#xa;✅ 서버 로그 확인" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DAE8FC;strokeColor=#6C8EBF;strokeWidth=2;fontSize=10;align=left;verticalAlign=top;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="40" y="570" width="200" height="130" as="geometry" />
        </mxCell>
        
        <!-- 테스트 7 -->
        <mxCell id="test7" value="7️⃣ 과제 채점 + 이벤트&#xa;&#xa;PUT /assignments/{idx}/grade&#xa;&#xa;✅ 과제 점수 입력&#xa;✅ GradeUpdateEvent 발행&#xa;✅ 비동기 성적 재계산&#xa;✅ 총점 자동 업데이트" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;strokeWidth=2;fontSize=10;align=left;verticalAlign=top;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="570" width="200" height="130" as="geometry" />
        </mxCell>
        
        <!-- 이벤트 시스템 다이어그램 -->
        <mxCell id="event-box" value="🔄 이벤트 기반 자동 재계산&#xa;&#xa;1️⃣ 출석/과제 변경 감지&#xa;2️⃣ GradeUpdateEvent 발행&#xa;3️⃣ EventListener 비동기 처리&#xa;4️⃣ 해당 학생 성적만 재계산&#xa;5️⃣ ENROLLMENT_DATA 업데이트" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF2CC;strokeColor=#D6B656;strokeWidth=3;fontSize=11;align=left;verticalAlign=top;fontColor=#000000;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="520" y="570" width="280" height="130" as="geometry" />
        </mxCell>
        
        <!-- 실행 방법 -->
        <mxCell id="execution-title" value="🚀 실행 방법" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="40" y="740" width="200" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="exec1" value="전체 테스트&#xa;gradeTests.runAll()" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1D5E7;strokeColor=#9673A6;strokeWidth=2;fontSize=12;fontStyle=1;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="40" y="790" width="150" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="exec2" value="시나리오 테스트&#xa;gradeTests.scenario()" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;strokeWidth=2;fontSize=12;fontStyle=1;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="210" y="790" width="150" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="exec3" value="개별 테스트&#xa;gradeTests.config()&#xa;gradeTests.studentInfo()&#xa;..." style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF2CC;strokeColor=#D6B656;strokeWidth=2;fontSize=11;align=left;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="380" y="790" width="150" height="60" as="geometry" />
        </mxCell>
        
        <!-- 결과 확인 -->
        <mxCell id="result-box" value="📊 예상 결과&#xa;&#xa;총 테스트: 7개&#xa;✅ 성공: 7개&#xa;❌ 실패: 0개&#xa;📈 성공률: 100%&#xa;&#xa;💡 서버 로그에서&#xa;   이벤트 처리 확인" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE6CC;strokeColor=#D79B00;strokeWidth=3;fontSize=11;align=left;verticalAlign=top;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="850" y="570" width="170" height="280" as="geometry" />
        </mxCell>
        
        <!-- 데이터 흐름 -->
        <mxCell id="flow-arrow1" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#9673A6;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="test1" target="test2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="220" y="420" as="sourcePoint" />
            <mxPoint x="240" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="flow-arrow2" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#82B366;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="test2" target="test3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="420" y="420" as="sourcePoint" />
            <mxPoint x="440" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="flow-arrow3" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#D6B656;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="test3" target="test4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="620" y="420" as="sourcePoint" />
            <mxPoint x="640" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="flow-arrow4" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#D79B00;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="test4" target="test5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="820" y="420" as="sourcePoint" />
            <mxPoint x="840" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="event-arrow1" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#6C8EBF;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="test6" target="test7">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="240" y="635" as="sourcePoint" />
            <mxPoint x="280" y="635" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
