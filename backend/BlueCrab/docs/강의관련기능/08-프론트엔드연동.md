# 08. 프론트엔드 연동

> **작성일**: 2025-10-10  
> **최종 수정**: 2025-10-14  
> **버전**: 2.2 (교수 이름 조회 API 변경 반영)  
> **변경사항**: 
> - 모든 필드명을 대문자 + 언더스코어 규칙으로 통일
> - **API 응답 구조 변경**: lecProf (교수 코드) + lecProfName (교수 이름) 분리 ⭐
> - EnrollmentDto 구조 업데이트 반영

---

## 🎨 프론트엔드 설계 및 연동 가이드

강의 관리 시스템의 사용자 인터페이스 설계 및 백엔드 연동 방법을 정의합니다.

---

## 📋 목차

1. [UI/UX 설계 원칙](#1-uiux-설계-원칙)
2. [관리자 인터페이스](#2-관리자-인터페이스)
3. [교수 인터페이스](#3-교수-인터페이스)
4. [학생 인터페이스](#4-학생-인터페이스)
5. [공통 컴포넌트](#5-공통-컴포넌트)
6. [API 연동 가이드](#6-api-연동-가이드)
7. [반응형 디자인](#7-반응형-디자인)

---

## 1. UI/UX 설계 원칙

### **1.1 디자인 시스템**
- **색상 팔레트**:
  - Primary: `#1976D2` (블루)
  - Secondary: `#424242` (그레이)
  - Success: `#4CAF50` (그린)
  - Warning: `#FF9800` (오렌지)
  - Error: `#F44336` (레드)

- **타이포그래피**:
  - 헤더: `font-size: 24px`, `font-weight: 600`
  - 본문: `font-size: 14px`, `font-weight: 400`
  - 캡션: `font-size: 12px`, `font-weight: 400`

### **1.2 사용자 경험 원칙**
- **단순성**: 복잡한 기능을 직관적으로 표현
- **일관성**: 동일한 패턴의 UI 컴포넌트 사용
- **피드백**: 모든 사용자 액션에 즉각적 피드백 제공
- **접근성**: 키보드 네비게이션 및 스크린 리더 지원

---

## 2. 관리자 인터페이스

### **2.1 대시보드**

```jsx
// AdminDashboard.jsx
function AdminDashboard() {
  const [stats, setStats] = useState({
    totalLectures: 0,
    totalEnrollments: 0,
    pendingEvaluations: 0,
    lowAttendanceLectures: []
  });

  useEffect(() => {
    fetchDashboardStats();
  }, []);

  return (
    <div className="admin-dashboard">
      <Grid container spacing={3}>
        <Grid item xs={12} md={3}>
          <StatCard title="총 강의 수" value={stats.totalLectures} />
        </Grid>
        <Grid item xs={12} md={3}>
          <StatCard title="총 수강신청" value={stats.totalEnrollments} />
        </Grid>
        <Grid item xs={12} md={3}>
          <StatCard title="미평가 강의" value={stats.pendingEvaluations} />
        </Grid>
        <Grid item xs={12} md={3}>
          <StatCard title="출결 우려 강의" value={stats.lowAttendanceLectures.length} />
        </Grid>
      </Grid>
    </div>
  );
}
```

### **2.2 강의 관리 페이지**

```jsx
// LectureManagement.jsx
function LectureManagement() {
  const [lectures, setLectures] = useState([]);
  const [openDialog, setOpenDialog] = useState(false);
  const [selectedLecture, setSelectedLecture] = useState(null);

  const handleBatchRegister = async (lectureData) => {
    try {
      const response = await api.post('/admin/lectures/batch', lectureData);
      showSuccessToast(`${response.data.length}개의 강의가 등록되었습니다.`);
      fetchLectures();
    } catch (error) {
      showErrorToast('강의 등록에 실패했습니다.');
    }
  };

  return (
    <div className="lecture-management">
      <div className="actions">
        <Button variant="contained" onClick={() => setOpenDialog(true)}>
          강의 등록
        </Button>
        <Button variant="outlined" onClick={handleBatchImport}>
          엑셀 일괄 등록
        </Button>
      </div>

      <DataTable
        columns={lectureColumns}
        data={lectures}
        onEdit={handleEdit}
        onDelete={handleDelete}
      />

      <LectureDialog
        open={openDialog}
        onClose={() => setOpenDialog(false)}
        lecture={selectedLecture}
        onSave={handleSave}
      />
    </div>
  );
}
```

### **2.3 평가 관리 페이지**

```jsx
// EvaluationManagement.jsx
function EvaluationManagement() {
  const [evaluationItems, setEvaluationItems] = useState([]);
  const [results, setResults] = useState([]);

  const handleAddItem = () => {
    setEvaluationItems([...evaluationItems, {
      itemName: '',
      isRequired: true
    }]);
  };

  return (
    <div className="evaluation-management">
      <Typography variant="h5" gutterBottom>
        강의 평가 항목 관리
      </Typography>

      {evaluationItems.map((item, index) => (
        <EvaluationItemForm
          key={index}
          item={item}
          onChange={(updatedItem) => handleItemChange(index, updatedItem)}
          onDelete={() => handleItemDelete(index)}
        />
      ))}

      <Button onClick={handleAddItem}>
        항목 추가
      </Button>

      <Divider style={{ margin: '20px 0' }} />

      <Typography variant="h5" gutterBottom>
        평가 결과 통계
      </Typography>

      <EvaluationResultsChart data={results} />
    </div>
  );
}
```

---

## 3. 교수 인터페이스

### **3.1 강의 대시보드**

```jsx
// ProfessorDashboard.jsx
function ProfessorDashboard() {
  const [myLectures, setMyLectures] = useState([]);
  const [notifications, setNotifications] = useState([]);

  useEffect(() => {
    fetchMyLectures();
    fetchNotifications();
  }, []);

  return (
    <div className="professor-dashboard">
      <Typography variant="h4" gutterBottom>
        내 강의 현황
      </Typography>

      <Grid container spacing={3}>
        {myLectures.map(lecture => (
          <Grid item xs={12} md={6} lg={4} key={lecture.lectureIdx}>
            <LectureCard
              lecture={lecture}
              onClick={() => navigate(`/professor/lectures/${lecture.lectureIdx}`)}
            />
          </Grid>
        ))}
      </Grid>

      <Typography variant="h5" gutterBottom style={{ marginTop: 30 }}>
        최근 알림
      </Typography>

      <NotificationList notifications={notifications} />
    </div>
  );
}
```

### **3.2 출결 관리 페이지**

```jsx
// AttendanceManagement.jsx
function AttendanceManagement({ lectureIdx }) {
  const [attendanceData, setAttendanceData] = useState([]);
  const [selectedDate, setSelectedDate] = useState(new Date());

  const handleAttendanceAction = async (attendanceIdx, action) => {
    try {
      await api.put(`/professor/attendance/${attendanceIdx}/${action}`);
      showSuccessToast('출석 처리가 완료되었습니다.');
      fetchAttendanceData();
    } catch (error) {
      showErrorToast('출석 처리에 실패했습니다.');
    }
  };

  return (
    <div className="attendance-management">
      <div className="date-selector">
        <DatePicker
          selected={selectedDate}
          onChange={setSelectedDate}
          dateFormat="yyyy-MM-dd"
        />
      </div>

      <TableContainer component={Paper}>
        <Table>
          <TableHead>
            <TableRow>
              <TableCell>학생명</TableCell>
              <TableCell>학번</TableCell>
              <TableCell>요청시간</TableCell>
              <TableCell>상태</TableCell>
              <TableCell>액션</TableCell>
            </TableRow>
          </TableHead>
          <TableBody>
            {attendanceData.map(row => (
              <TableRow key={row.attendanceIdx}>
                <TableCell>{row.studentName}</TableCell>
                <TableCell>{row.studentNo}</TableCell>
                <TableCell>{formatDateTime(row.requestedAt)}</TableCell>
                <TableCell>
                  <Chip
                    label={getStatusLabel(row.status)}
                    color={getStatusColor(row.status)}
                  />
                </TableCell>
                <TableCell>
                  <ButtonGroup>
                    <Button
                      size="small"
                      onClick={() => handleAttendanceAction(row.attendanceIdx, 'approve')}
                    >
                      승인
                    </Button>
                    <Button
                      size="small"
                      color="secondary"
                      onClick={() => handleAttendanceAction(row.attendanceIdx, 'reject')}
                    >
                      거부
                    </Button>
                  </ButtonGroup>
                </TableCell>
              </TableRow>
            ))}
          </TableBody>
        </Table>
      </TableContainer>
    </div>
  );
}
```

### **3.3 성적 관리 페이지**

```jsx
// GradeManagement.jsx
function GradeManagement({ lectureIdx }) {
  const [students, setStudents] = useState([]);
  const [editingGrades, setEditingGrades] = useState({});

  const handleGradeChange = (enrollmentIdx, field, value) => {
    setEditingGrades(prev => ({
      ...prev,
      [enrollmentIdx]: {
        ...prev[enrollmentIdx],
        [field]: value
      }
    }));
  };

  const handleSaveGrades = async () => {
    try {
      const gradeData = Object.entries(editingGrades).map(([enrollmentIdx, grades]) => ({
        enrollmentIdx: parseInt(enrollmentIdx),
        ...grades
      }));

      await api.put('/professor/grades', { grades: gradeData });
      showSuccessToast('성적이 저장되었습니다.');
      fetchStudents();
    } catch (error) {
      showErrorToast('성적 저장에 실패했습니다.');
    }
  };

  return (
    <div className="grade-management">
      <div className="actions">
        <Button variant="contained" onClick={handleSaveGrades}>
          성적 저장
        </Button>
        <Button variant="outlined" onClick={handleFinalizeGrades}>
          성적 확정
        </Button>
      </div>

      <TableContainer component={Paper}>
        <Table>
          <TableHead>
            <TableRow>
              <TableCell>학생명</TableCell>
              <TableCell>학번</TableCell>
              <TableCell>중간고사</TableCell>
              <TableCell>기말고사</TableCell>
              <TableCell>과제</TableCell>
              <TableCell>참여도</TableCell>
              <TableCell>총점</TableCell>
              <TableCell>학점</TableCell>
            </TableRow>
          </TableHead>
          <TableBody>
            {students.map(student => (
              <TableRow key={student.enrollmentIdx}>
                <TableCell>{student.studentName}</TableCell>
                <TableCell>{student.studentNo}</TableCell>
                <GradeInputCell
                  value={editingGrades[student.enrollmentIdx]?.midtermScore ?? student.midtermScore}
                  onChange={(value) => handleGradeChange(student.enrollmentIdx, 'midtermScore', value)}
                />
                {/* 다른 점수 입력 셀들... */}
              </TableRow>
            ))}
          </TableBody>
        </Table>
      </TableContainer>
    </div>
  );
}
```

---

## 4. 학생 인터페이스

### **4.1 수강신청 페이지**

```jsx
// CourseEnrollment.jsx
function CourseEnrollment() {
  const [availableLectures, setAvailableLectures] = useState([]);
  const [selectedLectures, setSelectedLectures] = useState([]);
  const [enrollmentResults, setEnrollmentResults] = useState(null);

  const handleEnroll = async () => {
    if (selectedLectures.length === 0) return;

    try {
      const response = await api.post('/student/enrollments/batch', {
        lectureIdxs: selectedLectures
      });

      setEnrollmentResults(response.data);
      showSuccessToast(`수강신청이 완료되었습니다. (${response.data.successCount}개 성공)`);

      // 결과에 따라 선택 초기화
      setSelectedLectures([]);
      fetchAvailableLectures();
    } catch (error) {
      showErrorToast('수강신청에 실패했습니다.');
    }
  };

  return (
    <div className="course-enrollment">
      <Typography variant="h4" gutterBottom>
        수강신청
      </Typography>

      <div className="filters">
        <FormControl>
          <InputLabel>학년</InputLabel>
          <Select value={filters.grade} onChange={handleFilterChange}>
            <MenuItem value="">전체</MenuItem>
            <MenuItem value="1">1학년</MenuItem>
            <MenuItem value="2">2학년</MenuItem>
            <MenuItem value="3">3학년</MenuItem>
            <MenuItem value="4">4학년</MenuItem>
          </Select>
        </FormControl>
        {/* 다른 필터들... */}
      </div>

      <div className="lecture-grid">
        {availableLectures.map(lecture => (
          <LectureCard
            key={lecture.lectureIdx}
            lecture={lecture}
            selected={selectedLectures.includes(lecture.lectureIdx)}
            onSelect={() => handleLectureSelect(lecture.lectureIdx)}
          />
        ))}
      </div>

      {selectedLectures.length > 0 && (
        <div className="enrollment-actions">
          <Typography>
            {selectedLectures.length}개의 강의를 선택했습니다.
          </Typography>
          <Button variant="contained" onClick={handleEnroll}>
            수강신청
          </Button>
        </div>
      )}

      {enrollmentResults && (
        <EnrollmentResultsDialog
          results={enrollmentResults}
          onClose={() => setEnrollmentResults(null)}
        />
      )}
    </div>
  );
}
```

### **4.2 내 강의 페이지**

```jsx
// MyCourses.jsx
function MyCourses() {
  const [enrollments, setEnrollments] = useState([]);
  const [selectedTab, setSelectedTab] = useState(0);

  const tabs = [
    { label: '진행중', filter: (e) => e.status === 1 },
    { label: '완료', filter: (e) => e.status === 2 },
    { label: '취소', filter: (e) => e.status === 0 }
  ];

  const filteredEnrollments = enrollments.filter(tabs[selectedTab].filter);

  return (
    <div className="my-courses">
      <Typography variant="h4" gutterBottom>
        내 강의
      </Typography>

      <Tabs value={selectedTab} onChange={(e, newValue) => setSelectedTab(newValue)}>
        {tabs.map((tab, index) => (
          <Tab key={index} label={`${tab.label} (${enrollments.filter(tab.filter).length})`} />
        ))}
      </Tabs>

      <div className="course-list">
        {filteredEnrollments.map(enrollment => (
          <CourseCard
            key={enrollment.enrollmentIdx}
            enrollment={enrollment}
            onClick={() => navigate(`/student/courses/${enrollment.lectureIdx}`)}
          />
        ))}
      </div>
    </div>
  );
}
```

### **4.3 강의 상세 페이지**

```jsx
// CourseDetail.jsx
function CourseDetail({ lectureIdx }) {
  const [lecture, setLecture] = useState(null);
  const [notices, setNotices] = useState([]);
  const [assignments, setAssignments] = useState([]);
  const [attendance, setAttendance] = useState(null);
  const [activeTab, setActiveTab] = useState(0);

  const tabs = [
    { label: '공지사항', component: NoticeTab },
    { label: '과제', component: AssignmentTab },
    { label: '출결', component: AttendanceTab },
    { label: '평가', component: EvaluationTab }
  ];

  const ActiveTabComponent = tabs[activeTab].component;

  return (
    <div className="course-detail">
      {lecture && (
        <div className="course-header">
          <Typography variant="h4">{lecture.lecTit}</Typography>
          <Typography variant="subtitle1">
            {lecture.lecProfName || lecture.lecProf}
          </Typography>
          <Typography variant="body2">{lecture.lecTime}</Typography>
        </div>
      )}

      <Tabs value={activeTab} onChange={(e, newValue) => setActiveTab(newValue)}>
        {tabs.map((tab, index) => (
          <Tab key={index} label={tab.label} />
        ))}
      </Tabs>

      <div className="tab-content">
        <ActiveTabComponent
          lectureIdx={lectureIdx}
          data={{ notices, assignments, attendance }}
        />
      </div>
    </div>
  );
}
```

---

## 5. 공통 컴포넌트

### **5.1 LectureCard 컴포넌트**

```jsx
// components/LectureCard.jsx
function LectureCard({ lecture, selected, onSelect, showEnrollment = false }) {
  const getStatusColor = (status) => {
    switch (status) {
      case 'AVAILABLE': return 'success';
      case 'FULL': return 'error';
      case 'CLOSED': return 'default';
      default: return 'default';
    }
  };

  return (
    <Card className={`lecture-card ${selected ? 'selected' : ''}`}>
      <CardContent>
        <Typography variant="h6" gutterBottom>
          {lecture.lecTit}
        </Typography>

        <Typography variant="body2" color="textSecondary">
          {lecture.lecProfName || lecture.lecProf} | {lecture.lecPoint}학점
        </Typography>

        <Typography variant="body2">
          {lecture.lecTime}
        </Typography>

        {showEnrollment && (
          <div className="enrollment-info">
            <Typography variant="body2">
              수강인원: {lecture.lecCurrent}/{lecture.lecMany}
            </Typography>
            <LinearProgress
              variant="determinate"
              value={(lecture.lecCurrent / lecture.lecMany) * 100}
            />
          </div>
        )}

        <div className="card-actions">
          {onSelect && (
            <Button
              variant={selected ? "contained" : "outlined"}
              onClick={onSelect}
              size="small"
            >
              {selected ? '선택됨' : '선택'}
            </Button>
          )}
        </div>
      </CardContent>
    </Card>
  );
}
```

### **5.2 DataTable 컴포넌트**

```jsx
// components/DataTable.jsx
function DataTable({ columns, data, onEdit, onDelete, loading = false }) {
  const [page, setPage] = useState(0);
  const [rowsPerPage, setRowsPerPage] = useState(10);

  return (
    <TableContainer component={Paper}>
      <Table>
        <TableHead>
          <TableRow>
            {columns.map(column => (
              <TableCell key={column.key}>{column.label}</TableCell>
            ))}
            <TableCell>액션</TableCell>
          </TableRow>
        </TableHead>
        <TableBody>
          {loading ? (
            <TableRow>
              <TableCell colSpan={columns.length + 1} align="center">
                <CircularProgress />
              </TableCell>
            </TableRow>
          ) : (
            data.slice(page * rowsPerPage, (page + 1) * rowsPerPage).map(row => (
              <TableRow key={row.id}>
                {columns.map(column => (
                  <TableCell key={column.key}>
                    {column.render ? column.render(row[column.key], row) : row[column.key]}
                  </TableCell>
                ))}
                <TableCell>
                  <IconButton onClick={() => onEdit(row)}>
                    <EditIcon />
                  </IconButton>
                  <IconButton onClick={() => onDelete(row)}>
                    <DeleteIcon />
                  </IconButton>
                </TableCell>
              </TableRow>
            ))
          )}
        </TableBody>
      </Table>

      <TablePagination
        component="div"
        count={data.length}
        page={page}
        onPageChange={(e, newPage) => setPage(newPage)}
        rowsPerPage={rowsPerPage}
        onRowsPerPageChange={(e) => {
          setRowsPerPage(parseInt(e.target.value, 10));
          setPage(0);
        }}
      />
    </TableContainer>
  );
}
```

---

## 6. API 연동 가이드

### ⚠️ **중요: API 응답 구조 변경 사항 (2025-10-14)**

#### **수강신청 API 응답 구조 업데이트**

**변경된 필드:**
- `lecProf`: 교수 코드 (USER_CODE) - 예: "PROF001", "11"
- `lecProfName`: 교수 이름 (USER_NAME) - **신규 추가** ⭐

**영향받는 API:**
- `GET /api/enrollments` - 수강신청 목록 조회
- 모든 수강 관련 API 응답

**기존 코드:**
```javascript
// ❌ 기존 방식 (더 이상 작동 안함)
<Typography>{enrollment.lecProf}</Typography>  // "김교수" 표시됨
```

**변경된 코드:**
```javascript
// ✅ 새로운 방식
<Typography>
  {enrollment.lecProfName || enrollment.lecProf}
</Typography>  // "김교수" 표시됨

// 교수 코드가 필요한 경우
console.log(enrollment.lecProf);  // "PROF001" 또는 "11"
```

**API 응답 예시:**
```json
{
  "content": [{
    "enrollmentIdx": 1,
    "lecTit": "자바 프로그래밍",
    "lecProf": "PROF001",      // 교수 코드
    "lecProfName": "김교수",   // 교수 이름 (신규)
    "studentName": "홍길동",
    ...
  }]
}
```

**권장 사항:**
1. 화면 표시에는 `lecProfName` 사용
2. 필터링/검색에는 `lecProf` (코드) 사용 가능
3. Fallback 처리: `lecProfName || lecProf`

---

### **6.1 API 클라이언트 설정**

```javascript
// api/client.js
import axios from 'axios';

const apiClient = axios.create({
  baseURL: process.env.REACT_APP_API_BASE_URL,
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json'
  }
});

// 요청 인터셉터 - JWT 토큰 추가
apiClient.interceptors.request.use(
  config => {
    const token = localStorage.getItem('accessToken');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  error => Promise.reject(error)
);

// 응답 인터셉터 - 에러 처리
apiClient.interceptors.response.use(
  response => response,
  error => {
    if (error.response?.status === 401) {
      // 토큰 만료 시 로그인 페이지로 리다이렉트
      localStorage.removeItem('accessToken');
      window.location.href = '/login';
    }
    return Promise.reject(error);
  }
);

export default apiClient;
```

### **6.2 커스텀 훅 예시**

```javascript
// hooks/useLectures.js
import { useState, useEffect } from 'react';
import api from '../api/client';

export function useLectures(year, semester) {
  const [lectures, setLectures] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  const fetchLectures = async () => {
    try {
      setLoading(true);
      const response = await api.get('/student/lectures/available', {
        params: { year, semester }
      });
      setLectures(response.data.data);
      setError(null);
    } catch (err) {
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    if (year && semester) {
      fetchLectures();
    }
  }, [year, semester]);

  return { lectures, loading, error, refetch: fetchLectures };
}
```

### **6.3 에러 처리**

```javascript
// utils/errorHandler.js
export function handleApiError(error) {
  if (error.response) {
    // 서버 응답 에러
    const { status, data } = error.response;

    switch (status) {
      case 400:
        return '입력값이 올바르지 않습니다.';
      case 401:
        return '인증이 필요합니다.';
      case 403:
        return '권한이 없습니다.';
      case 404:
        return '요청한 데이터를 찾을 수 없습니다.';
      case 409:
        return data.message || '충돌이 발생했습니다.';
      case 500:
        return '서버 오류가 발생했습니다.';
      default:
        return data.message || '알 수 없는 오류가 발생했습니다.';
    }
  } else if (error.request) {
    // 네트워크 에러
    return '네트워크 연결을 확인해주세요.';
  } else {
    // 기타 에러
    return '예상치 못한 오류가 발생했습니다.';
  }
}
```

---

## 7. 반응형 디자인

### **7.1 모바일 최적화**

```css
/* Mobile-first approach */
.lecture-card {
  width: 100%;
  margin-bottom: 16px;
}

@media (min-width: 600px) {
  .lecture-card {
    width: calc(50% - 8px);
    margin-right: 8px;
  }
}

@media (min-width: 960px) {
  .lecture-card {
    width: calc(33.333% - 11px);
  }
}

@media (min-width: 1280px) {
  .lecture-card {
    width: calc(25% - 12px);
  }
}
```

### **7.2 터치 인터페이스**

```jsx
// Touch-friendly buttons
<Button
  variant="contained"
  size="large"
  style={{
    minHeight: 48,  // 터치 타겟 최소 크기
    fontSize: 16
  }}
  onClick={handleAction}
>
  액션 실행
</Button>
```

---

## 🎯 구현 완료

프론트엔드 설계 및 연동 가이드를 완료했습니다. 이제 모든 플로우 문서가 완성되어 강의 관리 시스템의 전체적인 개발 가이드를 제공합니다.