# 06. 학생 플로우

> **작성일**: 2025-10-10  
> **최종 수정**: 2025-10-16  
> **버전**: 4.0 (POST 방식 통일)  
> **변경사항**: 
> - 모든 필드명을 대문자 + 언더스코어 규칙으로 통일
> - EnrollmentController DTO 패턴 적용 반영
> - HTTP 400 에러 해결 완료 (PageImpl 적용)
> - 교수 이름 조회 기능 추가 (lecProf + lecProfName)
> - **모든 API 엔드포인트를 POST 방식으로 변경** 

---

##  학생 기능 플로우

학생의 강의 관리 시스템 사용 시나리오를 단계별로 정의합니다.

---

##  목차

1. [수강신청 플로우](#1-수강신청-플로우)
2. [학기 중 활동 플로우](#2-학기-중-활동-플로우)
3. [출결 관리 플로우](#3-출결-관리-플로우)
4. [과제 관리 플로우](#4-과제-관리-플로우)
5. [강의 평가 플로우](#5-강의-평가-플로우)

---

## 1. 수강신청 플로우

### **1.1 수강 가능 강의 조회**

```mermaid
sequenceDiagram
    participant Student as 학생
    participant UI as 학생 UI
    participant API as 강의 API
    participant DB as 데이터베이스

    Student->>UI: 수강신청 메뉴 선택
    UI->>API: POST /lectures/eligible (Body: {studentIdx, year, semester})
    API->>DB: 수강 가능 강의 조회
    Note over DB: 선수과목 체크,<br/>수강 인원 체크,<br/>시간표 중복 체크
    DB-->>API: 수강 가능 강의 목록
    API-->>UI: 강의 목록 표시
    UI-->>Student: 강의 목록 확인
```

### **1.2 수강신청**

```mermaid
sequenceDiagram
    participant Student as 학생
    participant UI as 학생 UI
    participant API as 수강 API
    participant DB as 데이터베이스

    Student->>UI: 강의 선택
    UI->>API: POST /enrollments/enroll (Body: {lecIdx, studentIdx})
    API->>API: 수강 가능 여부 재확인
    API->>DB: 수강신청 정보 저장
    DB-->>API: 수강신청 완료
    API-->>UI: 신청 완료 응답
    UI-->>Student: 수강신청 완료 메시지
```

### **1.3 내 수강신청 목록 조회**

```mermaid
sequenceDiagram
    participant Student as 학생
    participant UI as 학생 UI
    participant API as 수강 API
    participant DB as 데이터베이스

    Student->>UI: 내 수강신청 확인
    UI->>API: POST /enrollments/list (Body: {studentIdx, page, size})
    API->>DB: 수강신청 목록 조회
    DB-->>API: 수강신청 데이터
    API-->>UI: 수강 목록 표시
    Note over UI: 강의명, 교수명,<br/>시간, 학점 등
```

---

## 2. 학기 중 활동 플로우

### **2.1 강의 공지사항 확인**  미구현

```mermaid
sequenceDiagram
    participant Student as 학생
    participant UI as 학생 UI
    participant API as 강의 API
    participant DB as 데이터베이스

    Student->>UI: 강의 선택
    UI->>API: POST /api/student/lectures/notices (Body: {lecIdx})
    Note over API:  미구현 API
    API->>DB: 공지사항 조회
    DB-->>API: 공지사항 목록
    API-->>UI: 공지사항 표시
```

---

## 3. 출결 관리 플로우

### **3.1 내 출석 현황 조회**  미구현

```mermaid
sequenceDiagram
    participant Student as 학생
    participant UI as 학생 UI
    participant API as 출석 API
    participant DB as 데이터베이스

    Student->>UI: 출결 관리 선택
    UI->>API: POST /api/student/enrollments/attendance (Body: {enrollmentIdx})
    Note over API:  미구현 API
    API->>DB: 출석 데이터 조회
    DB-->>API: 출석 현황
    API-->>UI: 출석률 및 상세 표시
    Note over UI: 출석률: 75/80<br/>상세: 출석/지각/결석
```

### **3.2 출석 인정 요청**

```mermaid
sequenceDiagram
    participant Student as 학생
    participant UI as 학생 UI
    participant API as 출석 API
    participant DB as 데이터베이스
    participant Professor as 교수 시스템

    Student->>UI: 출석 메뉴 선택
    UI->>UI: 출석 인정 요청 폼 표시

    Student->>UI: 출석 인정 요청
    UI->>API: POST /api/student/attendance/request
    API->>API: 요청 유효성 검증
    Note over API: 수강 여부 확인, 중복 요청 방지

    API->>DB: 출석 인정 요청 저장
    DB-->>API: 저장 완료

    API->>Professor: 출석 인정 요청 알림
    Professor-->>API: 알림 확인

    API-->>UI: 출석 인정 요청 완료
    UI-->>Student: 요청 완료 메시지
```

---

## 4. 과제 관리 플로우

### **4.1 과제 목록 조회**

```mermaid
sequenceDiagram
    participant Student as 학생
    participant UI as 학생 UI
    participant API as 과제 API
    participant DB as 데이터베이스

    Student->>UI: 과제 메뉴 선택
    UI->>API: POST /api/assignments/list (Body: {lecIdx, page, size})
    API->>DB: 과제 목록 조회
    Note over DB: 마감일, 제출 여부, 점수 등
    DB-->>API: 과제 목록
    API-->>UI: 과제 목록 표시
    UI-->>Student: 과제 목록 확인
```

### **4.2 과제 제출 (오프라인 제출)**  미구현

>  **중요**: 이 시스템은 **과제 파일 업로드를 지원하지 않습니다**. 학생들은 대면, 이메일, 또는 다른 플랫폼을 통해 과제를 제출하며, 시스템에서는 **제출 완료 여부만 기록**합니다.

```mermaid
sequenceDiagram
    participant Student as 학생
    participant UI as 학생 UI
    participant API as 과제 API
    participant DB as 데이터베이스

    Note over Student: 1 오프라인 제출<br/>(대면/이메일/외부 플랫폼)

    Student->>UI: 과제 제출 완료 체크 버튼 클릭
    UI->>UI: 제출 확인 대화상자 표시

    Student->>UI: "제출 완료" 확인
    UI->>API: POST /api/student/assignments/{id}/mark-submitted
    API->>API: 제출 유효성 검증
    Note over API: 마감일 확인, 중복 제출 방지

    API->>DB: submissions 필드 업데이트
    Note over DB: JSON: {studentIdx, submitted: true,<br/>submittedAt: "2025-10-15T14:30:00"}

    DB-->>API: 저장 완료

    API-->>UI: 제출 완료 응답
    UI-->>Student: 과제 제출 완료 메시지
    Note over Student: 과제는 실제로<br/>별도의 방법으로 제출됨
```

**제출 프로세스:**
1. 학생은 **오프라인으로 과제를 제출** (대면, 이메일, 외부 플랫폼 등)
2. 시스템에서 **"제출 완료" 버튼**을 클릭하여 제출 상태를 기록
3. DB의 `submissions` 필드에 `{submitted: true, submittedAt: "..."}` 저장
4. 교수는 나중에 **제출 목록을 확인**하여 채점 (예: "대면 제출(2025-10-15)")

### **4.3 과제 제출 내역 확인**  미구현

```mermaid
sequenceDiagram
    participant Student as 학생
    participant UI as 학생 UI
    participant API as 과제 API
    participant DB as 데이터베이스

    Student->>UI: 제출 내역 선택
    UI->>API: POST /api/student/submissions/detail (Body: {submissionIdx})
    Note over API:  미구현 API
    API->>DB: 제출 정보 조회
    Note over DB: 점수, 피드백, 제출일
    DB-->>API: 제출 내역
    API-->>UI: 제출 정보 표시
    UI-->>Student: 과제 내역 확인
```

---

## 5. 강의 평가 플로우

### **5.1 평가 가능 강의 조회**  미구현

```mermaid
sequenceDiagram
    participant Student as 학생
    participant UI as 학생 UI
    participant API as 평가 API
    participant DB as 데이터베이스

    Student->>UI: 강의 평가 메뉴 선택
    UI->>API: POST /api/student/evaluations/available (Body: {studentIdx})
    Note over API:  미구현 API
    API->>DB: 평가 가능 강의 조회
    Note over DB: 수강 중인 강의 중<br/>평가 기간인 강의
    DB-->>API: 평가 대상 강의 목록
    API-->>UI: 평가 대상 목록 표시
```

### **5.2 강의 평가 제출**  미구현

```mermaid
sequenceDiagram
    participant Student as 학생
    participant UI as 학생 UI
    participant API as 평가 API
    participant DB as 데이터베이스

    Student->>UI: 강의 선택
    UI->>API: POST /api/student/lectures/evaluation-form (Body: {lecIdx})
    Note over API:  미구현 API
    API->>DB: 평가 양식 조회
    DB-->>API: 평가 항목
    API-->>UI: 평가 폼 표시

    Student->>UI: 평가 입력 및 제출
    UI->>API: POST /api/student/evaluations/submit
    API->>DB: 평가 결과 저장
    DB-->>API: 저장 완료
    API-->>UI: 평가 제출 완료
    UI-->>Student: 평가 완료 메시지
```

---

##  학생 주요 업무 프로세스

### **수강신청 기간**
1. **수강 가능 강의 조회**: 선수과목, 인원, 시간 체크
2. **수강신청 진행**: 희망 강의 선택 및 신청
3. **수강신청 확인**: 신청 내역 확인 및 수정

### **학기 중**
1. **강의 수강**: 공지사항 확인, 출석 체크
2. **과제 관리**: 과제 목록 확인, 제출
3. **출결 관리**: 출석 현황 확인, 인정 요청
4. **채팅 활용**: 교수 및 학생 간 채팅 참여

### **학기 말**
1. **과제 마무리**: 미제출 과제 확인
2. **성적 확인**: 중간/기말 성적 조회
3. **강의 평가**: 수강 강의 평가 제출

---

##  다음 단계

학생 플로우에 이어서 [구현 순서](./07-구현순서.md) 및 [프론트엔드 연동](./08-프론트엔드연동.md)을 참고하여 전체 시스템을 구축합니다.