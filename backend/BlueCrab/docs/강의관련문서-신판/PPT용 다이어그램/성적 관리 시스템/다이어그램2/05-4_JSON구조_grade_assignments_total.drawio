<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36" version="28.2.8">
  <diagram name="JSON 구조 3" id="json-3">
    <mxGraphModel dx="2976" dy="576" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1080" background="light-dark(#FFFFFF,#FFFFFF)" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="tWvwcFYGd9WIKAyibdku-1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#a20025;fontColor=#ffffff;strokeColor=#6F0000;arcSize=8;" parent="1" vertex="1">
          <mxGeometry x="-800" y="240" width="870" height="670" as="geometry" />
        </mxCell>
        <mxCell id="oX8oHtiBm11ukVJFDabx-3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fa6800;strokeColor=#C73500;fontColor=#000000;arcSize=9;" parent="1" vertex="1">
          <mxGeometry x="-150" y="1041" width="600" height="360" as="geometry" />
        </mxCell>
        <mxCell id="oX8oHtiBm11ukVJFDabx-2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#008a00;strokeColor=#005700;fontColor=#ffffff;arcSize=10;" parent="1" vertex="1">
          <mxGeometry x="-800" y="1069" width="600" height="242" as="geometry" />
        </mxCell>
        <mxCell id="title" value="ENROLLMENT_DATA JSON 구조 (3/3) - 성적 데이터: 과제 및 총점" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=36;fontStyle=1;fontColor=light-dark(#1A1A1A,#000000);" parent="1" vertex="1">
          <mxGeometry x="-1390" y="30" width="1550" height="70" as="geometry" />
        </mxCell>
        <mxCell id="json-box4-title" value="4️⃣ grade.assignments (과제별 점수)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;strokeWidth=4;fontSize=24;fontColor=#ffffff;fontStyle=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="-1780" y="150" width="890" height="70" as="geometry" />
        </mxCell>
        <mxCell id="json-box4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;strokeColor=#001DBC;strokeWidth=4;align=left;verticalAlign=top;fontColor=#ffffff;arcSize=4;" parent="1" vertex="1">
          <mxGeometry x="-1780" y="240" width="890" height="950" as="geometry" />
        </mxCell>
        <mxCell id="json-content4" value="&lt;font face=&quot;Courier New&quot; style=&quot;font-size: 24px;&quot;&gt;&lt;font style=&quot;color: light-dark(rgb(0, 0, 0), rgb(0, 0, 0));&quot;&gt;[&lt;br&gt;  {&lt;br&gt;    &quot;assignmentIdx&quot;: 15,&lt;br&gt;    // ASSIGNMENT_EXTENDED_TBL의 ASSIGNMENT_IDX&lt;br&gt;&lt;br&gt;    &quot;title&quot;: &quot;중간과제&quot;,&lt;br&gt;    // 과제명&lt;/font&gt;&lt;br&gt;&lt;br&gt;    &lt;font style=&quot;color: light-dark(rgb(0, 0, 0), rgb(255, 0, 0));&quot;&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;&quot;score&quot;: 45&lt;/span&gt;,&lt;br&gt;    &lt;span style=&quot;font-weight: bold;&quot;&gt;// 채점 완료된 점수 ✅&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;font style=&quot;&quot;&gt;&lt;br&gt;&lt;font style=&quot;color: light-dark(rgb(0, 0, 0), rgb(0, 0, 0));&quot;&gt;    &quot;maxScore&quot;: 50,&lt;br&gt;    // 과제 만점&lt;br&gt;&lt;br&gt;    &quot;gradedAt&quot;: &quot;2025-02-16 10:00:00&quot;,&lt;br&gt;    // 채점 날짜 및 시간&lt;br&gt;&lt;br&gt;    &quot;feedback&quot;: &quot;잘했습니다.&quot;&lt;br&gt;    // 교수 피드백&lt;br&gt;  },&lt;br&gt;  {&lt;br&gt;    &quot;assignmentIdx&quot;: 16,&lt;br&gt;    &quot;title&quot;: &quot;기말과제&quot;,&lt;/font&gt;&lt;/font&gt;&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color: rgb(255, 152, 0); font-weight: bold;&quot;&gt;&quot;score&quot;: null&lt;/span&gt;,&lt;br&gt;    &lt;span style=&quot;color: rgb(255, 152, 0); font-weight: bold;&quot;&gt;// 미채점 (총점 계산 시 0으로 처리) ⚠️&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;font style=&quot;color: light-dark(rgb(0, 0, 0), rgb(0, 0, 0));&quot;&gt;    &quot;maxScore&quot;: 107&lt;br&gt;  }&lt;br&gt;]&lt;/font&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=22;fontColor=#212121;" parent="1" vertex="1">
          <mxGeometry x="-1650" y="260" width="590" height="890" as="geometry" />
        </mxCell>
        <mxCell id="json-box5-title" value="5️⃣ grade.total (총점 및 최종 등급)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d80073;strokeColor=#A50040;strokeWidth=4;fontSize=24;fontColor=#ffffff;fontStyle=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="-800" y="150" width="890" height="70" as="geometry" />
        </mxCell>
        <mxCell id="json-content5" value="&lt;font face=&quot;Courier New&quot; style=&quot;font-size: 22px;&quot;&gt;&lt;font style=&quot;color: light-dark(rgb(0, 0, 0), rgb(0, 0, 0));&quot;&gt;{&lt;/font&gt;&lt;br&gt;  &lt;font style=&quot;color: light-dark(rgb(0, 0, 0), rgb(0, 139, 0));&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;&quot;currentScore&quot;: 120.5&lt;/span&gt;&lt;font style=&quot;&quot;&gt;,&lt;/font&gt;&lt;br&gt;  &lt;span style=&quot;font-weight: bold;&quot;&gt;// 현재 총점 (자동 계산) ✅&lt;/span&gt;&lt;br&gt;  &lt;span style=&quot;font-weight: bold;&quot;&gt;// 공식: attendanceScore.currentScore + Σ assignments[i].score&lt;/span&gt;&lt;br&gt;  &lt;span style=&quot;font-weight: bold;&quot;&gt;// 계산: 75.5 + 45 + 0 = 120.5&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;br&gt;  &lt;font style=&quot;&quot;&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;&quot;percentage&quot;: 43.5&lt;/span&gt;,&lt;br&gt;  &lt;span style=&quot;font-weight: bold;&quot;&gt;// 백분율 (자동 계산) ✅&lt;/span&gt;&lt;br&gt;  &lt;span style=&quot;font-weight: bold;&quot;&gt;// 공식: (currentScore ÷ maxScore) × 100&lt;/span&gt;&lt;br&gt;  &lt;span style=&quot;font-weight: bold;&quot;&gt;// 계산: (120.5 ÷ 277) × 100 = 43.5%&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;br&gt;&lt;font style=&quot;&quot;&gt;&lt;br&gt;&lt;font style=&quot;color: light-dark(rgb(0, 0, 0), rgb(0, 0, 0));&quot;&gt;  &quot;maxScore&quot;: 277.0,&lt;br&gt;  // 전체 만점 (gradeConfig.totalMaxScore와 동일)&lt;/font&gt;&lt;/font&gt;&lt;font style=&quot;color: light-dark(rgb(0, 0, 0), rgb(0, 0, 0));&quot;&gt;&lt;br&gt;&lt;br&gt;  &lt;span style=&quot;font-weight: bold;&quot;&gt;&quot;letterGrade&quot;: null&lt;/span&gt;,&lt;br&gt;  &lt;span style=&quot;font-weight: bold;&quot;&gt;// 최종 등급 (미배정) - 교수가 학기말에 수동 배정&lt;/span&gt;&lt;br&gt;&lt;br&gt;  &quot;finalized&quot;: false&lt;br&gt;  // 성적 확정 여부&lt;br&gt;}&lt;/font&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=22;fontColor=#212121;" parent="1" vertex="1">
          <mxGeometry x="-750" y="278" width="780" height="592" as="geometry" />
        </mxCell>
        <mxCell id="explanation-box" value="💡 성적 계산 흐름 요약" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;strokeWidth=4;fontSize=24;fontColor=#ffffff;fontStyle=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="-791" y="961" width="590" height="70" as="geometry" />
        </mxCell>
        <mxCell id="explanation-content" value="&lt;font style=&quot;font-size: 20px; color: light-dark(rgb(0, 0, 0), rgb(0, 0, 0)); font-weight: normal;&quot;&gt;출석 승인 / 과제 채점 &amp;nbsp;→&amp;nbsp; 🔔 GradeUpdateEvent 발행&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;color: light-dark(rgb(0, 0, 0), rgb(0, 0, 0)); font-weight: normal;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;→&amp;nbsp;&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;1️⃣ &lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;출석점수 계산&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt; (attendanceScore.currentScore)&lt;/span&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px; color: light-dark(rgb(0, 0, 0), rgb(0, 0, 0)); font-weight: normal;&quot;&gt;→&amp;nbsp; 2️⃣ 과제점수 합산 (Σ assignments[i].score)&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px; color: light-dark(rgb(0, 0, 0), rgb(0, 0, 0)); font-weight: normal;&quot;&gt;→&amp;nbsp; 3️⃣ 총점 계산 (total.currentScore)&lt;br&gt;→&amp;nbsp; 4️⃣ 백분율 계산 (total.percentage)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px; color: light-dark(rgb(0, 0, 0), rgb(0, 0, 0)); font-weight: normal;&quot;&gt;→&amp;nbsp; 5️⃣ ENROLLMENT_DATA 업데이트&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px; color: light-dark(rgb(0, 0, 0), rgb(0, 0, 0)); font-weight: normal;&quot;&gt;→&amp;nbsp; ✅ DB 저장 완료&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=20;fontColor=light-dark(#F57F17,#CCCC00);strokeWidth=2;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="-771" y="1081" width="520" height="230" as="geometry" />
        </mxCell>
        <mxCell id="note-box" value="📌 중요 참고 사항" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0a30a;strokeColor=#BD7000;strokeWidth=4;fontSize=24;fontColor=#000000;fontStyle=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="-150" y="961" width="599" height="70" as="geometry" />
        </mxCell>
        <mxCell id="note-content" value="• 과제 생성 시 모든 수강생의 &lt;b&gt;grade.assignments[]&lt;/b&gt; 배열에 자동으로 추가됩니다. (score: null)&lt;br&gt;&lt;br&gt;• 교수가 채점하면 해당 학생의 &lt;b&gt;assignments[].score&lt;/b&gt;가 업데이트되고, GradeUpdateEvent가 발행됩니다.&lt;br&gt;&lt;br&gt;• &lt;b&gt;null 과제 점수는 0으로 처리&lt;/b&gt;되어 총점에 반영됩니다.&lt;br&gt;&lt;br&gt;• &lt;b&gt;letterGrade&lt;/b&gt;는 교수가 학기말에 상대평가 등급 배정 API를 통해 설정합니다.&lt;br&gt;&lt;br&gt;• &lt;b&gt;finalized: true&lt;/b&gt;가 되면 성적이 확정되어 더 이상 수정할 수 없습니다." style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=20;fontColor=light-dark(#424242,#E7E7E7);strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="-129.5" y="1072" width="539" height="280" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
