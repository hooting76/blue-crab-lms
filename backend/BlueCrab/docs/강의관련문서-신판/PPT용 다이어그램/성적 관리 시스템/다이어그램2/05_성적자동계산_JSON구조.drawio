<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36" version="28.2.8">
  <diagram name="성적 자동 계산 로직 + JSON 구조" id="grade-calculation">
    <mxGraphModel dx="4297" dy="1295" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1080" background="light-dark(#FFFFFF,#FFFFFF)" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="성적 자동 계산 로직 + JSON 구조" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=32;fontStyle=1;fontColor=light-dark(#1A1A1A,#000000);" parent="1" vertex="1">
          <mxGeometry x="-1780" y="30" width="1040" height="60" as="geometry" />
        </mxCell>
        <mxCell id="left-title" value="⚙️ 자동 계산 로직 플로우" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#D32F2F;strokeWidth=3;fontSize=20;fontColor=#B71C1C;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="-1880" y="110" width="520" height="55" as="geometry" />
        </mxCell>
        <mxCell id="trigger" value="🔔 트리거: GradeUpdateEvent 발행" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#D32F2F;strokeWidth=3;fontSize=16;fontColor=#B71C1C;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="-1820" y="190" width="400" height="55" as="geometry" />
        </mxCell>
        <mxCell id="trigger-detail" value="• 출석 승인 시&#xa;• 과제 채점 시" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#D32F2F;" parent="1" vertex="1">
          <mxGeometry x="-1800" y="255" width="360" height="35" as="geometry" />
        </mxCell>
        <mxCell id="arrow1" value="" style="endArrow=block;html=1;strokeWidth=4;strokeColor=#D32F2F;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" edge="1" source="trigger">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-1620" y="290" as="sourcePoint" />
            <mxPoint x="-1620" y="325" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="step1" value="1️⃣ 출석 점수 계산" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=3;fontSize=16;fontColor=#0D47A1;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="-1820" y="325" width="400" height="50" as="geometry" />
        </mxCell>
        <mxCell id="arrow2" value="" style="endArrow=block;html=1;strokeWidth=4;strokeColor=#D32F2F;endFill=1;" parent="1" edge="1" source="step1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-1620" y="445" as="sourcePoint" />
            <mxPoint x="-1620" y="480" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="step2" value="2️⃣ 과제 점수 합산" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F57F17;strokeWidth=3;fontSize=16;fontColor=#F57F17;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="-1820" y="480" width="400" height="50" as="geometry" />
        </mxCell>
        <mxCell id="arrow3" value="" style="endArrow=block;html=1;strokeWidth=4;strokeColor=#D32F2F;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" edge="1" source="step2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-1620" y="595" as="sourcePoint" />
            <mxPoint x="-1620" y="630" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="step3" value="3️⃣ 총점 계산" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#388E3C;strokeWidth=3;fontSize=16;fontColor=#1B5E20;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="-1820" y="630" width="400" height="50" as="geometry" />
        </mxCell>
        <mxCell id="V3XxpSPtgU0mcTo4GyxJ-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="step3-formula" target="step4-formula">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow4" value="" style="endArrow=block;html=1;strokeWidth=4;strokeColor=#D32F2F;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" edge="1" source="step3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-1620" y="745" as="sourcePoint" />
            <mxPoint x="-1620" y="780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="step4" value="4️⃣ 백분율 계산" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;strokeWidth=3;fontSize=16;fontColor=#4A148C;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="-1820" y="780" width="400" height="50" as="geometry" />
        </mxCell>
        <mxCell id="arrow5" value="" style="endArrow=block;html=1;strokeWidth=4;strokeColor=#D32F2F;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" edge="1" source="step4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-1620" y="895" as="sourcePoint" />
            <mxPoint x="-1620" y="930" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="step5" value="5️⃣ ENROLLMENT_DATA 업데이트" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;strokeWidth=3;fontSize=16;fontColor=#E65100;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="-1820" y="930" width="400" height="50" as="geometry" />
        </mxCell>
        <mxCell id="V3XxpSPtgU0mcTo4GyxJ-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="step5-formula" target="complete">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow6" value="" style="endArrow=block;html=1;strokeWidth=4;strokeColor=#D32F2F;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" edge="1" source="step5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-1620" y="1045" as="sourcePoint" />
            <mxPoint x="-1620" y="1080" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="complete" value="✅ 완료: DB 저장" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#388E3C;strokeWidth=3;fontSize=16;fontColor=#1B5E20;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="-1820" y="1080" width="400" height="55" as="geometry" />
        </mxCell>
        <mxCell id="right-title" value="📦 ENROLLMENT_DATA JSON 구조" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;strokeWidth=3;fontSize=20;fontColor=#4A148C;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="-1320" y="110" width="1230" height="55" as="geometry" />
        </mxCell>
        <mxCell id="json-box1-title" value="1️⃣ gradeConfig (성적 구성 설정)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#388E3C;strokeWidth=2;fontSize=16;fontColor=#1B5E20;fontStyle=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-1320" y="190" width="595" height="40" as="geometry" />
        </mxCell>
        <mxCell id="json-box1" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#9E9E9E;strokeWidth=2;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="-1320" y="230" width="595" height="310" as="geometry" />
        </mxCell>
        <mxCell id="json-content1" value="&lt;font face=&quot;Courier New&quot; style=&quot;font-size: 15px;&quot;&gt;{&lt;br&gt;  &quot;attendanceMaxScore&quot;: 120,&lt;br&gt;  &lt;span style=&quot;color: #666;&quot;&gt;// 출석 만점&lt;/span&gt;&lt;br&gt;&lt;br&gt;  &quot;latePenaltyPerSession&quot;: 0.75,&lt;br&gt;  &lt;span style=&quot;color: #666;&quot;&gt;// 지각 1회당 감점&lt;/span&gt;&lt;br&gt;&lt;br&gt;  &lt;span style=&quot;color: #F57C00; font-weight: bold;&quot;&gt;&quot;assignmentTotalScore&quot;: 157&lt;/span&gt;,&lt;br&gt;  &lt;span style=&quot;color: #F57C00; font-weight: bold;&quot;&gt;// 과제 총점 (자동 계산)&lt;/span&gt;&lt;br&gt;&lt;br&gt;  &lt;span style=&quot;color: #F57C00; font-weight: bold;&quot;&gt;&quot;totalMaxScore&quot;: 277&lt;/span&gt;,&lt;br&gt;  &lt;span style=&quot;color: #F57C00; font-weight: bold;&quot;&gt;// 전체 만점 (자동 계산)&lt;/span&gt;&lt;br&gt;&lt;br&gt;  &quot;configuredAt&quot;: &quot;2025-10-29&quot;&lt;br&gt;}&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=15;fontColor=#212121;" parent="1" vertex="1">
          <mxGeometry x="-1300" y="250" width="555" height="215" as="geometry" />
        </mxCell>
        <mxCell id="json-box2-title" value="2️⃣ attendance (출석 데이터)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=2;fontSize=16;fontColor=#0D47A1;fontStyle=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-1320" y="560" width="595" height="40" as="geometry" />
        </mxCell>
        <mxCell id="json-box2" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#9E9E9E;strokeWidth=2;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="-1320" y="600" width="595" height="660" as="geometry" />
        </mxCell>
        <mxCell id="json-content2" value="&lt;font face=&quot;Courier New&quot; style=&quot;font-size: 15px;&quot;&gt;{&lt;br&gt;  &quot;summary&quot;: {&lt;br&gt;    &quot;presentCount&quot;: 50,&lt;br&gt;    &quot;lateCount&quot;: 5,&lt;br&gt;    &quot;absentCount&quot;: 2,&lt;br&gt;    &quot;totalSessions&quot;: 80,&lt;br&gt;    &quot;attendanceRate&quot;: 68.75,&lt;br&gt;    &quot;pendingCount&quot;: 0&lt;br&gt;  },&lt;br&gt;&lt;br&gt;  &quot;sessions&quot;: [&lt;br&gt;    {&lt;br&gt;      &quot;sessionNumber&quot;: 1,&lt;br&gt;      &quot;status&quot;: &quot;PRESENT&quot;,&lt;br&gt;      &quot;requestDate&quot;: &quot;2025-03-10&quot;,&lt;br&gt;      &quot;approvedAt&quot;: &quot;2025-03-10&quot;,&lt;br&gt;      &quot;approvedBy&quot;: 23&lt;br&gt;    },&lt;br&gt;    {&lt;br&gt;      &quot;sessionNumber&quot;: 2,&lt;br&gt;      &quot;status&quot;: &quot;LATE&quot;,&lt;br&gt;      &quot;requestDate&quot;: &quot;2025-03-12&quot;,&lt;br&gt;      &quot;approvedAt&quot;: &quot;2025-03-12&quot;,&lt;br&gt;      &quot;approvedBy&quot;: 23&lt;br&gt;    }&lt;br&gt;    &lt;span style=&quot;color: #666;&quot;&gt;// ... 더 많은 세션들&lt;/span&gt;&lt;br&gt;  ],&lt;br&gt;&lt;br&gt;  &quot;pendingRequests&quot;: []&lt;br&gt;}&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=15;fontColor=#212121;" parent="1" vertex="1">
          <mxGeometry x="-1300" y="620" width="555" height="560" as="geometry" />
        </mxCell>
        <mxCell id="json-box3-title" value="3️⃣ grade (성적 데이터)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F57F17;strokeWidth=2;fontSize=16;fontColor=#F57F17;fontStyle=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-695" y="190" width="605" height="40" as="geometry" />
        </mxCell>
        <mxCell id="json-box3" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#9E9E9E;strokeWidth=2;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="-695" y="230" width="605" height="380" as="geometry" />
        </mxCell>
        <mxCell id="json-content3" value="&lt;font face=&quot;Courier New&quot; style=&quot;font-size: 15px;&quot;&gt;{&lt;br&gt;  &quot;attendanceScore&quot;: {&lt;br&gt;    &lt;span style=&quot;color: #D32F2F; font-weight: bold;&quot;&gt;&quot;currentScore&quot;: 75.5&lt;/span&gt;,&lt;br&gt;    &lt;span style=&quot;color: #D32F2F; font-weight: bold;&quot;&gt;// 현재 출석 점수 (자동 계산)&lt;/span&gt;&lt;br&gt;&lt;br&gt;    &quot;latePenalty&quot;: -3.75,&lt;br&gt;    &lt;span style=&quot;color: #666;&quot;&gt;// 지각 감점 (5 × 0.75)&lt;/span&gt;&lt;br&gt;&lt;br&gt;    &quot;presentCount&quot;: 50,&lt;br&gt;    &quot;lateCount&quot;: 5,&lt;br&gt;    &quot;absentCount&quot;: 2,&lt;br&gt;    &quot;maxScore&quot;: 120.0&lt;br&gt;  },&lt;br&gt;&lt;br&gt;  &lt;span style=&quot;color: #666;&quot;&gt;// assignments는 다음 박스에 →&lt;/span&gt;&lt;br&gt;}&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=15;fontColor=#212121;" parent="1" vertex="1">
          <mxGeometry x="-675" y="250" width="565" height="345" as="geometry" />
        </mxCell>
        <mxCell id="json-box4-title" value="3️⃣-① grade.assignments (과제별 점수)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#D32F2F;strokeWidth=2;fontSize=16;fontColor=#B71C1C;fontStyle=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-695" y="640" width="605" height="40" as="geometry" />
        </mxCell>
        <mxCell id="json-box4" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#9E9E9E;strokeWidth=2;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="-695" y="680" width="605" height="405" as="geometry" />
        </mxCell>
        <mxCell id="json-content4" value="&lt;font face=&quot;Courier New&quot; style=&quot;font-size: 15px;&quot;&gt;[&lt;br&gt;  {&lt;br&gt;    &quot;assignmentIdx&quot;: 15,&lt;br&gt;    &quot;title&quot;: &quot;중간과제&quot;,&lt;br&gt;    &lt;span style=&quot;color: #388E3C; font-weight: bold;&quot;&gt;&quot;score&quot;: 45&lt;/span&gt;,&lt;br&gt;    &lt;span style=&quot;color: #388E3C; font-weight: bold;&quot;&gt;// 채점 완료 ✅&lt;/span&gt;&lt;br&gt;    &quot;maxScore&quot;: 50,&lt;br&gt;    &quot;gradedAt&quot;: &quot;2025-02-16&quot;,&lt;br&gt;    &quot;feedback&quot;: &quot;잘했습니다&quot;&lt;br&gt;  },&lt;br&gt;  {&lt;br&gt;    &quot;assignmentIdx&quot;: 16,&lt;br&gt;    &quot;title&quot;: &quot;기말과제&quot;,&lt;br&gt;    &lt;span style=&quot;color: #FF9800; font-weight: bold;&quot;&gt;&quot;score&quot;: null&lt;/span&gt;,&lt;br&gt;    &lt;span style=&quot;color: #FF9800; font-weight: bold;&quot;&gt;// 미채점 (0으로 처리)&lt;/span&gt;&lt;br&gt;    &quot;maxScore&quot;: 107&lt;br&gt;  }&lt;br&gt;]&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=15;fontColor=#212121;" parent="1" vertex="1">
          <mxGeometry x="-675" y="700" width="565" height="295" as="geometry" />
        </mxCell>
        <mxCell id="json-box5-title" value="3️⃣-② grade.total (총점)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;strokeWidth=2;fontSize=16;fontColor=#4A148C;fontStyle=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-695" y="1130" width="605" height="40" as="geometry" />
        </mxCell>
        <mxCell id="json-box5" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#9E9E9E;strokeWidth=2;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="-695" y="1170" width="605" height="280" as="geometry" />
        </mxCell>
        <mxCell id="json-content5" value="&lt;font face=&quot;Courier New&quot; style=&quot;font-size: 15px;&quot;&gt;{&lt;br&gt;  &lt;span style=&quot;color: #D32F2F; font-weight: bold;&quot;&gt;&quot;currentScore&quot;: 120.5&lt;/span&gt;,&lt;br&gt;  &lt;span style=&quot;color: #D32F2F; font-weight: bold;&quot;&gt;// 현재 총점 (자동 계산) ✅&lt;/span&gt;&lt;br&gt;&lt;br&gt;  &lt;span style=&quot;color: #D32F2F; font-weight: bold;&quot;&gt;&quot;percentage&quot;: 43.5&lt;/span&gt;,&lt;br&gt;  &lt;span style=&quot;color: #D32F2F; font-weight: bold;&quot;&gt;// 백분율 (자동 계산) ✅&lt;/span&gt;&lt;br&gt;&lt;br&gt;  &quot;maxScore&quot;: 277.0,&lt;br&gt;  &quot;letterGrade&quot;: null,&lt;br&gt;  &lt;span style=&quot;color: #666;&quot;&gt;// 최종 등급 (미배정)&lt;/span&gt;&lt;br&gt;  &quot;finalized&quot;: false&lt;br&gt;}&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=15;fontColor=#212121;" parent="1" vertex="1">
          <mxGeometry x="-675" y="1190" width="565" height="250" as="geometry" />
        </mxCell>
        <mxCell id="features-title" value="🎯 시스템 핵심 특징" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#388E3C;strokeWidth=3;fontSize=20;fontColor=#1B5E20;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="-1880" y="1510" width="1970" height="55" as="geometry" />
        </mxCell>
        <mxCell id="feature-box1" value="💡 이벤트 기반 자동 계산" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#D32F2F;strokeWidth=2;fontSize=15;fontColor=#B71C1C;fontStyle=1;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="-1880" y="1585" width="470" height="165" as="geometry" />
        </mxCell>
        <mxCell id="feature1" value="• GradeUpdateEvent 발행 시 트리거&lt;br&gt;• 출석/과제 변경 즉시 자동 반영&lt;br&gt;• 수동 계산 불필요 → 오류 방지&lt;br&gt;• 실시간 성적 조회 가능&lt;br&gt;• 이벤트 리스너 패턴" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#424242;" parent="1" vertex="1">
          <mxGeometry x="-1860" y="1625" width="430" height="110" as="geometry" />
        </mxCell>
        <mxCell id="feature-box2" value="💡 JSON 기반 확장 가능 구조" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;strokeWidth=2;fontSize=15;fontColor=#4A148C;fontStyle=1;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="-1380" y="1585" width="470" height="165" as="geometry" />
        </mxCell>
        <mxCell id="feature2" value="• LONGTEXT JSON 컬럼 활용&lt;br&gt;• 스키마 변경 없이 필드 추가&lt;br&gt;• 복잡한 중첩 데이터 저장&lt;br&gt;• 배열로 이력 관리&lt;br&gt;• 확장 시 마이그레이션 불필요" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#424242;" parent="1" vertex="1">
          <mxGeometry x="-1360" y="1625" width="430" height="110" as="geometry" />
        </mxCell>
        <mxCell id="feature-box3" value="💡 자동 필드 계산" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;strokeWidth=2;fontSize=15;fontColor=#E65100;fontStyle=1;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="-880" y="1585" width="470" height="165" as="geometry" />
        </mxCell>
        <mxCell id="feature3" value="• currentScore: 실시간 점수 계산&lt;br&gt;• percentage: 백분율 자동 산출&lt;br&gt;• assignmentTotalScore: 자동 합산&lt;br&gt;• attendanceRate: 출석률 자동 계산&lt;br&gt;• latePenalty: 지각 감점 자동 적용" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#424242;" parent="1" vertex="1">
          <mxGeometry x="-860" y="1625" width="430" height="110" as="geometry" />
        </mxCell>
        <mxCell id="feature-box4" value="💡 null 처리 및 데이터 무결성" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=2;fontSize=15;fontColor=#0D47A1;fontStyle=1;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="-380" y="1585" width="470" height="165" as="geometry" />
        </mxCell>
        <mxCell id="feature4" value="• 미채점 과제: score: null&lt;br&gt;• 총점 계산 시 null → 0 처리&lt;br&gt;• letterGrade: null (미배정)&lt;br&gt;• 필수 필드 검증&lt;br&gt;• 이력 추적 가능" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#424242;" parent="1" vertex="1">
          <mxGeometry x="-360" y="1625" width="430" height="110" as="geometry" />
        </mxCell>
        <mxCell id="summary-box" value="📋 계산 흐름 요약" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F57F17;strokeWidth=3;fontSize=18;fontColor=#F57F17;fontStyle=1;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="-1880" y="1780" width="1970" height="60" as="geometry" />
        </mxCell>
        <mxCell id="summary-text" value="&lt;font style=&quot;font-size: 15px;&quot;&gt;출석 승인 / 과제 채점 &amp;nbsp;→&amp;nbsp; 🔔 GradeUpdateEvent 발행 &amp;nbsp;→&amp;nbsp; 1️⃣ 출석점수 계산 &amp;nbsp;→&amp;nbsp; 2️⃣ 과제점수 합산 &amp;nbsp;→&amp;nbsp; 3️⃣ 총점 계산 &amp;nbsp;→&amp;nbsp; 4️⃣ 백분율 계산 &amp;nbsp;→&amp;nbsp; 5️⃣ ENROLLMENT_DATA 업데이트 &amp;nbsp;→&amp;nbsp; ✅ DB 저장 완료&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=15;fontColor=#F57F17;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="-1840" y="1790" width="1890" height="35" as="geometry" />
        </mxCell>
        <mxCell id="step1-formula" value="&lt;font face=&quot;Courier New&quot;&gt;출석점수 = (출석 × 만점 ÷ 세션) - (지각 × 감점)&lt;br&gt;예: (50 × 120 ÷ 80) - (5 × 0.75) = 75.5점&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=1;fontSize=14;fontColor=#0D47A1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-1800" y="385" width="360" height="50" as="geometry" />
        </mxCell>
        <mxCell id="step2-formula" value="&lt;font face=&quot;Courier New&quot;&gt;과제점수 = Σ assignments[i].score (null → 0)&lt;br&gt;예: 45 + 0 + 0 = 45점&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F57F17;strokeWidth=1;fontSize=14;fontColor=#F57F17;align=left;" parent="1" vertex="1">
          <mxGeometry x="-1800" y="540" width="360" height="60" as="geometry" />
        </mxCell>
        <mxCell id="step3-formula" value="&lt;font face=&quot;Courier New&quot;&gt;총점 = 출석점수 + 과제점수&lt;br&gt;예: 75.5 + 45 = 120.5점&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#388E3C;strokeWidth=1;fontSize=14;fontColor=#1B5E20;align=left;" parent="1" vertex="1">
          <mxGeometry x="-1800" y="690" width="360" height="45" as="geometry" />
        </mxCell>
        <mxCell id="step4-formula" value="&lt;font face=&quot;Courier New&quot;&gt;백분율 = (총점 ÷ 만점) × 100&lt;br&gt;예: (120.5 ÷ 277) × 100 = 43.5%&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;strokeWidth=1;fontSize=14;fontColor=#4A148C;align=left;" parent="1" vertex="1">
          <mxGeometry x="-1800" y="840" width="360" height="45" as="geometry" />
        </mxCell>
        <mxCell id="step5-formula" value="&lt;font face=&quot;Courier New&quot;&gt;grade.total.currentScore = 120.5&lt;br&gt;grade.total.percentage = 43.5&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;strokeWidth=1;fontSize=14;fontColor=#E65100;align=left;" parent="1" vertex="1">
          <mxGeometry x="-1800" y="990" width="360" height="45" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
