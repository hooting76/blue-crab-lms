# í”„ë¡ íŠ¸ì—”ë“œ ê°€ì´ë“œ

ì„±ì í™•ì¸ì„œ APIë¥¼ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ê°€ì´ë“œ

---

## ğŸ” ì¸ì¦ ì²˜ë¦¬

### JWT í† í° ì „ì†¡

```javascript
const response = await fetch('https://bluecrab.chickenkiller.com/BlueCrab-1.0.0/api/transcript/view', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${window.authToken}`  // JWT í† í°
    },
    body: JSON.stringify({
        studentIdx: currentUser.id
    })
});
```

### ì—ëŸ¬ ì²˜ë¦¬

```javascript
const result = await response.json();

if (result.status === 'error') {
    switch (response.status) {
        case 401:
            // ì¸ì¦ ì‹¤íŒ¨ - ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
            console.log('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤');
            window.location.href = '/login';
            break;
            
        case 403:
            // ê¶Œí•œ ì—†ìŒ - ë³¸ì¸ ì„±ì ë§Œ ì¡°íšŒ ê°€ëŠ¥
            alert('ë³¸ì¸ì˜ ì„±ì ë§Œ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤');
            break;
            
        case 404:
            // í•™ìƒ ì—†ìŒ
            alert('í•™ìƒ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
            break;
            
        case 500:
            // ì„œë²„ ì˜¤ë¥˜
            alert('ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”');
            break;
    }
}
```

---

## ğŸ“Š ë°ì´í„° ë°”ì¸ë”©

### ì‘ë‹µ êµ¬ì¡°

```javascript
const transcript = result.data;

// í•™ìƒ ì •ë³´
const student = transcript.student;
console.log(student.studentCode);    // "202500106114"
console.log(student.name);           // "ë°•ëŒ€í˜„"
console.log(student.currentGrade);   // 1

// ì „ì²´ ê³¼ëª© (ë°°ì—´)
const courses = transcript.courses;
courses.forEach(course => {
    console.log(course.lecTitle);     // "ìë£Œêµ¬ì¡°"
    console.log(course.letterGrade);  // "A"
    console.log(course.gpa);          // 4.0
    console.log(course.status);       // "COMPLETED"
});

// í•™ê¸°ë³„ ìš”ì•½ (ê°ì²´)
const semesterSummaries = transcript.semesterSummaries;
Object.entries(semesterSummaries).forEach(([key, summary]) => {
    console.log(key);                 // "2025-1"
    console.log(summary.semesterGpa); // 4.0
    console.log(summary.courseCount); // 3
});

// ì „ì²´ ìš”ì•½
const overall = transcript.overallSummary;
console.log(overall.cumulativeGpa);   // 4.0
console.log(overall.totalCourses);    // 3
console.log(overall.completionRate);  // 37.5
```

---

## ğŸ¨ ìƒíƒœë³„ UI í‘œì‹œ

### ìƒíƒœ ì½”ë“œ â†’ í‘œì‹œ ë³€í™˜

```javascript
function getStatusDisplay(status) {
    const statusConfig = {
        'COMPLETED': {
            text: 'ìˆ˜ë£Œ',
            icon: 'âœ…',
            color: '#22c55e',  // ì´ˆë¡ìƒ‰
            bgColor: '#dcfce7'
        },
        'FAILED': {
            text: 'ë‚™ì œ',
            icon: 'âŒ',
            color: '#ef4444',  // ë¹¨ê°„ìƒ‰
            bgColor: '#fee2e2'
        },
        'IN_PROGRESS': {
            text: 'ì§„í–‰ì¤‘',
            icon: 'â³',
            color: '#3b82f6',  // íŒŒë€ìƒ‰
            bgColor: '#dbeafe'
        },
        'NOT_GRADED': {
            text: 'ë¯¸í™•ì •',
            icon: 'â¸ï¸',
            color: '#6b7280',  // íšŒìƒ‰
            bgColor: '#f3f4f6'
        },
        'DROPPED': {
            text: 'ì¤‘ë„í¬ê¸°',
            icon: 'ğŸš«',
            color: '#f59e0b',  // ì£¼í™©ìƒ‰
            bgColor: '#fef3c7'
        }
    };
    
    return statusConfig[status] || statusConfig['NOT_GRADED'];
}

// ì‚¬ìš© ì˜ˆì‹œ
const statusInfo = getStatusDisplay(course.status);
console.log(`${statusInfo.icon} ${statusInfo.text}`);  // "âœ… ìˆ˜ë£Œ"
```

### React ì»´í¬ë„ŒíŠ¸ ì˜ˆì‹œ

```jsx
function StatusBadge({ status }) {
    const config = getStatusDisplay(status);
    
    return (
        <span style={{
            color: config.color,
            backgroundColor: config.bgColor,
            padding: '4px 12px',
            borderRadius: '12px',
            fontSize: '14px',
            fontWeight: '500'
        }}>
            {config.icon} {config.text}
        </span>
    );
}
```

---

## ğŸ“ GPA í¬ë§·íŒ…

### ì†Œìˆ˜ì  í‘œì‹œ

```javascript
function formatGpa(gpa) {
    // ì†Œìˆ˜ì  ë‘˜ì§¸ ìë¦¬ê¹Œì§€ í‘œì‹œ
    return gpa.toFixed(2);
}

// ì‚¬ìš© ì˜ˆì‹œ
console.log(formatGpa(4.0));     // "4.00"
console.log(formatGpa(3.5));     // "3.50"
console.log(formatGpa(2.67));    // "2.67"
```

### GPA ë°” ì°¨íŠ¸

```javascript
function GpaBar({ gpa, maxGpa = 4.0 }) {
    const percentage = (gpa / maxGpa) * 100;
    
    // GPAì— ë”°ë¥¸ ìƒ‰ìƒ
    const getColor = (gpa) => {
        if (gpa >= 3.5) return '#22c55e';      // ì´ˆë¡ìƒ‰ (A)
        if (gpa >= 3.0) return '#3b82f6';      // íŒŒë€ìƒ‰ (B)
        if (gpa >= 2.0) return '#f59e0b';      // ì£¼í™©ìƒ‰ (C)
        if (gpa >= 1.0) return '#ef4444';      // ë¹¨ê°„ìƒ‰ (D)
        return '#6b7280';                      // íšŒìƒ‰ (F)
    };
    
    return (
        <div style={{ width: '100%', backgroundColor: '#e5e7eb', borderRadius: '4px', height: '8px' }}>
            <div style={{
                width: `${percentage}%`,
                backgroundColor: getColor(gpa),
                height: '100%',
                borderRadius: '4px',
                transition: 'width 0.3s ease'
            }} />
        </div>
    );
}
```

---

## ğŸ“… í•™ê¸° ì •ë ¬

### í•™ê¸°ë³„ ìš”ì•½ ì •ë ¬

```javascript
// semesterSummariesëŠ” ê°ì²´ì´ë¯€ë¡œ ì •ë ¬ í•„ìš”
const sortedSemesters = Object.entries(transcript.semesterSummaries)
    .sort(([keyA], [keyB]) => keyA.localeCompare(keyB));

sortedSemesters.forEach(([key, summary]) => {
    console.log(`${summary.year}í•™ë…„ë„ ${summary.semester}í•™ê¸°`);
    console.log(`í•™ê¸° GPA: ${summary.semesterGpa.toFixed(2)}`);
});

// ê²°ê³¼:
// 2024í•™ë…„ë„ 1í•™ê¸°
// í•™ê¸° GPA: 3.50
// 2024í•™ë…„ë„ 2í•™ê¸°
// í•™ê¸° GPA: 3.75
// 2025í•™ë…„ë„ 1í•™ê¸°
// í•™ê¸° GPA: 4.00
```

---

## ğŸ—“ï¸ ë‚ ì§œ í¬ë§·íŒ…

### ISO 8601 â†’ í•œêµ­ì–´

```javascript
function formatDateTime(isoString) {
    if (!isoString) return 'N/A';
    
    const date = new Date(isoString);
    
    return date.toLocaleString('ko-KR', {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
    });
}

// ì‚¬ìš© ì˜ˆì‹œ
console.log(formatDateTime('2025-10-29T14:35:22'));
// "2025. 10. 29. ì˜¤í›„ 2:35:22"
```

---

## ğŸ¯ Null ì²˜ë¦¬

### Null ì•ˆì „ í‘œì‹œ

```javascript
function formatRank(course) {
    // ì„±ì  í™•ì • ì‹œì—ë§Œ rank, totalStudents ì¡´ì¬
    if (course.rank && course.totalStudents) {
        return `${course.rank} / ${course.totalStudents}`;
    }
    return '-';  // ë˜ëŠ” 'N/A'
}

// letterGrade null ì²˜ë¦¬
function formatLetterGrade(letterGrade) {
    if (!letterGrade || letterGrade === 'N/A') {
        return '-';
    }
    return letterGrade;
}

// ì‚¬ìš© ì˜ˆì‹œ
console.log(formatRank({ rank: 3, totalStudents: 25 }));  // "3 / 25"
console.log(formatRank({ rank: null, totalStudents: null }));  // "-"
```

---

## ğŸ“± UI êµ¬ì„± ì˜ˆì‹œ

### HTML/CSS ë ˆì´ì•„ì›ƒ

```html
<div class="transcript-container">
    <!-- í•™ìƒ ì •ë³´ -->
    <div class="student-info">
        <h2>ì„± ì  í™• ì¸ ì„œ</h2>
        <table>
            <tr>
                <td>í•™ë²ˆ</td>
                <td>{{ student.studentCode }}</td>
            </tr>
            <tr>
                <td>ì´ë¦„</td>
                <td>{{ student.name }}</td>
            </tr>
            <tr>
                <td>ì…í•™ë…„ë„</td>
                <td>{{ student.admissionYear }}</td>
            </tr>
            <tr>
                <td>í˜„ì¬í•™ë…„</td>
                <td>{{ student.currentGrade }}í•™ë…„</td>
            </tr>
        </table>
    </div>
    
    <!-- ì „ì²´ ìš”ì•½ -->
    <div class="overall-summary">
        <h3>ì „ì²´ ìš”ì•½</h3>
        <div class="summary-grid">
            <div class="summary-item">
                <span class="label">ì´ ìˆ˜ê°• ê³¼ëª©</span>
                <span class="value">{{ overall.totalCourses }}ê°œ</span>
            </div>
            <div class="summary-item">
                <span class="label">ì·¨ë“/ì‹ ì²­ í•™ì </span>
                <span class="value">{{ overall.totalEarnedCredits }} / {{ overall.totalAttemptedCredits }}</span>
            </div>
            <div class="summary-item">
                <span class="label">ëˆ„ì  í‰ì </span>
                <span class="value">{{ overall.cumulativeGpa.toFixed(2) }} / 4.0</span>
            </div>
            <div class="summary-item">
                <span class="label">í•™ì  ì·¨ë“ë¥ </span>
                <span class="value">{{ overall.completionRate.toFixed(2) }}%</span>
            </div>
        </div>
    </div>
    
    <!-- ìˆ˜ê°• ë‚´ì—­ -->
    <div class="course-list">
        <h3>ìˆ˜ê°• ë‚´ì—­</h3>
        <table class="course-table">
            <thead>
                <tr>
                    <th>í•™ê¸°</th>
                    <th>ê³¼ëª©ëª…</th>
                    <th>êµìˆ˜</th>
                    <th>í•™ì </th>
                    <th>ì„±ì </th>
                    <th>GPA</th>
                    <th>ë°±ë¶„ìœ¨</th>
                    <th>ë“±ìˆ˜</th>
                    <th>ìƒíƒœ</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="course in courses" :key="course.lecIdx">
                    <td>{{ course.year }}-{{ course.semester }}</td>
                    <td>{{ course.lecTitle }}</td>
                    <td>{{ course.professorName }}</td>
                    <td>{{ course.credits }}</td>
                    <td>{{ course.letterGrade }}</td>
                    <td>{{ course.gpa.toFixed(2) }}</td>
                    <td>{{ course.percentage.toFixed(2) }}%</td>
                    <td>{{ formatRank(course) }}</td>
                    <td><StatusBadge :status="course.status" /></td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <!-- ë°œê¸‰ ì •ë³´ -->
    <div class="issue-info">
        <p>ë°œê¸‰ì¼ì‹œ: {{ formatDateTime(issuedAt) }}</p>
        <p>ë°œê¸‰ë²ˆí˜¸: {{ certificateNumber }}</p>
    </div>
</div>
```

### CSS ìŠ¤íƒ€ì¼

```css
.transcript-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 24px;
    background: #fff;
}

.student-info {
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    padding: 24px;
    margin-bottom: 24px;
}

.student-info h2 {
    text-align: center;
    margin-bottom: 24px;
    font-size: 24px;
    font-weight: bold;
}

.overall-summary {
    background: #f9fafb;
    padding: 24px;
    border-radius: 8px;
    margin-bottom: 24px;
}

.summary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
}

.summary-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.summary-item .label {
    font-size: 14px;
    color: #6b7280;
}

.summary-item .value {
    font-size: 20px;
    font-weight: bold;
    color: #111827;
}

.course-table {
    width: 100%;
    border-collapse: collapse;
}

.course-table th,
.course-table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #e5e7eb;
}

.course-table th {
    background: #f9fafb;
    font-weight: 600;
    color: #374151;
}

.issue-info {
    margin-top: 24px;
    padding: 16px;
    background: #f9fafb;
    border-radius: 8px;
    text-align: center;
    color: #6b7280;
}
```

---

## ğŸ“Š ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ í™œìš©

### Chart.js í•™ì  ë¶„í¬

```javascript
function renderGradeDistribution(overall) {
    const ctx = document.getElementById('gradeChart').getContext('2d');
    
    new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['A', 'B', 'C', 'D', 'F'],
            datasets: [{
                data: [
                    overall.totalGradeACount,
                    overall.totalGradeBCount,
                    overall.totalGradeCCount,
                    overall.totalGradeDCount,
                    overall.totalGradeFCount
                ],
                backgroundColor: [
                    '#22c55e',  // A - ì´ˆë¡
                    '#3b82f6',  // B - íŒŒë‘
                    '#f59e0b',  // C - ì£¼í™©
                    '#ef4444',  // D - ë¹¨ê°•
                    '#6b7280'   // F - íšŒìƒ‰
                ]
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom'
                },
                title: {
                    display: true,
                    text: 'í•™ì  ë¶„í¬'
                }
            }
        }
    });
}
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. F ë“±ê¸‰ GPA ì œì™¸

F ë“±ê¸‰ì€ GPA 0.0ìœ¼ë¡œ í‘œì‹œë˜ì§€ë§Œ, ì‹¤ì œ ëˆ„ì  GPA ê³„ì‚°ì—ì„œëŠ” ì œì™¸ë©ë‹ˆë‹¤.

```javascript
// ì˜ëª»ëœ ì˜ˆì‹œ (F í¬í•¨)
const wrongGpa = courses.reduce((sum, c) => sum + c.gpa * c.credits, 0) 
    / courses.reduce((sum, c) => sum + c.credits, 0);

// ì˜¬ë°”ë¥¸ ì˜ˆì‹œ (F ì œì™¸)
const completedCourses = courses.filter(c => c.status === 'COMPLETED');
const correctGpa = completedCourses.reduce((sum, c) => sum + c.gpa * c.credits, 0)
    / completedCourses.reduce((sum, c) => sum + c.credits, 0);
```

### 2. ì§„í–‰ì¤‘ ê³¼ëª© í‘œì‹œ

```javascript
if (course.status === 'IN_PROGRESS' || course.status === 'NOT_GRADED') {
    // letterGradeê°€ "ì§„í–‰ì¤‘", "ë¯¸í™•ì •" ë“± ì„ì‹œ ê°’
    // rank, totalStudentsëŠ” null
    // GPA ê³„ì‚°ì— í¬í•¨ ì•ˆ ë¨
}
```

### 3. ëª¨ë°”ì¼ ë°˜ì‘í˜•

```css
@media (max-width: 768px) {
    .summary-grid {
        grid-template-columns: 1fr;
    }
    
    .course-table {
        font-size: 12px;
    }
    
    .course-table th,
    .course-table td {
        padding: 8px 4px;
    }
}
```
