# Database Configuration
spring.datasource.url=jdbc:mariadb://121.165.24.26:55511/blue_crab?characterEncoding=UTF-8&useUnicode=true
spring.datasource.username=KDT_project
spring.datasource.password=Kdtkdt!1120
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver

# 성태준 추가
app.domain=https://bluecrab.chickenkiller.com
spring.devtools.livereload.enabled=true
spring.devtools.restart.enabled=true
spring.thymeleaf.cache=false
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=bluecrabacademy@gmail.com
spring.mail.password=vcwc qytv jqzg mszx
spring.mail.default-encoding=UTF-8
spring.mail.properties.mail.transport.protocol=smtp
spring.mail.properties.mail.smtp.port=587
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true

# Connection Pool (HikariCP)
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MariaDBDialect
spring.jpa.properties.hibernate.format_sql=true

# JWT Configuration
app.jwt.secret=${JWT_SECRET:mySecretKey12345678901234567890123456789012345678901234567890}
app.jwt.access-token-expiration=${JWT_ACCESS_EXPIRATION:900000}
app.jwt.refresh-token-expiration=${JWT_REFRESH_EXPIRATION:86400000}

# Redis Configuration
spring.redis.host=${REDIS_HOST:127.0.0.1}
spring.redis.port=${REDIS_PORT:6379}
spring.redis.password=${REDIS_PASSWORD:}
spring.redis.database=${REDIS_DB:0}
spring.redis.timeout=${REDIS_TIMEOUT:2000ms}

# Redis Connection Pool (Lettuce)
spring.redis.lettuce.pool.max-active=8
spring.redis.lettuce.pool.max-idle=8
spring.redis.lettuce.pool.min-idle=0

# MinIO Configuration
app.minio.endpoint=${MINIO_ENDPOINT:http://localhost:9000}
app.minio.access-key=${MINIO_ACCESS_KEY:minioadmin}
app.minio.secret-key=${MINIO_SECRET_KEY:minioadmin}
app.minio.bucket-name=${MINIO_BUCKET_NAME:profile-img}
app.minio.profile-folder=${MINIO_PROFILE_FOLDER:}

# ========== 성태준 추가 ==========
# MinIO Configuration
app.minio.board-bucket-name=${MINIO_BOARD_BUCKET:board-attached}
app.minio.board-folder-prefix=${MINIO_BOARD_FOLDER_PREFIX:}
app.minio.board-presign-expire=${MINIO_BOARD_PRESIGN_EXPIRE:900}   # seconds

# file upload limit
spring.servlet.multipart.max-file-size=${BOARD_FILE_MAX_SIZE:15MB}
spring.servlet.multipart.max-request-size=${BOARD_FILE_MAX_REQUEST_SIZE:20MB}

# attachment validation
app.file.allowed-extensions=${BOARD_FILE_ALLOWED_EXT:pdf,doc,docx,xls,xlsx,ppt,pptx,txt,jpg,jpeg,png,gif,zip}
app.file.allowed-mime-types=${BOARD_FILE_ALLOWED_MIME:application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,text/plain,image/jpeg,image/png,application/zip}

# attachment policy
app.file.max-per-post=${BOARD_FILE_MAX_PER_POST:5}
app.file.expire-days=${BOARD_FILE_EXPIRE_DAYS:30}

# ========== 성태준 추가 끝 ==========

# 이미지 캐싱 설정
app.image.cache-enabled=${IMAGE_CACHE_ENABLED:true}
app.image.cache-max-size=${IMAGE_CACHE_MAX_SIZE:100}
app.image.cache-expire-hours=${IMAGE_CACHE_EXPIRE_HOURS:24}
spring.redis.lettuce.pool.max-wait=-1ms

# Redis 캐시 설정
spring.cache.type=redis
spring.cache.redis.time-to-live=600000
spring.cache.redis.cache-null-values=false

# Security Configuration
app.security.allowed-origins=${ALLOWED_ORIGINS:http://localhost:3000,http://localhost:8080,https://bluecrab-front-test.chickenkiller.com}
app.security.password-encoding-algorithm=${PASSWORD_ALGORITHM:SHA-256}

# Session Configuration
server.servlet.session.timeout=30m

# Server Configuration
server.servlet.context-path=/BlueCrab-1.0.0
spring.mvc.pathmatch.matching-strategy=ant_path_matcher

# Database Configuration
app.database.connection-pool-size=${DB_POOL_SIZE:10}
app.database.connection-timeout=${DB_CONNECTION_TIMEOUT:30000}

# Active Profile (ê°ë°ììë§ dev íë¡íì¼ íì±í)
spring.profiles.active=dev

# Logging
logging.level.org.springframework.security=DEBUG
logging.level.BlueCrab.com.example=DEBUG

# 로그 인코딩 설정
logging.charset.console=UTF-8
logging.charset.file=UTF-8

# Spring Boot 기본 인코딩 설정
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# Firebase Admin SDK
firebase.enabled=${FIREBASE_ENABLED:true}
firebase.credentials.location=${GOOGLE_APPLICATION_CREDENTIALS:/home/project01/firebase/service-account.json}
firebase.credentials.json=${FIREBASE_CREDENTIALS_JSON:}
firebase.database.url=${FIREBASE_DATABASE_URL:https://lms-project-b8489-default-rtdb.firebaseio.com}

# VAPID Keys for Web Push Notifications
firebase.vapid.public-key=${VAPID_PUBLIC_KEY:BFH1FPAvU0xBq1_SuGJs_4TYFN6a9D7qktiEzOcsE2OHhjfLRqlyvelzI8ZiLQVwd2FJN-4gXjQ4Yc0Xpo-bQ2E}
firebase.vapid.private-key=${VAPID_PRIVATE_KEY:4RZmK2xocSsh_2UOli83xZEeZaO4q2j5QiG1q4XXdGI}

# Facility Reservation Policy Configuration
reservation.policy.max-days-in-advance=30
reservation.policy.min-duration-minutes=30
reservation.policy.max-duration-minutes=480
reservation.policy.auto-complete-hours=1
