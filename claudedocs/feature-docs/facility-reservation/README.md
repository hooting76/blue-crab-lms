# ì‹œì„¤ ì˜ˆì•½ ì‹œìŠ¤í…œ êµ¬í˜„ ê°€ì´ë“œ

> **í´ë”**: `feature-docs/facility-reservation/`  
> **ëª©ì **: ì‹œì„¤ ì˜ˆì•½ ì‹œìŠ¤í…œ ì„¤ê³„, êµ¬í˜„ ë° ë²„ê·¸ ìˆ˜ì • ê°€ì´ë“œ

---

## ğŸ¢ ê°œìš”

**ì‹œì„¤ ì˜ˆì•½ ì‹œìŠ¤í…œ**

- **ì‚¬ìš©ì ê¸°ëŠ¥**: ì‹œì„¤ ì¡°íšŒ, ì˜ˆì•½, ì·¨ì†Œ
- **ê´€ë¦¬ì ê¸°ëŠ¥**: ì‹œì„¤ ê´€ë¦¬, ì˜ˆì•½ ìŠ¹ì¸/ê±°ë¶€
- **ì‹œì„¤ ìœ í˜•**: íšŒì˜ì‹¤, ê°•ì˜ì‹¤, ì²´ìœ¡ì‹œì„¤ ë“±

---

## ğŸ“„ ë¬¸ì„œ ëª©ë¡

### ğŸ¯ **ì‹œì‘í•˜ê¸° - í•„ë… ë¬¸ì„œ**

#### â­ COMPLETE_SUMMARY.md
**ì‹œì„¤ë¬¼ ì˜ˆì•½ ì‹œìŠ¤í…œ ìµœì¢… ì •ë¦¬** (2025-10-10)
- ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°
- 15ê°œ API ì—”ë“œí¬ì¸íŠ¸ ìš”ì•½
- ì„±ëŠ¥ ìµœì í™” ê²°ê³¼
- í”„ë¡ íŠ¸ì—”ë“œ ì‘ì—… ê°€ì´ë“œ
- ğŸ‘‰ **ì‹ ê·œ ê°œë°œìëŠ” ì—¬ê¸°ì„œ ì‹œì‘!**

#### âš¡ consecutive-time-only-policy.md ğŸ†•
**ì—°ì†ëœ ì‹œê°„ëŒ€ë§Œ ì˜ˆì•½ ê°€ëŠ¥ ì •ì±…**
- í•µì‹¬ ê·œì¹™: ê°™ì€ ë‚ ì§œ ë‚´ì—ì„œë§Œ ì˜ˆì•½ ê°€ëŠ¥
- ë„ì… ì´ìœ : êµ¬í˜„ ë³µì¡ë„ 70% ê°ì†Œ
- í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ ê°€ì´ë“œ
- í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤

---

### ğŸ“š **API ë¬¸ì„œ (ì™„ì „ ê°€ì´ë“œ)**

> **ìœ„ì¹˜:** `claudedocs/api-endpoints/`

#### ğŸŒŸ facility-reservation-api-complete.md
**ì‹œì„¤ ì˜ˆì•½ API ì™„ì „ ê°€ì´ë“œ**
- ìœ ì € API 10ê°œ ìƒì„¸ ëª…ì„¸
- ê´€ë¦¬ì API 5ê°œ ìƒì„¸ ëª…ì„¸
- Request/Response ì˜ˆì‹œ
- ì—ëŸ¬ ì‘ë‹µ ìƒì„¸
- TypeScript íƒ€ì… ì •ì˜
- í”„ë¡ íŠ¸ì—”ë“œ í†µí•© ì˜ˆì‹œ ì½”ë“œ
- ì„±ëŠ¥ ìµœì í™” ì„¤ëª…

#### âš¡ facility-reservation-api-quick-reference.md
**ì‹œì„¤ ì˜ˆì•½ API ë¹ ë¥¸ ì°¸ì¡°**
- í•µì‹¬ ë‚´ìš©ë§Œ ìš”ì•½
- ë¹ ë¥¸ ê²€ìƒ‰ìš©
- Enum íƒ€ì… ì •ë¦¬
- curl ì˜ˆì‹œ

---

### ğŸ—ï¸ **ì„¤ê³„ ë° êµ¬í˜„**

#### facility-reservation-final-plan.md
**ìµœì¢… ì„¤ê³„ ë¬¸ì„œ**
- í™•ì •ëœ ì„¤ê³„
- êµ¬í˜„ ê°€ì´ë“œ
- í…ŒìŠ¤íŠ¸ ê³„íš

#### facility-reservation-backend-blueprint.md
**ë°±ì—”ë“œ êµ¬ì¡° ì„¤ê³„**
- ì—”í‹°í‹° ì„¤ê³„
- ì„œë¹„ìŠ¤ ë ˆì´ì–´ ì„¤ê³„
- API ì„¤ê³„

---

### âš¡ **ì„±ëŠ¥ ìµœì í™” ë° ë²„ê·¸ ìˆ˜ì •**

#### facility-reservation-optimization-2025-10-10.md â­
**ì„±ëŠ¥ ìµœì í™” ë³´ê³ ì„œ**
- ë½ ì „ëµ ìµœì í™” (ìŠ¹ì¸ ì •ì±…ë³„ ì°¨ë³„í™”)
  - ì¦‰ì‹œ ìŠ¹ì¸ ì‹œì„¤: ë¹„ê´€ì  ë½ ì‚¬ìš©
  - ìŠ¹ì¸ í•„ìš” ì‹œì„¤: ë½ ì—†ì´ ì²˜ë¦¬ (80-90% ì„±ëŠ¥ í–¥ìƒ)
- ì¤‘ë³µ ì¡°íšŒ ì œê±° (50% ì¿¼ë¦¬ ê°ì†Œ)
- N+1 ë¬¸ì œ í•´ê²° (98% ì¿¼ë¦¬ ê°ì†Œ)

#### facility-reservation-critical-fixes.md
**ì¹˜ëª…ì  ë²„ê·¸ ìˆ˜ì •**
- ì˜ˆì•½ ì¤‘ë³µ ë¬¸ì œ
- ì‹œê°„ëŒ€ ì¶©ëŒ
- íŠ¸ëœì­ì…˜ ì´ìŠˆ

#### facility-reservation-jpql-fixes.md
**JPQL ì¿¼ë¦¬ ìˆ˜ì •**
- N+1 ë¬¸ì œ í•´ê²°
- ì¿¼ë¦¬ ìµœì í™”
- ì¸ë±ìŠ¤ ì¶”ê°€

---

### ğŸ“Š **ì‚¬ìš©ì í”Œë¡œìš° ë° UI ë¶„ì„**

#### facility-reservation-user-flow-complete.md
**ì‚¬ìš©ì í”Œë¡œìš° ì™„ì „ ê°€ì´ë“œ**
- ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤
- ê´€ë¦¬ì ì‹œë‚˜ë¦¬ì˜¤
- í”Œë¡œìš° ì°¨íŠ¸

#### UI_MISSING_FEATURES_ANALYSIS.md
**UI ëˆ„ë½ ê¸°ëŠ¥ ë¶„ì„**
- í˜„ì¬ UI ìƒíƒœ (í•˜ë“œì½”ë”© ë°ì´í„°)
- ëˆ„ë½ëœ ê¸°ëŠ¥ ëª©ë¡
- êµ¬í˜„ ìš°ì„ ìˆœìœ„

#### UI_QUICK_CHECKLIST.md
**UI ê°œë°œ ë¹ ë¥¸ ì²´í¬ë¦¬ìŠ¤íŠ¸**
- í•„ìˆ˜ êµ¬í˜„ í•­ëª©
- ê´€ë¦¬ì ê¸°ëŠ¥
- ì‚¬ìš©ì ì•ˆë‚´

---

### ï¿½ **ê³„íš ë° ë¶„ì„ (Phase 1)**

#### facility-reservation-plan.md
**ì´ˆê¸° ê³„íš ë¬¸ì„œ**
- í”„ë¡œì íŠ¸ ëª©í‘œ
- ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­
- ê¸°ìˆ  ìŠ¤íƒ

#### facility-reservation-prerequisites.md
**ì‚¬ì „ ìš”êµ¬ì‚¬í•­**
- í•„ìš”í•œ ì—”í‹°í‹°
- ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
- API ì—”ë“œí¬ì¸íŠ¸

#### facility-reservation-user-flow-analysis.md
**ì‚¬ìš©ì í”Œë¡œìš° ë¶„ì„**
- ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤
- ê´€ë¦¬ì ì‹œë‚˜ë¦¬ì˜¤
- UI/UX í”Œë¡œìš°

#### facility-reservation-issues-analysis.md
**ì´ìŠˆ ë¶„ì„**
- ë°œê²¬ëœ ë¬¸ì œì 
- ì›ì¸ ë¶„ì„
- í•´ê²° ë°©ì•ˆ

---

### ğŸ¨ **UI ì»´í¬ë„ŒíŠ¸ (ì°¸ê³ ìš©)**

#### facility-reservation-final-plan-v2.0-deprecated.md
**íê¸°ëœ v2.0 ê³„íš**
- ê³¼ê±° ë²„ì „ (ì°¸ê³ ìš©)
- ë³€ê²½ ì´ë ¥

---

### ğŸ’» ì½”ë“œ íŒŒì¼

#### admin_booking_system.tsx
**ê´€ë¦¬ì ì˜ˆì•½ ê´€ë¦¬ UI (React)**
```tsx
// ì‹œì„¤ ê´€ë¦¬
// ì˜ˆì•½ ìŠ¹ì¸/ê±°ë¶€
// í†µê³„ ì¡°íšŒ
```

#### facility_booking_system.tsx
**ì‚¬ìš©ì ì˜ˆì•½ UI (React)**
```tsx
// ì‹œì„¤ ëª©ë¡
// ì˜ˆì•½ ìƒì„±
// ì˜ˆì•½ ì¡°íšŒ/ì·¨ì†Œ
```

#### facility_reservation_schema.sql
**ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ**
```sql
-- ì‹œì„¤ í…Œì´ë¸”
CREATE TABLE facilities ...

-- ì˜ˆì•½ í…Œì´ë¸”
CREATE TABLE reservations ...
```

---

## ğŸ—‚ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### facilities (ì‹œì„¤)

| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | BIGINT | ì‹œì„¤ ID |
| name | VARCHAR(100) | ì‹œì„¤ëª… |
| type | VARCHAR(50) | ì‹œì„¤ ìœ í˜• |
| capacity | INT | ìˆ˜ìš© ì¸ì› |
| location | VARCHAR(200) | ìœ„ì¹˜ |
| status | VARCHAR(20) | ìƒíƒœ |

### reservations (ì˜ˆì•½)

| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | BIGINT | ì˜ˆì•½ ID |
| facility_id | BIGINT | ì‹œì„¤ ID (FK) |
| user_id | BIGINT | ì‚¬ìš©ì ID (FK) |
| start_time | DATETIME | ì‹œì‘ ì‹œê°„ |
| end_time | DATETIME | ì¢…ë£Œ ì‹œê°„ |
| status | VARCHAR(20) | ì˜ˆì•½ ìƒíƒœ |
| purpose | TEXT | ì‚¬ìš© ëª©ì  |

---

## ğŸ”Œ API ì—”ë“œí¬ì¸íŠ¸

### ì‚¬ìš©ì API

```
GET    /api/facilities              # ì‹œì„¤ ëª©ë¡
GET    /api/facilities/{id}         # ì‹œì„¤ ìƒì„¸
POST   /api/reservations            # ì˜ˆì•½ ìƒì„±
GET    /api/reservations/my         # ë‚´ ì˜ˆì•½ ëª©ë¡
DELETE /api/reservations/{id}       # ì˜ˆì•½ ì·¨ì†Œ
```

### ê´€ë¦¬ì API

```
POST   /api/admin/facilities        # ì‹œì„¤ ìƒì„±
PUT    /api/admin/facilities/{id}   # ì‹œì„¤ ìˆ˜ì •
DELETE /api/admin/facilities/{id}   # ì‹œì„¤ ì‚­ì œ
GET    /api/admin/reservations      # ì „ì²´ ì˜ˆì•½ ëª©ë¡
PATCH  /api/admin/reservations/{id}/approve  # ì˜ˆì•½ ìŠ¹ì¸
PATCH  /api/admin/reservations/{id}/reject   # ì˜ˆì•½ ê±°ë¶€
```

---

## ğŸš€ í˜„ì¬ ìƒíƒœ ë° ë‹¤ìŒ ë‹¨ê³„

### âœ… ì™„ë£Œëœ ì‘ì—… (2025-10-10)

#### ë°±ì—”ë“œ êµ¬í˜„ ì™„ë£Œ
- [x] ì—”í‹°í‹° ë° ë¦¬í¬ì§€í† ë¦¬ (5ê°œ)
- [x] ì„œë¹„ìŠ¤ ë¡œì§ (3ê°œ)
  - `FacilityService.java`
  - `FacilityReservationService.java`
  - `AdminFacilityReservationService.java`
- [x] ì»¨íŠ¸ë¡¤ëŸ¬ (3ê°œ)
  - `FacilityController.java` - ì‹œì„¤ ì¡°íšŒ API (5ê°œ)
  - `FacilityReservationController.java` - ì˜ˆì•½ ê´€ë¦¬ API (5ê°œ)
  - `AdminFacilityReservationController.java` - ê´€ë¦¬ì API (5ê°œ)
- [x] ê²€ì¦ ë¡œì§
  - ì—°ì†ëœ ì‹œê°„ëŒ€ ê²€ì¦ (ê°™ì€ ë‚ ì§œë§Œ)
  - ì˜ˆì•½ ì¶©ëŒ ê²€ì¦
  - ì‹œì„¤ ì°¨ë‹¨ ê¸°ê°„ ê²€ì¦

#### ì„±ëŠ¥ ìµœì í™” ì™„ë£Œ
- [x] ë½ ì „ëµ ìµœì í™” (80-90% ì„±ëŠ¥ í–¥ìƒ)
- [x] N+1 ì¿¼ë¦¬ ì œê±° (98% ì¿¼ë¦¬ ê°ì†Œ)
- [x] ì¤‘ë³µ ì¡°íšŒ ì œê±° (50% ì¿¼ë¦¬ ê°ì†Œ)

#### ë¬¸ì„œí™” ì™„ë£Œ
- [x] API ì™„ì „ ê°€ì´ë“œ (400+ ë¼ì¸)
- [x] API ë¹ ë¥¸ ì°¸ì¡°
- [x] ì—°ì†ëœ ì‹œê°„ëŒ€ ì •ì±… ë¬¸ì„œ
- [x] ì„±ëŠ¥ ìµœì í™” ë³´ê³ ì„œ
- [x] UI ëˆ„ë½ ê¸°ëŠ¥ ë¶„ì„
- [x] ìµœì¢… ì •ë¦¬ ë¬¸ì„œ

### ğŸš§ ì§„í–‰ ì¤‘ì¸ ì‘ì—…

#### í”„ë¡ íŠ¸ì—”ë“œ í†µí•© (ì˜ˆìƒ 6ì¼)

**1ë‹¨ê³„: ê¸°ë³¸ í†µí•© (2ì¼)**
- [ ] API í´ë¼ì´ì–¸íŠ¸ ì‘ì„±
- [ ] TypeScript íƒ€ì… ì •ì˜
- [ ] ì‹œì„¤ ëª©ë¡ ì—°ë™
- [ ] ì˜ˆì•½ ìƒì„± ê¸°ëŠ¥

**2ë‹¨ê³„: í•µì‹¬ ê¸°ëŠ¥ (2ì¼)**
- [ ] ì‹¤ì‹œê°„ ê°€ìš©ì„± ì²´í¬
- [ ] ë‚ ì§œ ê²€ì¦ (ê°™ì€ ë‚ ì§œë§Œ)
- [ ] ì—ëŸ¬ í•¸ë“¤ë§
- [ ] ë¡œë”© ìƒíƒœ ê´€ë¦¬

**3ë‹¨ê³„: ê´€ë¦¬ì ê¸°ëŠ¥ (1ì¼)**
- [ ] ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡
- [ ] ìŠ¹ì¸/ë°˜ë ¤ ì²˜ë¦¬
- [ ] í†µê³„ ëŒ€ì‹œë³´ë“œ
- [ ] ëŒ€ê¸° ê±´ìˆ˜ ë±ƒì§€

**4ë‹¨ê³„: UI/UX ê°œì„  (1ì¼)**
- [ ] ë¡œë”© ìŠ¤í”¼ë„ˆ
- [ ] í† ìŠ¤íŠ¸ ì•Œë¦¼
- [ ] ìƒíƒœë³„ ìƒ‰ìƒ
- [ ] ì•ˆë‚´ ë©”ì‹œì§€

### ğŸ“ˆ ì§„í–‰ë¥ 

```
ì „ì²´ ì§„í–‰ë¥ : â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%

ë°±ì—”ë“œ:      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ…
ë¬¸ì„œí™”:      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ…
í”„ë¡ íŠ¸ì—”ë“œ:  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0% ğŸš§
```

---

## ğŸ“ ì‹ ê·œ ê°œë°œì ê°€ì´ë“œ

### í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì

**1ë‹¨ê³„: ì •ì±… ì´í•´ (30ë¶„)**
```
â†’ consecutive-time-only-policy.md
```

**2ë‹¨ê³„: API í™•ì¸ (1ì‹œê°„)**
```
â†’ facility-reservation-api-quick-reference.md
```

**3ë‹¨ê³„: ìƒì„¸ ê°€ì´ë“œ (2ì‹œê°„)**
```
â†’ facility-reservation-api-complete.md
```

**4ë‹¨ê³„: ê°œë°œ ì‹œì‘**
```
â†’ UI_QUICK_CHECKLIST.md
```

### ë°±ì—”ë“œ ê°œë°œì

**1ë‹¨ê³„: ìµœì¢… ì •ë¦¬ í™•ì¸ (30ë¶„)**
```
â†’ COMPLETE_SUMMARY.md
```

**2ë‹¨ê³„: ì½”ë“œ ë¶„ì„**
```
â†’ FacilityReservationService.java
â†’ ì„±ëŠ¥ ìµœì í™” ë¶€ë¶„ í™•ì¸
```

**3ë‹¨ê³„: ì •ì±… ì´í•´**
```
â†’ consecutive-time-only-policy.md
â†’ facility-reservation-optimization-2025-10-10.md
```

---

## ğŸ” ë¹ ë¥¸ ê²€ìƒ‰

### í‚¤ì›Œë“œë¡œ ì°¾ê¸°

| ì°¾ê³  ì‹¶ì€ ë‚´ìš© | ë¬¸ì„œ |
|--------------|------|
| **ì „ì²´ ì‹œìŠ¤í…œ ì´í•´** | COMPLETE_SUMMARY.md |
| **API ìŠ¤í™** | facility-reservation-api-complete.md |
| **ë¹ ë¥¸ ì°¸ì¡°** | facility-reservation-api-quick-reference.md |
| **ë‚ ì§œ ì œì•½ ì •ì±…** | consecutive-time-only-policy.md |
| **ì„±ëŠ¥ ìµœì í™”** | facility-reservation-optimization-2025-10-10.md |
| **UI êµ¬í˜„ ê°€ì´ë“œ** | UI_QUICK_CHECKLIST.md |
| **í”„ë¡ íŠ¸ì—”ë“œ ì˜ˆì‹œ** | facility-reservation-api-complete.md (ì„¹ì…˜ 9) |

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### ì˜ˆì•½ ì¤‘ë³µ ë°©ì§€

```java
@Transactional
public Reservation createReservation(...) {
    // 1. ì‹œê°„ëŒ€ ì¤‘ë³µ ì²´í¬
    List<Reservation> conflicts = reservationRepository
        .findConflictingReservations(facilityId, startTime, endTime);
    
    if (!conflicts.isEmpty()) {
        throw new ConflictException("ì˜ˆì•½ ì‹œê°„ëŒ€ê°€ ì¤‘ë³µë©ë‹ˆë‹¤.");
    }
    
    // 2. ì˜ˆì•½ ìƒì„±
    ...
}
```

### íŠ¸ëœì­ì…˜ ê´€ë¦¬

```java
@Transactional(isolation = Isolation.SERIALIZABLE)
public Reservation updateReservation(...) {
    // ì§ë ¬í™” ê²©ë¦¬ ìˆ˜ì¤€ìœ¼ë¡œ ë™ì‹œì„± ë¬¸ì œ ë°©ì§€
}
```

---

## ğŸ› ì•Œë ¤ì§„ ì´ìŠˆ

### âœ… í•´ê²°ë¨

- [x] ì˜ˆì•½ ì¤‘ë³µ ë¬¸ì œ
- [x] N+1 ì¿¼ë¦¬ ë¬¸ì œ
- [x] ì‹œê°„ëŒ€ ì¶©ëŒ

### ğŸ”„ ì§„í–‰ ì¤‘

- [ ] ë°˜ë³µ ì˜ˆì•½ ê¸°ëŠ¥
- [ ] ì•Œë¦¼ ì‹œìŠ¤í…œ ì—°ë™

---

## ğŸ“… ìµœì¢… ì—…ë°ì´íŠ¸

- **ë‚ ì§œ**: 2025-10-10
- **ë²„ì „**: 1.0
- **ë‹¤ìŒ ë²„ì „ ê³„íš**: ë°˜ë³µ ì˜ˆì•½ ê¸°ëŠ¥ ì¶”ê°€
