# Blue Crab LMS 기술 스택 및 버전 정보

> **작성일**: 2025-10-10  
> **대상**: 프론트엔드 개발자  
> **목적**: 백엔드 환경 구성 및 호환성 확인

---

## 📋 전체 기술 스택 요약

| 레이어 | 기술 | 버전 | 용도 |
|--------|------|------|------|
| **프레임워크** | Spring Boot | 2.x (eGovFrame 4.3.0 기반) | 백엔드 프레임워크 |
| **언어** | Java | 11 (권장) | 백엔드 언어 |
| **빌드 도구** | Maven | 3.x | 의존성 관리 |
| **웹 서버** | Apache Tomcat | 9.x (내장) | WAR 배포 |
| **데이터베이스** | MariaDB | 10.x | 메인 데이터베이스 |
| **캐시** | Redis | 6.x/7.x | 세션, 토큰, FCM 세션 |
| **파일 저장소** | MinIO | Latest | 객체 스토리지 |
| **푸시 알림** | Firebase FCM | Admin SDK 9.7.0 | 푸시 알림 |
| **이메일** | SMTP (Gmail) | - | 인증 코드 발송 |
| **인증** | JWT | jjwt 0.12.6 | 토큰 기반 인증 |

---

## 🏗️ 백엔드 기술 스택 (상세)

### 1. 코어 프레임워크

#### Spring Boot & eGovFrame
```xml
<parent>
    <groupId>org.egovframe.boot</groupId>
    <artifactId>org.egovframe.boot.starter.parent</artifactId>
    <version>4.3.0</version>
</parent>
```

**주요 정보**:
- **eGovFrame**: 4.3.0 (전자정부 표준프레임워크)
- **Spring Framework**: 5.3.37
- **Spring Boot**: 2.x 버전 (eGovFrame 4.3.0에 포함)
- **Java Version**: 11 이상 권장

**프론트엔드 영향**:
- ✅ 안정적인 장기 지원(LTS) 버전
- ✅ REST API 표준 준수
- ✅ 한국 공공기관 표준

---

### 2. 웹 서버 및 컨테이너

#### Apache Tomcat (내장)
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-tomcat</artifactId>
    <scope>provided</scope>
</dependency>
```

**버전**: Tomcat 9.x (Spring Boot 2.x에 포함)
**배포 방식**: WAR 파일 배포

**설정**:
```properties
# 컨텍스트 경로
server.servlet.context-path=/BlueCrab-1.0.0

# 세션 타임아웃
server.servlet.session.timeout=30m

# 인코딩
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true
```

**프론트엔드 URL 구성**:
```
Base URL: https://bluecrab.chickenkiller.com/BlueCrab-1.0.0
          └─────────────┬──────────────┘ └────────┬───────┘
                      도메인              컨텍스트 경로
```

---

### 3. 데이터베이스

#### MariaDB
```xml
<dependency>
    <groupId>org.mariadb.jdbc</groupId>
    <artifactId>mariadb-java-client</artifactId>
    <version>3.1.4</version>
</dependency>
```

**버전**:
- **MariaDB JDBC Driver**: 3.1.4
- **MariaDB Server**: 10.x (호스트: 121.165.24.26:55511)

**연결 풀 (HikariCP)**:
```properties
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000
```

**ORM (JPA/Hibernate)**:
```xml
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-entitymanager</artifactId>
    <version>5.6.15.Final</version>
</dependency>
```

**설정**:
```properties
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MariaDBDialect
```

**프론트엔드 영향**:
- ✅ 자동 테이블 생성/수정 (ddl-auto=update)
- ⚠️ 직접 DB 접근 불필요 (REST API만 사용)

---

### 4. 캐시 및 세션 관리

#### Redis
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
</dependency>
```

**버전**: Redis 6.x/7.x 호환
**클라이언트**: Lettuce (Spring Boot 기본)

**용도**:
1. **JWT 토큰 블랙리스트** (로그아웃된 토큰 관리)
2. **FCM 세션 관리** (다중 기기 로그인)
3. **이메일 인증 코드** (임시 저장)
4. **관리자 2단계 인증** (세션 관리)
5. **이미지 캐싱** (프로필 이미지)

**연결 설정**:
```properties
spring.redis.host=127.0.0.1
spring.redis.port=6379
spring.redis.timeout=2000ms
spring.redis.lettuce.pool.max-active=8
```

**TTL 설정**:
```properties
# 캐시 기본 만료 시간
spring.cache.redis.time-to-live=600000  # 10분

# 이미지 캐시
app.image.cache-expire-hours=24  # 24시간
```

**프론트엔드 영향**:
- ✅ 로그아웃 시 토큰 즉시 무효화
- ✅ 다중 기기 로그인 감지
- ⚠️ Redis 다운 시 인증 실패 가능

---

### 5. 파일 저장소

#### MinIO
```xml
<dependency>
    <groupId>io.minio</groupId>
    <artifactId>minio</artifactId>
    <version>8.5.2</version>
</dependency>
```

**버전**: MinIO Java Client 8.5.2
**서버**: MinIO Server (S3 호환 객체 스토리지)

**용도**:
1. **프로필 이미지** 저장
2. **게시판 첨부파일** 저장

**Bucket 구성**:
```properties
# 프로필 이미지
app.minio.bucket-name=profile-img

# 게시판 첨부파일
app.minio.board-bucket-name=board-attached
```

**파일 업로드 제한**:
```properties
# 최대 파일 크기
spring.servlet.multipart.max-file-size=15MB
spring.servlet.multipart.max-request-size=20MB

# 게시글당 최대 첨부파일 수
app.file.max-per-post=5

# 허용 확장자
app.file.allowed-extensions=pdf,doc,docx,xls,xlsx,ppt,pptx,txt,jpg,jpeg,png,gif,zip
```

**프론트엔드 영향**:
- ✅ 15MB 이하 파일만 업로드 가능
- ✅ 게시글당 5개까지만 첨부 가능
- ✅ 허용된 확장자만 업로드 가능
- ⚠️ MinIO 다운 시 파일 업로드/다운로드 불가

---

### 6. 인증 및 보안

#### JWT (JSON Web Token)
```xml
<dependency>
    <groupId>io.jsonwebtoken</groupId>
    <artifactId>jjwt-api</artifactId>
    <version>0.12.6</version>
</dependency>
<dependency>
    <groupId>io.jsonwebtoken</groupId>
    <artifactId>jjwt-impl</artifactId>
    <version>0.12.6</version>
</dependency>
<dependency>
    <groupId>io.jsonwebtoken</groupId>
    <artifactId>jjwt-jackson</artifactId>
    <version>0.12.6</version>
</dependency>
```

**버전**: jjwt 0.12.6 (최신 안정 버전)

**토큰 설정**:
```properties
# Access Token (15분)
app.jwt.access-token-expiration=900000

# Refresh Token (24시간)
app.jwt.refresh-token-expiration=86400000

# Secret Key (환경변수로 관리)
app.jwt.secret=${JWT_SECRET:...}
```

#### Spring Security
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-security</artifactId>
</dependency>
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-oauth2-resource-server</artifactId>
</dependency>
```

**CORS 설정**:
```properties
app.security.allowed-origins=http://localhost:3000,http://localhost:8080,https://bluecrab-front-test.chickenkiller.com
```

**프론트엔드 영향**:
- ✅ Access Token: 15분마다 갱신 필요
- ✅ Refresh Token: 하루마다 재로그인 필요
- ✅ CORS 허용 도메인 확인 필수

---

### 7. 푸시 알림

#### Firebase Cloud Messaging (FCM)
```xml
<dependency>
    <groupId>com.google.firebase</groupId>
    <artifactId>firebase-admin</artifactId>
    <version>9.7.0</version>
</dependency>
```

**버전**: Firebase Admin SDK 9.7.0

**VAPID Keys** (Web Push):
```properties
firebase.vapid.public-key=BFH1FPAvU0xBq1_SuGJs_4TYFN6a9D7qktiEzOcsE2OHhjfLRqlyvelzI8ZiLQVwd2FJN-4gXjQ4Yc0Xpo-bQ2E
firebase.vapid.private-key=4RZmK2xocSsh_2UOli83xZEeZaO4q2j5QiG1q4XXdGI
```

**Firebase Realtime Database**:
```properties
firebase.database.url=https://lms-project-b8489-default-rtdb.firebaseio.com
```

**프론트엔드 영향**:
- ✅ VAPID Public Key 필수 (프론트엔드 설정)
- ✅ Service Worker 등록 필요
- ✅ 브라우저 알림 권한 요청 필요

**프론트엔드 설정 예시**:
```javascript
// firebase-messaging-sw.js
importScripts('https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js');
importScripts('https://www.gstatic.com/firebasejs/9.0.0/firebase-messaging-compat.js');

firebase.initializeApp({
  apiKey: "YOUR_API_KEY",
  projectId: "lms-project-b8489",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
});

const messaging = firebase.messaging();
```

---

### 8. 이메일 서비스

#### Spring Mail (SMTP)
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-mail</artifactId>
</dependency>
```

**SMTP 설정** (Gmail):
```properties
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=bluecrabacademy@gmail.com
spring.mail.password=vcwc qytv jqzg mszx  # 앱 비밀번호
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
```

**용도**:
1. 비밀번호 재설정 인증 코드
2. 관리자 2단계 인증 코드
3. 아이디 찾기 인증 코드

**프론트엔드 영향**:
- ✅ 이메일 발송에 약 1~3초 소요
- ⚠️ Gmail SMTP 다운 시 인증 실패

---

### 9. 기타 라이브러리

#### Lombok
```xml
<dependency>
    <groupId>org.projectlombok</groupId>
    <artifactId>lombok</artifactId>
    <version>1.18.34</version>
</dependency>
```
**용도**: Getter/Setter 자동 생성 (코드 간소화)

#### Apache HttpClient 5
```xml
<dependency>
    <groupId>org.apache.httpcomponents.client5</groupId>
    <artifactId>httpclient5</artifactId>
    <version>5.2.1</version>
</dependency>
```
**용도**: HTTP 클라이언트 (Firebase SDK 의존성)

---

## 🌐 프론트엔드 기술 스택

### 권장 버전

| 기술 | 버전 | 비고 |
|------|------|------|
| **React** | 18.x | 최신 안정 버전 |
| **Node.js** | 18.x LTS / 20.x LTS | LTS 버전 권장 |
| **Vite** | 5.x | 빌드 도구 |
| **Axios** | 1.x | HTTP 클라이언트 |

### 브라우저 호환성

| 브라우저 | 최소 버전 | 비고 |
|---------|----------|------|
| Chrome | 90+ | FCM 지원 |
| Firefox | 88+ | FCM 지원 |
| Safari | 14+ | 일부 PWA 기능 제한 |
| Edge | 90+ | FCM 지원 |

---

## 🔗 환경별 URL 및 포트

### 개발 환경
```
Backend API: https://bluecrab.chickenkiller.com/BlueCrab-1.0.0
Frontend:    http://localhost:5173 (Vite 기본 포트)
Database:    121.165.24.26:55511 (외부 접근 제한)
Redis:       127.0.0.1:6379 (로컬만)
MinIO:       http://localhost:9000 (로컬 개발 시)
```

### 프로덕션 환경
```
Backend API: https://bluecrab.chickenkiller.com/BlueCrab-1.0.0
Frontend:    https://bluecrab-front-test.chickenkiller.com
Database:    121.165.24.26:55511
Redis:       내부 네트워크
MinIO:       내부 네트워크
```

---

## 🔐 환경 변수

백엔드에서 사용하는 주요 환경 변수:

```bash
# JWT
JWT_SECRET=mySecretKey12345678901234567890...
JWT_ACCESS_EXPIRATION=900000
JWT_REFRESH_EXPIRATION=86400000

# Redis
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# MinIO
MINIO_ENDPOINT=http://localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET_NAME=profile-img
MINIO_BOARD_BUCKET=board-attached

# Firebase
FIREBASE_ENABLED=true
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json
FIREBASE_DATABASE_URL=https://lms-project-b8489-default-rtdb.firebaseio.com
VAPID_PUBLIC_KEY=BFH1FPAvU0xBq1_SuGJs_4TYFN6a9D7qktiEzOcsE2OHhjfLRqlyvelzI8ZiLQVwd2FJN-4gXjQ4Yc0Xpo-bQ2E
VAPID_PRIVATE_KEY=4RZmK2xocSsh_2UOli83xZEeZaO4q2j5QiG1q4XXdGI

# CORS
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080,https://bluecrab-front-test.chickenkiller.com
```

---

## 📦 의존성 버전 요약 (pom.xml)

### 핵심 프레임워크
| 라이브러리 | 버전 |
|-----------|------|
| eGovFrame Boot Starter Parent | 4.3.0 |
| Spring Framework | 5.3.37 |
| eGovFrame RTE | 4.3.0 |

### 데이터베이스
| 라이브러리 | 버전 |
|-----------|------|
| MariaDB JDBC Driver | 3.1.4 |
| Hibernate EntityManager | 5.6.15.Final |
| HikariCP | (Spring Boot 관리) |

### 인증 및 보안
| 라이브러리 | 버전 |
|-----------|------|
| jjwt-api | 0.12.6 |
| jjwt-impl | 0.12.6 |
| jjwt-jackson | 0.12.6 |
| Spring Security | (Spring Boot 관리) |

### 외부 서비스
| 라이브러리 | 버전 |
|-----------|------|
| MinIO Java Client | 8.5.2 |
| Firebase Admin SDK | 9.7.0 |
| Spring Data Redis | (Spring Boot 관리) |
| Spring Boot Starter Mail | (Spring Boot 관리) |

### HTTP 클라이언트
| 라이브러리 | 버전 |
|-----------|------|
| Apache HttpClient 5 | 5.2.1 |
| Apache HttpCore 5 | 5.2.1 |

### 유틸리티
| 라이브러리 | 버전 |
|-----------|------|
| Lombok | 1.18.34 |
| Jackson | (Spring Boot 관리) |

### 테스트
| 라이브러리 | 버전 |
|-----------|------|
| Selenium Java | 4.13.0 |
| Spring Boot Starter Test | (Spring Boot 관리) |

---

## ⚠️ 호환성 주의사항

### 1. Java 버전
```
권장: Java 11 (LTS)
최소: Java 8
최대: Java 17 (테스트 필요)
```

### 2. Spring Boot 버전
```
현재: Spring Boot 2.x (eGovFrame 4.3.0 기반)
주의: Spring Boot 3.x로 업그레이드 시 호환성 확인 필요
```

### 3. MariaDB vs MySQL
```
✅ MariaDB 10.x 사용 중
✅ MySQL 5.7+ 호환
⚠️ MySQL 8.x의 일부 기능은 테스트 필요
```

### 4. Redis 버전
```
✅ Redis 6.x/7.x 호환
⚠️ Redis 5.x 이하는 일부 기능 제한 가능
```

### 5. 브라우저 FCM 지원
```
✅ Chrome/Firefox/Edge: 완벽 지원
⚠️ Safari: iOS 16.4+ 부터 제한적 지원
❌ Internet Explorer: 지원 안 함
```

---

## 🔄 버전 업그레이드 계획

### 단기 (3개월 이내)
- [ ] Lombok 1.18.34 → 최신 버전
- [ ] Firebase Admin SDK 9.7.0 → 최신 버전
- [ ] MinIO Client 8.5.2 → 최신 버전

### 중기 (6개월 이내)
- [ ] Spring Framework 5.3.37 → 5.3.x 최신 패치
- [ ] Hibernate 5.6.15 → 5.6.x 최신 패치
- [ ] MariaDB JDBC 3.1.4 → 3.x 최신 버전

### 장기 (1년 이내)
- [ ] eGovFrame 4.3.0 → 4.4.x (출시 시)
- [ ] Spring Boot 2.x → 3.x (주요 업그레이드)
- [ ] Java 11 → Java 17 LTS

---

## 📚 관련 문서

- [프론트엔드 개발자를 위한 백엔드 가이드 인덱스](./프론트엔드_개발자를위한_백엔드_가이드_인덱스.md)
- [백엔드 폴더 구조 빠른 참조](./백엔드_폴더구조_빠른참조.md)
- [프론트엔드 완전 연동 가이드](../프론트엔드_완전_연동_가이드.md)
- [FCM Push Notification Guide](./FCM_PUSH_NOTIFICATION_GUIDE.md)

---

## 🆘 문제 해결

### "CORS 에러가 발생해요"
```
원인: ALLOWED_ORIGINS에 프론트엔드 도메인이 없음
해결: application.properties의 app.security.allowed-origins 확인
```

### "토큰이 계속 만료돼요"
```
원인: Access Token 만료 시간이 15분
해결: Refresh Token으로 자동 갱신 로직 구현
```

### "파일 업로드가 안 돼요"
```
원인1: 파일 크기 15MB 초과
원인2: 허용되지 않은 확장자
해결: 파일 크기 및 확장자 확인
```

### "Redis 연결 에러"
```
원인: Redis 서버 다운 또는 설정 오류
해결: Redis 서버 상태 확인 (redis-cli ping)
```

---

**작성자**: GitHub Copilot  
**최종 수정일**: 2025-10-10  
**버전**: 1.0  
**다음 업데이트**: 주요 의존성 버전 변경 시
