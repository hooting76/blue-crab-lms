# 백엔드 폴더 구조 빠른 참조 가이드

> **대상**: 프론트엔드 개발자  
> **목적**: 백엔드 폴더에서 필요한 정보를 빠르게 찾기  
> **작성일**: 2025-10-10

---

## 🎯 상황별 찾아야 할 폴더

| 상황 | 찾아갈 폴더 | 파일 예시 |
|------|-----------|----------|
| **API URL 확인하고 싶을 때** | `controller/` | `FacilityReservationController.java` |
| **보낼 데이터 형식 확인** | `dto/` | `ReservationCreateRequestDto.java` |
| **받을 데이터 형식 확인** | `dto/` | `ReservationDto.java` |
| **상태 코드 목록 확인** | `enums/` | `ReservationStatus.java` |
| **에러 종류 확인** | `exception/` | `GlobalExceptionHandler.java` |
| **데이터베이스 구조 이해** | `entity/` | `FacilityReservationTbl.java` |
| **비즈니스 로직 이해** | `service/` | `FacilityReservationService.java` |

---

## 📁 15개 폴더 한눈에 보기

```
backend/BlueCrab/src/main/java/BlueCrab/com/example/
│
├── 📁 controller/     ⭐⭐⭐ [28개] URL 매핑, HTTP 메서드
├── 📁 dto/            ⭐⭐⭐ [42개] JSON 요청/응답 형식
├── 📁 enums/          ⭐⭐  상태 코드, 타입 정의
├── 📁 entity/         ⭐⭐  [12개] 데이터베이스 테이블 구조
├── 📁 service/        ⭐   [26개] 비즈니스 로직 구현
├── 📁 exception/      ⭐   에러 타입, 에러 처리
├── 📁 repository/         JPA 쿼리 인터페이스
├── 📁 config/            [12개] 시스템 설정 (CORS, Security 등)
├── 📁 security/          JWT 필터, Spring Security
├── 📁 util/              유틸리티 (JWT 처리 등)
├── 📁 annotation/        커스텀 어노테이션 (@RateLimit 등)
├── 📁 interceptor/       HTTP 요청 전처리
├── 📁 scheduler/         배치 작업 (정기 실행)
├── 📁 initializer/       애플리케이션 초기화
└── 📁 model/             기타 모델 클래스
```

**⭐ 표시**: 프론트엔드 개발자가 자주 볼 폴더

---

## 🔍 핵심 폴더 상세 설명

### 1. controller/ - API 엔드포인트 (28개)

**기능별 분류**:

```
📌 인증/보안 (5개)
├── AuthController.java                    # /api/auth (로그인, 로그아웃)
├── AdminController.java                   # /api/admin (관리자 로그인)
├── AdminEmailAuthController.java          # /api/admin/email (2단계 인증)
├── PasswordResetController.java           # /api/auth/password-reset
└── FindIdController.java                  # /api/account (아이디 찾기)

📝 게시판 (7개)
├── BoardController.java                   # /api/boards (조회)
├── BoardCreateController.java             # /api/boards/create
├── BoardUpdateController.java             # /api/boards/update
├── BoardAttachmentUploadController.java   # /api/boards/upload
├── BoardAttachmentDownloadController.java # /api/boards/attachment/download
├── BoardAttachmentDeleteController.java   # /api/boards/attachment/delete
└── BoardStatisticsController.java         # /api/boards/statistics

🏢 시설/열람실 (4개)
├── FacilityController.java                # /api/facilities
├── FacilityReservationController.java     # /api/reservations
├── AdminFacilityReservationController.java # /api/admin/reservations
└── ReadingRoomController.java             # /api/reading-room

🔔 푸시 알림 (2개)
├── FcmTokenController.java                # /api/fcm
└── PushNotificationController.java        # /api/push

👤 사용자/프로필 (2개)
├── UserController.java                    # /api/users
└── ProfileController.java                 # /api/profile

🛠️ 시스템 (8개)
├── ApiController.java                     # /api (상태 체크)
├── HomeController.java                    # / (홈페이지)
├── DatabaseController.java                # /api/database
├── DatabaseTestController.java            # /api/database/test
├── LogMonitorController.java              # /admin/logs
├── MetricsController.java                 # /admin/metrics
├── FirebaseTestController.java            # /api/test/fcm
└── MailAuthCheckController.java           # /api/mail
```

**Controller 파일 보는 법**:
```java
@RestController
@RequestMapping("/api/reservations")  // ← 기본 URL
public class FacilityReservationController {
    
    @PostMapping  // ← POST /api/reservations
    public ResponseEntity<ApiResponse<ReservationDto>> createReservation(
        @RequestBody ReservationCreateRequestDto request) {  // ← 요청 타입
        // ...
        return ResponseEntity.ok(ApiResponse.success(message, reservation));  // ← 응답 타입
    }
    
    @PostMapping("/my")  // ← POST /api/reservations/my
    public ResponseEntity<ApiResponse<List<ReservationDto>>> getMyReservations() {
        // ...
    }
}
```

---

### 2. dto/ - 데이터 전송 객체 (42개)

**파일명 규칙**:
- `*Request.java` / `*RequestDto.java` → 프론트엔드 → 백엔드 (요청)
- `*Response.java` / `*ResponseDto.java` → 백엔드 → 프론트엔드 (응답)
- `*Dto.java` → 양방향 또는 응답용

**주요 DTO 파일**:

```
🔐 인증 관련
LoginRequest.java              # 로그인 요청 { username, password }
LoginResponse.java             # 로그인 응답 { accessToken, refreshToken, user }
RefreshTokenRequest.java       # 토큰 갱신 요청
LogoutRequest.java             # 로그아웃 요청

🏢 시설 예약
ReservationCreateRequestDto.java   # 예약 생성 요청
ReservationDto.java                # 예약 정보 응답
FacilityDto.java                   # 시설 정보
FacilityAvailabilityDto.java       # 시설 가용성

📚 열람실
SeatReserveRequestDto.java         # 좌석 예약 요청
SeatReserveResponseDto.java        # 좌석 예약 응답
ReadingSeatDto.java                # 좌석 정보
ReadingRoomStatusDto.java          # 열람실 현황

🔔 푸시 알림
FcmRegisterRequest.java            # FCM 토큰 등록 요청
FcmRegisterResponse.java           # FCM 토큰 등록 응답
FcmSendRequest.java                # 푸시 알림 전송 요청
FcmBroadcastRequest.java           # 전체 푸시 알림 요청

📝 게시판
(게시판 DTO는 entity의 BoardTbl을 직접 사용)

🔧 공통
ApiResponse.java                   # 모든 API의 공통 응답 래퍼
```

**DTO 파일 보는 법**:
```java
// ReservationCreateRequestDto.java (요청 DTO)
public class ReservationCreateRequestDto {
    @NotNull(message = "시설 ID는 필수입니다.")  // ← 필수 필드
    private Integer facilityIdx;
    
    @NotNull
    @Future(message = "시작 시간은 미래여야 합니다.")  // ← 유효성 검증
    private LocalDateTime startTime;
    
    private String purpose;  // ← 선택 필드 (어노테이션 없음)
    
    // getter, setter...
}
```

**프론트엔드에서 TypeScript로 변환**:
```typescript
// TypeScript 인터페이스
interface ReservationCreateRequest {
  facilityIdx: number;        // Integer → number
  startTime: string;          // LocalDateTime → ISO 8601 string
  endTime: string;
  partySize?: number;         // 선택 필드는 ? 표시
  purpose?: string;
  requestedEquipment?: string;
}

// 실제 사용
const requestData: ReservationCreateRequest = {
  facilityIdx: 5,
  startTime: "2025-10-15T14:00:00",
  endTime: "2025-10-15T16:00:00",
  purpose: "학습 세미나"
};
```

---

### 3. enums/ - 열거형 타입

**주요 Enum 파일**:

```java
ReservationStatus.java        # 예약 상태
  - PENDING      # 대기중
  - APPROVED     # 승인됨
  - REJECTED     # 반려됨
  - CANCELLED    # 취소됨
  - COMPLETED    # 완료됨

BoardCode.java               # 게시판 코드
  - 0: 학교공지
  - 1: 학사공지
  - 2: 학과공지
  - 3: 교수공지

FacilityType.java            # 시설 타입
  - SEMINAR_ROOM   # 세미나실
  - CONFERENCE     # 회의실
  - LAB            # 실습실

SeatStatus.java              # 좌석 상태
  - AVAILABLE      # 이용 가능
  - OCCUPIED       # 사용 중
  - MAINTENANCE    # 유지보수
```

**프론트엔드 활용법**:
```javascript
// React에서 드롭다운 만들기
const ReservationStatusFilter = () => {
  const statusOptions = [
    { value: 'PENDING', label: '대기중', color: 'yellow' },
    { value: 'APPROVED', label: '승인됨', color: 'green' },
    { value: 'REJECTED', label: '반려됨', color: 'red' },
    { value: 'CANCELLED', label: '취소됨', color: 'gray' },
    { value: 'COMPLETED', label: '완료됨', color: 'blue' }
  ];
  
  return (
    <Select>
      {statusOptions.map(option => (
        <Option key={option.value} value={option.value}>
          <Badge color={option.color}>{option.label}</Badge>
        </Option>
      ))}
    </Select>
  );
};
```

---

### 4. entity/ - 데이터베이스 테이블 (12개)

**주요 Entity 파일**:

```
UserTbl.java                  # 사용자 테이블
├── user_idx (PK)
├── user_code
├── user_email
├── user_name
└── user_password

BoardTbl.java                 # 게시판 테이블
├── board_idx (PK)
├── board_code
├── board_title
├── board_body
└── board_writer

BoardAttachmentTbl.java       # 첨부파일 테이블
├── file_idx (PK)
├── board_idx (FK)
└── file_path

FacilityTbl.java             # 시설 테이블
├── facility_idx (PK)
├── facility_name
└── facility_type

FacilityReservationTbl.java  # 시설 예약 테이블
├── reservation_idx (PK)
├── facility_idx (FK)
├── user_code (FK)
├── start_time
├── end_time
└── status

ReadingSeat.java             # 열람실 좌석 테이블
├── seat_id (PK)
├── room_number
├── seat_number
├── user_code (FK)
└── status

FcmToken.java                # FCM 토큰 테이블
├── token_id (PK)
├── user_code (FK)
├── fcm_token
└── device_type

AdminTbl.java                # 관리자 테이블
├── admin_idx (PK)
├── admin_id
└── admin_password
```

**Entity 관계도**:
```
UserTbl (사용자)
  ↓ (1:N)
FacilityReservationTbl (예약)
  ↓ (N:1)
FacilityTbl (시설)

UserTbl (사용자)
  ↓ (1:N)
BoardTbl (게시글)
  ↓ (1:N)
BoardAttachmentTbl (첨부파일)

UserTbl (사용자)
  ↓ (1:1)
ReadingSeat (열람실 좌석)

UserTbl (사용자)
  ↓ (1:N)
FcmToken (푸시 토큰)
```

**프론트엔드 관점**:
- Entity는 직접 받지 않고 **DTO로 변환된 데이터**를 받습니다
- 하지만 데이터 구조와 관계를 이해하는 데 유용합니다
- 예: 예약 생성 시 `facilityIdx`와 `userCode`가 필요한 이유 이해

---

### 5. exception/ - 예외 처리

**커스텀 예외 클래스**:

```java
NotFoundException.java            # 404 - 리소스를 찾을 수 없음
├── "사용자를 찾을 수 없습니다."
├── "시설을 찾을 수 없습니다."
└── "예약을 찾을 수 없습니다."

UnauthorizedException.java        # 401 - 인증 실패
├── "토큰이 유효하지 않습니다."
├── "로그인이 필요합니다."
└── "토큰이 만료되었습니다."

ForbiddenException.java           # 403 - 권한 없음
├── "관리자만 접근 가능합니다."
└── "본인의 예약만 취소할 수 있습니다."

BusinessException.java            # 409 - 비즈니스 규칙 위반
├── "해당 시간대에 이미 예약이 존재합니다."
├── "이미 좌석을 사용 중입니다."
└── "시설 예약은 2주 전부터 가능합니다."

ValidationException.java          # 400 - 유효성 검증 실패
├── "시작 시간은 종료 시간보다 빨라야 합니다."
└── "필수 입력 항목이 누락되었습니다."

RateLimitException.java           # 429 - API 호출 제한 초과
└── "요청이 너무 많습니다. 잠시 후 다시 시도해주세요."
```

**GlobalExceptionHandler.java**:
```java
@RestControllerAdvice
public class GlobalExceptionHandler {
    
    @ExceptionHandler(NotFoundException.class)
    public ResponseEntity<ApiResponse<Void>> handleNotFound(NotFoundException e) {
        return ResponseEntity
            .status(HttpStatus.NOT_FOUND)
            .body(ApiResponse.error(e.getMessage()));
    }
    
    @ExceptionHandler(UnauthorizedException.class)
    public ResponseEntity<ApiResponse<Void>> handleUnauthorized(UnauthorizedException e) {
        return ResponseEntity
            .status(HttpStatus.UNAUTHORIZED)
            .body(ApiResponse.error(e.getMessage()));
    }
    
    // ... 기타 예외 처리
}
```

**프론트엔드 에러 처리**:
```javascript
try {
  const response = await createReservation(data);
  alert(response.message);
} catch (error) {
  // HTTP 상태 코드별 처리
  switch (error.response?.status) {
    case 400:
      alert('입력값을 확인해주세요.');
      break;
    case 401:
      alert('로그인이 필요합니다.');
      navigate('/login');
      break;
    case 403:
      alert('권한이 없습니다.');
      break;
    case 404:
      alert('요청한 리소스를 찾을 수 없습니다.');
      break;
    case 409:
      alert(error.response.data.message);  // 비즈니스 에러는 메시지 표시
      break;
    case 429:
      alert('요청이 너무 많습니다. 잠시 후 다시 시도해주세요.');
      break;
    case 500:
      alert('서버 오류가 발생했습니다.');
      break;
    default:
      alert('알 수 없는 오류가 발생했습니다.');
  }
}
```

---

## 🎓 실전 가이드: API 연동 4단계

### Step 1: Controller에서 API 정보 확인

```java
// FacilityReservationController.java
@RestController
@RequestMapping("/api/reservations")
public class FacilityReservationController {
    
    @PostMapping  // ✅ 확인: POST /api/reservations
    public ResponseEntity<ApiResponse<ReservationDto>> createReservation(
            @Valid @RequestBody ReservationCreateRequestDto request,  // ✅ 요청 타입
            HttpServletRequest httpRequest) {
        // ...
        return ResponseEntity.ok(ApiResponse.success(message, reservation));  // ✅ 응답 타입
    }
}
```

**확인사항**:
- ✅ URL: `/api/reservations`
- ✅ HTTP 메서드: `POST`
- ✅ 요청 DTO: `ReservationCreateRequestDto`
- ✅ 응답 DTO: `ApiResponse<ReservationDto>`
- ✅ 인증 필요 여부: `HttpServletRequest`가 있으면 인증 필요

---

### Step 2: dto/ 폴더에서 요청 형식 확인

```java
// ReservationCreateRequestDto.java
public class ReservationCreateRequestDto {
    @NotNull  // ✅ 필수 필드
    private Integer facilityIdx;
    
    @NotNull
    @Future
    private LocalDateTime startTime;
    
    @NotNull
    private LocalDateTime endTime;
    
    private Integer partySize;  // ❌ 필수 아님 (어노테이션 없음)
    private String purpose;
    private String requestedEquipment;
}
```

**확인사항**:
- ✅ 필수 필드: `@NotNull` 어노테이션 확인
- ✅ 유효성 검증: `@Future`, `@Email`, `@Size` 등 확인
- ✅ 타입: `Integer` → `number`, `LocalDateTime` → `string`

---

### Step 3: dto/ 폴더에서 응답 형식 확인

```java
// ReservationDto.java
public class ReservationDto {
    private Integer reservationIdx;
    private String facilityName;
    private String userName;
    private LocalDateTime startTime;
    private LocalDateTime endTime;
    private ReservationStatus status;  // ✅ Enum 타입
    private LocalDateTime createdAt;
}
```

---

### Step 4: 프론트엔드 코드 작성

```javascript
// reservationAPI.js
export const createReservation = async (reservationData) => {
  const token = localStorage.getItem('accessToken');
  
  const response = await fetch(
    'https://bluecrab.chickenkiller.com/BlueCrab-1.0.0/api/reservations',
    {
      method: 'POST',  // Step 1에서 확인
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${token}`  // 인증 필요
      },
      body: JSON.stringify({
        // Step 2에서 확인한 필드들
        facilityIdx: reservationData.facilityId,
        startTime: reservationData.startTime,  // ISO 8601 형식
        endTime: reservationData.endTime,
        partySize: reservationData.partySize,
        purpose: reservationData.purpose,
        requestedEquipment: reservationData.equipment
      })
    }
  );
  
  const data = await response.json();
  
  // ApiResponse<ReservationDto> 형식
  if (data.success) {
    return data.data;  // Step 3에서 확인한 ReservationDto
  } else {
    throw new Error(data.message);
  }
};

// React 컴포넌트에서 사용
const handleSubmit = async (formData) => {
  try {
    const reservation = await createReservation(formData);
    
    alert(`예약이 완료되었습니다.\n예약 번호: ${reservation.reservationIdx}`);
    navigate('/reservations/my');
    
  } catch (error) {
    alert(`예약 실패: ${error.message}`);
  }
};
```

---

## 📚 추가 참고 자료

### 각 폴더의 상세 문서
- [`프론트엔드를_위한_백엔드_동작방식_설명계획.md`](./프론트엔드를_위한_백엔드_동작방식_설명계획.md) - 전체 동작 원리
- [`백엔드_최신화_확인_및_업데이트_필요사항.md`](./백엔드_최신화_확인_및_업데이트_필요사항.md) - 최신 변경사항
- [`api-documentation.md`](./api-endpoints/api-documentation.md) - API 엔드포인트 목록

### 폴더별 파일 개수
```
controller/     28개
service/        26개
dto/            42개
entity/         12개
config/         12개
enums/          다수
exception/      다수
repository/     다수
util/           다수
```

---

**작성자**: GitHub Copilot  
**최종 수정일**: 2025-10-10  
**버전**: 1.0
