# Blue Crab LMS - 전체 시스템 아키텍처 다이어그램

## 1. 레이어드 아키텍처 (Layered Architecture)

### 1.1 4계층 구조

```mermaid
graph TB
    subgraph "Presentation Layer"
        A[Controller Layer]
        A1[REST API Endpoints]
        A2[Request/Response DTO]
        A3[Input Validation]
    end

    subgraph "Business Logic Layer"
        B[Service Layer]
        B1[Business Rules]
        B2[Transaction Management]
        B3[Domain Logic]
    end

    subgraph "Persistence Layer"
        C[Repository Layer]
        C1[JPA Repositories]
        C2[Custom Queries]
        C3[Entity Management]
    end

    subgraph "Database Layer"
        D[(MariaDB)]
        D1[(Redis Cache)]
        D2[(MinIO Storage)]
    end

    A --> B
    A1 --> B1
    A2 --> B2
    A3 --> B3
    B --> C
    B1 --> C1
    B2 --> C2
    B3 --> C3
    C --> D
    C1 --> D
    C2 --> D1
    C3 --> D2

    style A fill:#e1f5ff
    style B fill:#fff3e0
    style C fill:#f3e5f5
    style D fill:#e8f5e9
```

### 1.2 배포 아키텍처 (Deployment Architecture)

```mermaid
graph TB
    subgraph "Client Tier"
        WEB[Web Browser<br/>React 19.1.1]
        MOBILE[Mobile App<br/>PWA]
    end

    subgraph "Web Tier"
        LB[Load Balancer<br/>Optional]
        TOMCAT[Apache Tomcat 9.x<br/>WAR Deployment<br/>Context: /BlueCrab-1.0.0]
    end

    subgraph "Application Tier"
        SPRING[Spring Boot App<br/>eGovFrame 4.3.0]

        subgraph "Security"
            SEC[Spring Security<br/>JWT Filter]
        end

        subgraph "Core Services"
            LECTURE[Lecture Service]
            USER[User Service]
            FACILITY[Facility Service]
            BOARD[Board Service]
        end

        subgraph "Support Services"
            EMAIL[Email Service]
            NOTI[Notification Service]
            CACHE[Cache Service]
            FILE[File Service]
        end
    end

    subgraph "Data Tier"
        DB[(MariaDB<br/>Port: 55511<br/>Pool: HikariCP 20)]
        REDIS[(Redis 6.x<br/>Port: 6379<br/>Cache & Session)]
        MINIO[(MinIO<br/>Port: 9000<br/>Object Storage)]
    end

    subgraph "External Services"
        FCM[Firebase FCM<br/>Push Notification]
        GMAIL[Gmail SMTP<br/>Port: 587]
    end

    WEB --> LB
    MOBILE --> LB
    LB --> TOMCAT
    TOMCAT --> SPRING
    SPRING --> SEC
    SEC --> LECTURE
    SEC --> USER
    SEC --> FACILITY
    SEC --> BOARD

    LECTURE --> DB
    USER --> DB
    FACILITY --> DB
    BOARD --> DB

    EMAIL --> GMAIL
    NOTI --> FCM
    CACHE --> REDIS
    FILE --> MINIO

    LECTURE --> CACHE
    USER --> CACHE
    BOARD --> FILE

    style WEB fill:#4fc3f7
    style MOBILE fill:#4fc3f7
    style TOMCAT fill:#ff9800
    style SPRING fill:#66bb6a
    style DB fill:#ef5350
    style REDIS fill:#ec407a
    style MINIO fill:#ab47bc
    style FCM fill:#ffa726
    style GMAIL fill:#42a5f5
```

### 1.3 도메인 중심 패키지 구조

```mermaid
graph TB
    subgraph "BlueCrab.com.example"

        subgraph "Core Domain"
            USER_PKG[User Domain]
            ADMIN_PKG[Admin Domain]
            AUTH_PKG[Auth Domain]
        end

        subgraph "Lecture Domain"
            LECTURE_CTRL[LectureController]
            LECTURE_SVC[LectureService]
            LECTURE_REPO[LectureRepository]
            LECTURE_ENT[LecTbl Entity]

            ENROLL_CTRL[EnrollmentController]
            ENROLL_SVC[EnrollmentService]
            ENROLL_REPO[EnrollmentRepository]
            ENROLL_ENT[EnrollmentExtendedTbl]

            ASSIGN_CTRL[AssignmentController]
            ASSIGN_SVC[AssignmentService]
            ASSIGN_ENT[AssignmentExtendedTbl]

            ATTEND_CTRL[AttendanceController]
            ATTEND_SVC[AttendanceService]
            ATTEND_ENT[AttendanceRequestTbl]
        end

        subgraph "Board Domain"
            BOARD_CTRL[BoardController]
            BOARD_SVC[BoardService]
            BOARD_REPO[BoardRepository]
            BOARD_ENT[BoardTbl Entity]

            ATTACH_ENT[Attachment Entity]
        end

        subgraph "Facility Domain"
            FAC_CTRL[FacilityController]
            FAC_SVC[FacilityService]
            FAC_REPO[FacilityRepository]
            FAC_ENT[FacilityTbl]

            RES_CTRL[ReservationController]
            RES_SVC[ReservationService]
            RES_ENT[FacilityReservationTbl]

            READING_CTRL[ReadingRoomController]
            READING_SVC[ReadingRoomService]
            READING_ENT[ReadingSeat]
        end

        subgraph "Support Services"
            EMAIL_SVC[EmailService]
            REDIS_SVC[RedisService]
            MINIO_SVC[MinIOService]
            FCM_SVC[FirebasePushService]
            NOTI_SVC[NotificationService]
        end

        subgraph "Security Layer"
            SEC_CONFIG[SecurityConfig]
            JWT_FILTER[JwtAuthenticationFilter]
            JWT_UTIL[JwtUtil]
            USER_DETAILS[CustomUserDetailsService]
        end

        subgraph "Configuration"
            APP_CONFIG[AppConfig]
            WS_CONFIG[WebSocketConfig]
            REDIS_CONFIG[RedisConfig]
        end
    end

    LECTURE_CTRL --> LECTURE_SVC
    LECTURE_SVC --> LECTURE_REPO
    LECTURE_REPO --> LECTURE_ENT

    ENROLL_CTRL --> ENROLL_SVC
    ENROLL_SVC --> ENROLL_REPO
    ENROLL_REPO --> ENROLL_ENT

    ASSIGN_CTRL --> ASSIGN_SVC
    ASSIGN_SVC --> ENROLL_REPO

    ATTEND_CTRL --> ATTEND_SVC
    ATTEND_SVC --> ATTEND_ENT

    BOARD_CTRL --> BOARD_SVC
    BOARD_SVC --> BOARD_REPO
    BOARD_REPO --> BOARD_ENT
    BOARD_SVC --> MINIO_SVC

    FAC_CTRL --> FAC_SVC
    FAC_SVC --> FAC_REPO

    RES_CTRL --> RES_SVC
    RES_SVC --> RES_ENT

    READING_CTRL --> READING_SVC
    READING_SVC --> READING_ENT

    LECTURE_SVC --> EMAIL_SVC
    ENROLL_SVC --> NOTI_SVC
    READING_SVC --> FCM_SVC

    JWT_FILTER --> JWT_UTIL
    JWT_FILTER --> USER_DETAILS

    style LECTURE_CTRL fill:#bbdefb
    style LECTURE_SVC fill:#90caf9
    style LECTURE_REPO fill:#64b5f6
    style LECTURE_ENT fill:#42a5f5

    style BOARD_CTRL fill:#c8e6c9
    style BOARD_SVC fill:#a5d6a7
    style BOARD_REPO fill:#81c784
    style BOARD_ENT fill:#66bb6a

    style FAC_CTRL fill:#ffccbc
    style FAC_SVC fill:#ffab91
    style FAC_REPO fill:#ff8a65
    style FAC_ENT fill:#ff7043
```

### 1.4 클라이언트-서버 통신 아키텍처

```mermaid
graph LR
    subgraph "Client Side"
        REACT[React Frontend<br/>Port: 3000]
        PWA[PWA Service Worker<br/>Offline Support]
        FCM_CLIENT[FCM Client<br/>Push Receiver]
    end

    subgraph "Network"
        HTTPS[HTTPS/WSS]
    end

    subgraph "Server Side"
        subgraph "API Gateway Layer"
            REST[REST API<br/>/api/**]
            WS[WebSocket<br/>/ws/**]
        end

        subgraph "Security Filter"
            CORS[CORS Filter]
            JWT_AUTH[JWT Authentication]
            AUTHZ[Authorization]
        end

        subgraph "Business Logic"
            CONTROLLERS[Controllers]
            SERVICES[Services]
        end

        subgraph "Data Access"
            REPOS[Repositories]
            CACHE_LAYER[Cache Layer]
        end

        subgraph "Storage"
            MARIADB[(MariaDB)]
            REDIS_CACHE[(Redis)]
            MINIO_STORAGE[(MinIO)]
        end
    end

    subgraph "External"
        FIREBASE[Firebase Cloud<br/>FCM Server]
        SMTP[Gmail SMTP<br/>Email Server]
    end

    REACT -->|HTTP/HTTPS| HTTPS
    PWA -->|Background Sync| HTTPS
    FCM_CLIENT -->|Push Subscribe| FIREBASE

    HTTPS --> REST
    HTTPS --> WS

    REST --> CORS
    WS --> CORS

    CORS --> JWT_AUTH
    JWT_AUTH --> AUTHZ

    AUTHZ --> CONTROLLERS
    CONTROLLERS --> SERVICES

    SERVICES --> REPOS
    SERVICES --> CACHE_LAYER

    REPOS --> MARIADB
    CACHE_LAYER --> REDIS_CACHE
    SERVICES --> MINIO_STORAGE

    SERVICES -->|Send Email| SMTP
    SERVICES -->|Send Push| FIREBASE

    FIREBASE -->|Push Notification| FCM_CLIENT

    style REACT fill:#61dafb
    style PWA fill:#5f9ea0
    style REST fill:#4caf50
    style WS fill:#ff9800
    style JWT_AUTH fill:#f44336
    style MARIADB fill:#00758f
    style REDIS_CACHE fill:#dc382d
    style MINIO_STORAGE fill:#c72c48
    style FIREBASE fill:#ffca28
```

### 1.5 서비스 간 의존성 다이어그램

```mermaid
graph TB
    subgraph "Presentation Controllers"
        LECTURE_C[LectureController]
        ENROLL_C[EnrollmentController]
        ASSIGN_C[AssignmentController]
        ATTEND_C[AttendanceController]
        BOARD_C[BoardController]
        FAC_C[FacilityController]
        USER_C[UserController]
        AUTH_C[AuthController]
    end

    subgraph "Business Services"
        LECTURE_S[LectureService]
        ENROLL_S[EnrollmentService]
        ASSIGN_S[AssignmentService]
        ATTEND_S[AttendanceService]
        GRADE_S[GradeManagementService]
        BOARD_S[BoardService]
        FAC_S[FacilityService]
        USER_S[UserTblService]
        AUTH_S[AuthService]
    end

    subgraph "Infrastructure Services"
        EMAIL_S[EmailService]
        NOTI_S[NotificationService]
        FCM_S[FirebasePushService]
        REDIS_S[RedisService]
        MINIO_S[MinIOService]
        IMAGE_S[ImageCacheService]
        TOKEN_S[TokenBlacklistService]
    end

    subgraph "Data Repositories"
        LECTURE_R[(LectureRepository)]
        ENROLL_R[(EnrollmentRepository)]
        ASSIGN_R[(AssignmentRepository)]
        USER_R[(UserTblRepository)]
        BOARD_R[(BoardRepository)]
        FAC_R[(FacilityRepository)]
    end

    LECTURE_C --> LECTURE_S
    ENROLL_C --> ENROLL_S
    ASSIGN_C --> ASSIGN_S
    ATTEND_C --> ATTEND_S
    BOARD_C --> BOARD_S
    FAC_C --> FAC_S
    USER_C --> USER_S
    AUTH_C --> AUTH_S

    LECTURE_S --> LECTURE_R
    ENROLL_S --> ENROLL_R
    ENROLL_S --> LECTURE_R
    ASSIGN_S --> ASSIGN_R
    ASSIGN_S --> ENROLL_R
    ASSIGN_S --> GRADE_S
    ATTEND_S --> ENROLL_R
    GRADE_S --> ENROLL_R
    GRADE_S --> ASSIGN_S
    BOARD_S --> BOARD_R
    FAC_S --> FAC_R
    USER_S --> USER_R
    AUTH_S --> USER_R

    LECTURE_S --> NOTI_S
    ENROLL_S --> NOTI_S
    ASSIGN_S --> EMAIL_S
    ATTEND_S --> EMAIL_S
    BOARD_S --> MINIO_S
    FAC_S --> NOTI_S
    USER_S --> IMAGE_S
    AUTH_S --> REDIS_S
    AUTH_S --> TOKEN_S

    NOTI_S --> FCM_S
    NOTI_S --> EMAIL_S
    IMAGE_S --> REDIS_S
    IMAGE_S --> MINIO_S
    TOKEN_S --> REDIS_S

    style LECTURE_C fill:#bbdefb
    style ENROLL_C fill:#bbdefb
    style ASSIGN_C fill:#bbdefb
    style LECTURE_S fill:#90caf9
    style ENROLL_S fill:#90caf9
    style ASSIGN_S fill:#90caf9
    style GRADE_S fill:#90caf9
    style EMAIL_S fill:#ffccbc
    style NOTI_S fill:#ffccbc
    style FCM_S fill:#ffccbc
    style LECTURE_R fill:#c8e6c9
    style ENROLL_R fill:#c8e6c9
```

### 1.6 기술 스택 레이어 다이어그램

```mermaid
graph TB
    subgraph "Client Layer"
        CLIENT_TECH[React 19.1.1<br/>Vite<br/>PWA<br/>Firebase SDK]
    end

    subgraph "API Gateway Layer"
        GATEWAY_TECH[Apache Tomcat 9.x<br/>Context Path: /BlueCrab-1.0.0]
    end

    subgraph "Framework Layer"
        FRAMEWORK_TECH[eGovFrame Boot 4.3.0<br/>Spring Boot 2.7.x<br/>Spring Framework 5.3.37]
    end

    subgraph "Security Layer"
        SECURITY_TECH[Spring Security 5.7.x<br/>JWT jjwt 0.12.6<br/>SHA-256 Custom Encoder]
    end

    subgraph "Business Layer"
        BUSINESS_TECH[Service Layer<br/>Transaction Management<br/>@Async Support]
    end

    subgraph "Persistence Layer"
        PERSISTENCE_TECH[Spring Data JPA<br/>Hibernate 5.6.15<br/>HikariCP Connection Pool]
    end

    subgraph "Database Layer"
        DATABASE_TECH[MariaDB 10.x<br/>Redis 6.x<br/>MinIO 8.5.2]
    end

    subgraph "Integration Layer"
        INTEGRATION_TECH[WebSocket STOMP<br/>Firebase Admin SDK 9.7.0<br/>Spring Mail SMTP]
    end

    subgraph "Utility Layer"
        UTILITY_TECH[Lombok 1.18.34<br/>Thymeleaf<br/>DevTools]
    end

    CLIENT_TECH --> GATEWAY_TECH
    GATEWAY_TECH --> FRAMEWORK_TECH
    FRAMEWORK_TECH --> SECURITY_TECH
    SECURITY_TECH --> BUSINESS_TECH
    BUSINESS_TECH --> PERSISTENCE_TECH
    PERSISTENCE_TECH --> DATABASE_TECH
    BUSINESS_TECH --> INTEGRATION_TECH
    FRAMEWORK_TECH --> UTILITY_TECH

    style CLIENT_TECH fill:#e1f5fe
    style GATEWAY_TECH fill:#fff3e0
    style FRAMEWORK_TECH fill:#e8f5e9
    style SECURITY_TECH fill:#fce4ec
    style BUSINESS_TECH fill:#f3e5f5
    style PERSISTENCE_TECH fill:#e0f2f1
    style DATABASE_TECH fill:#fff9c4
    style INTEGRATION_TECH fill:#fce4ec
    style UTILITY_TECH fill:#f1f8e9
```

### 1.7 실제 인프라 구성 (Simple Version - PPT 추천!)

```mermaid
graph TB
    subgraph "개발 환경"
        DEV[프론트엔드 테스트 서버<br/>태준님 노트북 Linux<br/>빠른 테스트용]
    end

    subgraph "운영 환경"
        subgraph "팀장님 NAS 서버 (운영)"
            FE[React Frontend<br/>프로덕션]
            DB[(MariaDB)]
        end

        subgraph "본인 백엔드 서버"
            BE[Spring Boot<br/>Tomcat]
            CACHE[(Redis)]
            FILE[(MinIO)]
        end
    end

    DEV -.->|테스트 완료 후 배포| FE
    FE -->|API 호출| BE
    DEV -->|개발 중 API 호출| BE
    BE -->|데이터 조회/저장| DB
    BE -->|캐싱| CACHE
    BE -->|파일 저장| FILE

    style DEV fill:#fff9c4,stroke:#f57f17,stroke-width:2px,stroke-dasharray: 5 5
    style FE fill:#4fc3f7
    style DB fill:#ef5350
    style BE fill:#66bb6a
    style CACHE fill:#ec407a
    style FILE fill:#ab47bc
```

### 1.7-상세 실제 물리 서버 구성 (Detailed Version)

```mermaid
graph TB
    subgraph "사용자"
        USERS[사용자<br/>Web Browser / Mobile]
    end

    subgraph "팀장님 NAS 서버"
        direction TB
        NAS_HEADER["NAS Server (팀장님)"]

        subgraph "Frontend Server"
            REACT_SERVER[React Frontend<br/>Vite Build<br/>Port: 3000]
        end

        subgraph "Database Server"
            MARIADB_SERVER[(MariaDB<br/>Port: 55511<br/>Database: blue_crab<br/>User: KDT_project)]
        end

        NAS_HEADER -.->|Contains| REACT_SERVER
        NAS_HEADER -.->|Contains| MARIADB_SERVER
    end

    subgraph "본인 백엔드 서버"
        direction TB
        BACKEND_HEADER["Backend Server (본인)"]

        subgraph "Application Server"
            TOMCAT_SERVER[Apache Tomcat 9.x<br/>Spring Boot WAR<br/>Context: /BlueCrab-1.0.0<br/>Port: 8080]
        end

        subgraph "Cache Server"
            REDIS_SERVER[(Redis 6.x<br/>Port: 6379<br/>Token Storage<br/>Session Cache)]
        end

        subgraph "File Storage Server"
            MINIO_SERVER[(MinIO<br/>Port: 9000<br/>Object Storage<br/>Buckets: profile-img,<br/>board-attached,<br/>consultation-chats)]
        end

        BACKEND_HEADER -.->|Contains| TOMCAT_SERVER
        BACKEND_HEADER -.->|Contains| REDIS_SERVER
        BACKEND_HEADER -.->|Contains| MINIO_SERVER
    end

    subgraph "External Services"
        FIREBASE[Firebase Cloud<br/>FCM Push Notification]
        GMAIL[Gmail SMTP<br/>Email Service<br/>Port: 587]
    end

    USERS -->|HTTPS Request| REACT_SERVER
    REACT_SERVER -->|API Call<br/>REST/WebSocket| TOMCAT_SERVER

    TOMCAT_SERVER -->|DB Query<br/>jdbc:mariadb://121.165.24.26:55511| MARIADB_SERVER
    TOMCAT_SERVER -->|Cache R/W<br/>JWT Token Storage| REDIS_SERVER
    TOMCAT_SERVER -->|File Upload/Download<br/>MinIO SDK| MINIO_SERVER

    TOMCAT_SERVER -->|Send Email| GMAIL
    TOMCAT_SERVER -->|Send Push| FIREBASE
    FIREBASE -->|Push Notification| USERS

    style USERS fill:#e3f2fd
    style NAS_HEADER fill:#fff3e0,stroke:#ff6f00,stroke-width:3px
    style REACT_SERVER fill:#4fc3f7
    style MARIADB_SERVER fill:#ef5350
    style BACKEND_HEADER fill:#e8f5e9,stroke:#2e7d32,stroke-width:3px
    style TOMCAT_SERVER fill:#66bb6a
    style REDIS_SERVER fill:#ec407a
    style MINIO_SERVER fill:#ab47bc
    style FIREBASE fill:#ffca28
    style GMAIL fill:#42a5f5
```

### 1.8 서버 간 통신 상세 (Server Communication Details)

```mermaid
sequenceDiagram
    participant User as 사용자<br/>(Browser)
    participant Frontend as 프론트엔드 서버<br/>(팀장님 NAS)
    participant Backend as 백엔드 서버<br/>(본인 Tomcat)
    participant Redis as Redis<br/>(본인 서버)
    participant MinIO as MinIO<br/>(본인 서버)
    participant DB as MariaDB<br/>(팀장님 NAS)
    participant FCM as Firebase FCM<br/>(External)

    User->>Frontend: 1. 웹사이트 접속<br/>(HTTPS)
    Frontend-->>User: 2. React App 전달<br/>(HTML/JS/CSS)

    User->>Backend: 3. 로그인 요청<br/>POST /api/auth/login
    Backend->>DB: 4. 사용자 조회<br/>SELECT * FROM USER_TBL
    DB-->>Backend: 5. 사용자 정보 반환
    Backend->>Redis: 6. Refresh Token 저장<br/>SET token:userId
    Redis-->>Backend: 7. OK
    Backend-->>User: 8. JWT Token 반환<br/>{accessToken, refreshToken}

    User->>Backend: 9. 프로필 이미지 조회<br/>GET /api/profile/me<br/>Header: Authorization
    Backend->>Redis: 10. 이미지 캐시 확인<br/>GET cache:image:key

    alt 캐시 미스
        Backend->>MinIO: 11. 이미지 다운로드<br/>GET profile-img/key
        MinIO-->>Backend: 12. 이미지 데이터
        Backend->>Redis: 13. 캐시 저장<br/>SETEX cache:image:key
    end

    Backend-->>User: 14. 이미지 반환

    User->>Backend: 15. 게시글 작성<br/>POST /api/boards
    Backend->>MinIO: 16. 첨부파일 업로드<br/>PUT board-attached/file
    MinIO-->>Backend: 17. 업로드 완료
    Backend->>DB: 18. 게시글 저장<br/>INSERT INTO BOARD_TBL
    DB-->>Backend: 19. 저장 완료
    Backend->>FCM: 20. 알림 전송 요청
    FCM-->>User: 21. Push Notification
    Backend-->>User: 22. 성공 응답

    Note over User,FCM: 모든 통신은 네트워크를 통해<br/>서버 간 연결
```

### 1.9 서버 구성 요약표

| 서버 구분 | 담당자 | 구성 요소 | 역할 | 접속 정보 |
|---------|--------|-----------|------|----------|
| **NAS 서버** | 팀장님 | React Frontend | 사용자 UI 제공 | Port: 3000 |
| **NAS 서버** | 팀장님 | MariaDB | 데이터 영속성 저장 | 121.165.24.26:55511 |
| **백엔드 서버** | 본인 | Tomcat + Spring Boot | 비즈니스 로직 처리 | Port: 8080 |
| **백엔드 서버** | 본인 | Redis | 토큰/캐시 저장소 | 127.0.0.1:6379 |
| **백엔드 서버** | 본인 | MinIO | 파일 오브젝트 스토리지 | localhost:9000 |
| **외부 서비스** | - | Firebase FCM | Push 알림 | Cloud Service |
| **외부 서비스** | - | Gmail SMTP | 이메일 발송 | smtp.gmail.com:587 |

### 1.10 데이터 흐름 다이어그램 (Data Flow)

```mermaid
graph LR
    subgraph "팀장님 NAS 서버"
        FE[Frontend<br/>React App]
        DB[(MariaDB<br/>영구 데이터)]
    end

    subgraph "본인 백엔드 서버"
        BE[Backend<br/>Tomcat<br/>Spring Boot]
        REDIS[(Redis<br/>임시 데이터<br/>JWT/Cache)]
        MINIO[(MinIO<br/>파일 데이터<br/>Images/Attachments)]
    end

    FE -->|"① API 호출<br/>(REST/WS)"| BE
    BE -->|"② 데이터 조회/저장<br/>(JPA/JDBC)"| DB
    BE -->|"③ 토큰 저장/조회<br/>(Redis Command)"| REDIS
    BE -->|"④ 파일 업로드/다운로드<br/>(MinIO SDK)"| MINIO

    DB -->|"⑤ 데이터 반환"| BE
    REDIS -->|"⑥ 캐시 데이터"| BE
    MINIO -->|"⑦ 파일 데이터"| BE
    BE -->|"⑧ 응답<br/>(JSON/Binary)"| FE

    style FE fill:#4fc3f7
    style DB fill:#ef5350
    style BE fill:#66bb6a
    style REDIS fill:#ec407a
    style MINIO fill:#ab47bc
```

### 1.11 네트워크 토폴로지 (Network Topology)

```mermaid
graph TB
    INTERNET[인터넷<br/>Internet]

    subgraph "팀장님 네트워크 영역"
        NAS_NETWORK["NAS Server Network"]

        REACT_APP[React Frontend<br/>:3000]
        MARIADB_DB[(MariaDB<br/>:55511<br/>IP: 121.165.24.26)]
    end

    subgraph "본인 네트워크 영역"
        BACKEND_NETWORK["Backend Server Network"]

        TOMCAT_APP[Tomcat Server<br/>:8080<br/>Spring Boot WAR]
        REDIS_CACHE[(Redis<br/>:6379<br/>localhost)]
        MINIO_STORAGE[(MinIO<br/>:9000<br/>localhost)]
    end

    subgraph "클라우드 서비스"
        FIREBASE_CLOUD[Firebase FCM]
        GMAIL_CLOUD[Gmail SMTP<br/>:587]
    end

    INTERNET <-->|HTTPS| REACT_APP
    REACT_APP <-->|HTTPS/WSS<br/>Cross-Network| TOMCAT_APP
    TOMCAT_APP <-->|JDBC<br/>Cross-Network<br/>121.165.24.26:55511| MARIADB_DB

    TOMCAT_APP <-->|Redis Protocol<br/>Local Network| REDIS_CACHE
    TOMCAT_APP <-->|HTTP/S3 API<br/>Local Network| MINIO_STORAGE

    TOMCAT_APP <-->|HTTPS<br/>Internet| FIREBASE_CLOUD
    TOMCAT_APP <-->|SMTP/TLS<br/>Internet| GMAIL_CLOUD

    style INTERNET fill:#e0e0e0
    style NAS_NETWORK fill:#fff3e0,stroke:#ff6f00,stroke-width:2px
    style BACKEND_NETWORK fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px
    style REACT_APP fill:#4fc3f7
    style MARIADB_DB fill:#ef5350
    style TOMCAT_APP fill:#66bb6a
    style REDIS_CACHE fill:#ec407a
    style MINIO_STORAGE fill:#ab47bc
    style FIREBASE_CLOUD fill:#ffca28
    style GMAIL_CLOUD fill:#42a5f5
```

## 2. 다이어그램 사용 방법

### 2.1 Mermaid Live Editor로 PNG 변환

1. [Mermaid Live Editor](https://mermaid.live) 접속
2. 위 코드 복사 → 붙여넣기
3. 우측 "Actions" → "Download PNG" 또는 "Download SVG"
4. PPT에 이미지 삽입

### 2.2 VSCode에서 직접 렌더링

1. VSCode Extension 설치: `Markdown Preview Mermaid Support`
2. 이 파일을 VSCode에서 열기
3. `Ctrl+Shift+V` (Preview 모드)
4. 다이어그램 우클릭 → "Copy Image"
5. PPT에 붙여넣기

### 2.3 GitHub에서 확인

- 이 파일을 GitHub에 push하면 자동으로 렌더링됩니다

## 3. PPT 활용 가이드

### 슬라이드 1: 레이어드 아키텍처
- **다이어그램 1.1** 사용
- 4계층 구조 설명 (Presentation → Business → Persistence → Database)

### 슬라이드 2: 배포 아키텍처
- **다이어그램 1.2** 사용
- Client Tier → Web Tier → Application Tier → Data Tier 흐름
- 외부 서비스 연동 (Firebase, Gmail) 강조

### 슬라이드 3: 도메인 패키지 구조
- **다이어그램 1.3** 사용
- Lecture, Board, Facility 도메인 모듈화 설명
- Controller-Service-Repository-Entity 패턴

### 슬라이드 4: 통신 아키텍처
- **다이어그램 1.4** 사용
- REST API, WebSocket 통신
- 보안 필터 체인 (CORS → JWT → Authorization)

### 슬라이드 5: 서비스 의존성
- **다이어그램 1.5** 사용
- 서비스 간 호출 관계
- 순환 참조 (AssignmentService ↔ GradeManagementService)

### 슬라이드 6: 기술 스택
- **다이어그램 1.6** 사용
- 각 레이어별 사용 기술 명시
- eGovFrame → Spring Boot → JPA → MariaDB 흐름

---

**작성일**: 2025년 10월 30일
**버전**: 1.0.0
**다이어그램 도구**: Mermaid
