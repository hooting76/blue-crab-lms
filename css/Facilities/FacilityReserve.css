/* 기본 변수 / 베이스 */
:root{
  --bg:#f6f7fb; --panel:#ffffff; --text:#111827; --muted:#6b7280;
  --primary:#2f6bff; --primary-600:#1f54e8;
  --ok:#22c55e; --ok-bg:#e8f9ef;
  --wait:#f59e0b; --wait-bg:#fff7e6;
  --reject:#ef4444; --reject-bg:#ffecec;
  --done:#9ca3af; --done-bg:#eef0f4;
  --line:#e5e7eb; --slot-sel:#2563eb; --slot-busy:#fde2e2;
  --shadow:0 10px 24px rgba(0,0,0,.06); --radius:14px;
}

*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple SD Gothic Neo","Noto Sans KR","맑은 고딕",sans-serif;
}

/* 폼 요소 / 버튼 */
label{ display:block; font-weight:600; margin:12px 0 8px }
select, input[type="date"], input[type="number"], input[type="text"], textarea{
  width:100%; border:1px solid var(--line); background:#fff;
  padding:12px 14px; border-radius:10px; font-size:15px; outline:none;
}
textarea{ min-height:110px; resize:vertical }

.muted{ color:var(--muted); font-size:.9rem; margin-top:6px }
.error{
  color:#b91c1c; background:#ffecec; border:1px solid #ffc9c9;
  padding:10px 12px; border-radius:10px;
}

button[disabled]{ opacity:.6; cursor:not-allowed }
button.link{ background:none; border:none; color:var(--primary); padding:0; cursor:pointer; font-size:.95rem; margin-bottom:10px }
button.primary{
  background:var(--primary); color:#fff; border:none;
  padding:12px 16px; border-radius:10px; font-weight:700; cursor:pointer;
}
button.primary:hover{ background:var(--primary-600) }
button.danger{
  background:#ef4444; color:#fff; border:none;
  padding:12px 16px; border-radius:10px; font-weight:700; cursor:pointer;
}

/* 상태 배지(전역) */
.badge{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 12px; border-radius:999px; font-weight:700; font-size:.92rem;
}
.badge.ok{    background:var(--ok-bg);    color:#0f8339;  border:1px solid #b7f3cd }
.badge.wait{  background:var(--wait-bg);  color:#955a00;  border:1px solid #ffe29d }
.badge.reject{background:var(--reject-bg); color:#b91c1c;  border:1px solid #ffb7b7 }
.badge.done{  background:var(--done-bg);  color:#4b5563;  border:1px solid #d1d5db }

/* 내 예약 목록 카드 */
.resv-list{ list-style:none; padding:0; margin:14px 0 0; display:flex; flex-direction:column; gap:14px }
.resv-item{
  background:var(--panel); border:1px solid var(--line);
  border-radius:var(--radius); padding:16px 18px; box-shadow:0 2px 0 rgba(0,0,0,.02);
}
.resv-item .head{ display:flex; align-items:center; justify-content:space-between; gap:12px }
.resv-item .title{ font-size:20px; font-weight:800 }
.resv-item .row{ margin-top:10px; color:#111; font-weight:600 }
.resv-item details{
  background:#f9fafb; border:1px solid var(--line);
  border-radius:12px; padding:10px 12px;
}
.resv-item details summary{ cursor:pointer; list-style:none; font-weight:700 }
.resv-item details summary::-webkit-details-marker{ display:none }
.resv-item dl{
  display:grid; grid-template-columns:120px 1fr; row-gap:8px; column-gap:16px; margin:10px 0 0;
}
.resv-item dt{ color:var(--muted); font-weight:700 }
.resv-item dd{ margin:0 }

.info-box{
  background:#eef6ff; border:1px solid #cfe1ff; color:#1e3a8a;
  border-radius:12px; padding:12px; margin-top:12px;
}
.reject-box{
  background:var(--reject-bg); border:1px solid #ffb7b7; color:#9f1239;
  border-radius:12px; padding:12px; margin-top:12px;
}

/* 예약 모달 */
.resv-modal-backdrop{ position:fixed; inset:0; z-index:900; pointer-events:none; background:rgba(17,24,39,.45) }
.resv-dim{ position:fixed; inset:0; pointer-events:none }

.resv-modal{
  position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
  z-index:901; pointer-events:auto; width:min(860px,92vw); max-height:88vh; overflow:auto;
  background:var(--panel); border-radius:18px; box-shadow:var(--shadow); padding:18px 20px 16px;
}
.rm-head{ display:flex; align-items:center; justify-content:space-between; margin-bottom:6px }
.rm-head h3{ font-size:22px; font-weight:800; margin:6px 0 }
.rm-head .icon{ border:none; background:none; font-size:22px; cursor:pointer; color:#6b7280 }
.rm-actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:8px }

/* === Legend: 예약 상태 표시 (최종 단일 버전) === */
.resv-modal .legend{
  display:flex !important;
  justify-content:center;
  align-items:center;
  flex-wrap:wrap;
  column-gap:28px;
  row-gap:6px;
  margin:10px 0 16px;
  white-space:nowrap;
  line-height:1;
}

.resv-modal .legend .chip{
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding:0;
  border:0;
  background:none;
  position:static !important;
  font-size:14px;
  font-weight:600;
  color:#475569;
}

/* 색상칩 네모 */
.resv-modal .legend .chip::before{
  content:"";
  width:16px;
  height:16px;
  border-radius:4px;
  display:inline-block;
  flex-shrink:0;
}

/* 상태별 색상 */
.resv-modal .legend .chip.available::before{ background:#22c55e; } /* 예약 가능 */
.resv-modal .legend .chip.selected::before { background:#3b82f6; } /* 선택됨 */
.resv-modal .legend .chip.booked::before   { background:#fda4af; } /* 예약 불가 */

/* 과거 dot/아이콘 숨김 */
.resv-modal .legend :is(.dot, .legend-dot, i, b, span[class*="dot"]){
  display:none !important;
}

/* 모달 내부 시간 그리드 */
.resv-modal .grid{ display:grid; grid-template-columns:repeat(4,1fr); gap:12px }
@media (max-width:720px){ .resv-modal .grid{ grid-template-columns:repeat(2,1fr) } }

/* 시간 슬롯 버튼 */
.slot{
  background:#f0f5ff; border:1px solid #dbe5ff; color:#0b3570;
  border-radius:16px; padding:14px 12px; text-align:center; cursor:pointer;
  min-height:72px; display:flex; flex-direction:column; justify-content:center; gap:6px;
  transition:.15s transform,.15s box-shadow,.15s background;
  align-items:center;
}
.slot .h{ font-weight:800; font-size:18px; white-space:nowrap; line-height:1.2 }
.slot .sub{ font-size:.92rem; color:#1e3a8a; white-space:nowrap; line-height:1.2; word-break:keep-all }
.slot:hover{ transform:translateY(-1px); box-shadow:var(--shadow) }
.slot.selected{ background:var(--slot-sel); border-color:#1e40af; color:#fff }
.slot.selected .sub{ color:#eef2ff }
.slot.booked{ background:var(--slot-busy); border-color:#ffb7b7; color:#991b1b; cursor:not-allowed }
.slot.booked .sub{ color:#7f1d1d }

.warn{ margin-top:10px; background:var(--wait-bg); border:1px solid #ffe29d; color:#7a4b00; border-radius:10px; padding:10px 12px; font-weight:600 }
hr.sep{ border:none; height:1px; background:var(--line); margin:16px 0 }

/* 레이아웃 & 페이지네이션 */
.facility-page{ max-width:1280px; margin:0 auto; padding:16px 16px 48px }
.page-head{
  background:#eef3fb; border-radius:16px; padding:32px 28px;
  margin:12px auto 20px; max-width:1120px;
}
.page-head h2{ text-align:center; font-size:28px; margin:0 0 8px; color:#234; letter-spacing:.02em }
.page-head .sub{ text-align:center; color:#5c6773; margin:0 }

.content-grid{
  display:grid; grid-template-columns:1fr 360px; gap:24px; align-items:start;
  max-width:1120px; margin:0 auto;
}
@media (max-width:1024px){ .content-grid{ grid-template-columns:1fr; max-width:100% } }

.card-list{ display:grid; grid-template-columns:1fr; gap:14px }

.pager{ display:flex; justify-content:center; gap:8px; margin-top:16px; user-select:none }
.pager button{
  min-width:36px; height:36px; padding:0 10px; border-radius:10px;
  border:1px solid #e5e7eb; background:#fff; cursor:pointer;
}
.pager button[disabled]{ opacity:.5; cursor:not-allowed }
.pager .num.active{ background:#2f6bff; color:#fff; border-color:#1f54e8 }

/* 시설 카드 */
.facility-card{
  width:100%; text-align:left; background:#fff;
  border:1px solid #e7ebf0; border-radius:12px;
  padding:16px 18px; box-shadow:0 4px 10px rgba(0,0,0,.04);
  transition:box-shadow .15s ease, transform .05s ease; cursor:pointer;
}
.facility-card:hover:not(:disabled){ box-shadow:0 10px 22px rgba(0,0,0,.08) }
.facility-card:disabled{ cursor:not-allowed; opacity:.7 }
.fc-title{ display:flex; align-items:center; gap:8px; margin-bottom:6px }
.fc-title .name{ font-size:18px; font-weight:700; color:#1e293b }
.facility-card .badge{ display:inline-block; font-size:12px; padding:2px 8px; border-radius:999px; background:#e9eef7; color:#344054 }
.facility-card .badge.warn{ background:#fff2cc; color:#6b5600 }
.facility-card .badge.danger{ background:#ffe0e0; color:#a11 }
.fc-meta{ display:flex; gap:14px; color:#64748b; font-size:14px }
.fc-note{ margin-top:8px; color:#a11; font-size:13px }

/* 사이드 고정 */
.side .side-card, .side{ position:sticky; top:12px }

/* === Secondary Button === */
button.secondary {
  background:#e5e7eb; color:#111827;
  border:none; padding:12px 16px;
  border-radius:10px; font-weight:700; cursor:pointer;
  transition:background .15s ease, transform .05s ease;
}
button.secondary:hover{ background:#d1d5db; }
button.secondary:active{ transform:scale(0.98); }

/* ===== Legend 겹침/간격 패치 (최우선) ===== */

/* 1) 칩을 항상 인라인-플렉스로 만들어 아이콘·텍스트 간격을 확보 */
.resv-modal .legend .chip{
  display:inline-flex !important;
  align-items:center !important;
  position:static !important;   /* 절대배치 잔재 무력화 */
  gap:10px;                     /* 아이콘 ↔ 텍스트 간격 */
  padding:0; border:0; background:none;
  font-size:14px; font-weight:600; color:#475569;
  line-height:1; white-space:nowrap;
}

/* 2) 색상칩(네모) 만들기 + 네모 뒤 간격을 margin-right로 한 번 더 확보 */
.resv-modal .legend .chip::before{
  content:""; display:inline-block;
  width:14px; height:14px; border-radius:4px; flex:0 0 14px;
  margin-right:8px;             /* gap이 막혀도 간격 확보 */
  vertical-align:middle;
}

/* 상태별 색 */
.resv-modal .legend .chip.available::before{ background:#22c55e; }
.resv-modal .legend .chip.selected::before { background:#3b82f6; }
.resv-modal .legend .chip.booked::before   { background:#fda4af; }

/* 3) 칩들 사이 간격: gap이 먹히지 않는 환경까지 대비해 margin도 추가 */
.resv-modal .legend{
  display:flex !important; justify-content:center; align-items:center;
  flex-wrap:wrap; column-gap:28px; row-gap:6px; margin:10px 0 16px;
}
.resv-modal .legend .chip + .chip{ margin-left:28px; } /* 안전장치 */

/* 4) 예전 dot/아이콘 완전 차단(겹침 근본 원인 제거) */
.resv-modal .legend :is(.dot, .legend-dot, i, b, span[class*="dot"]){
  display:none !important;
  position:static !important;
  width:0 !important; height:0 !important; overflow:hidden !important;
}

/* Legend 미세 정렬 패치 (텍스트 기준 중앙 보정)*/
.resv-modal .legend {justify-content: center; align-items: flex-start;}

.resv-modal .legend .chip {
  display: inline-flex; align-items: center; justify-content: center; gap: 10px; line-height: 1; font-size: 14px;
  font-weight: 600; color: #475569; padding: 0; background: none; border: none; position: static !important;}

.resv-modal .legend .chip::before {content: ""; width: 16px; height: 16px; border-radius: 4px; flex-shrink: 0; margin-top: 1px;}

.resv-modal .legend .chip.available::before { background: #22c55e; }
.resv-modal .legend .chip.selected::before  { background: #3b82f6; }
.resv-modal .legend .chip.booked::before    { background: #fda4af; }

.resv-modal .legend .chip + .chip {margin-left: 32px;}

